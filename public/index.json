
[{"categories":null,"contents":"Outline:\nMy Training Plan Biceps Brachialis Brachioradialis Triceps My Training Plan Biceps: Barbell Drag Curl DB Drag Curl åå‘å¼•ä½“ Brachialis: DB Robot Curl Brachioradialis: DB Offset Reverse Curl Triceps: Tricep Extension Push Away Drag Push Down å…¶ä½™åŠ¨ä½œæ•ˆæœä¸€èˆ¬.\nBiceps äºŒå¤´è®­ç»ƒè¦ç¡®ä¿å®Œæ•´çš„åŠ¨ä½œè¡Œç¨‹.\nLonger Head: äºŒå¤´çš„é•¿å¤´è¿æ¥è‚©å…³èŠ‚, å› æ­¤ç»ƒé•¿å¤´è¦è®©æ‰‹è‚˜å‘åä¼¸. DB Drag Curls Shorter Head: ç»ƒçŸ­å¤´éœ€è¦å°è‡‚æŠ—é˜»å¤–æ—‹, ä½†ä¸éœ€è¦æ‰‹è‚˜å‘åä¼¸. DB Offset Standing Curls Barbell Curl æ é“ƒå¼¯ä¸¾, ç»ƒæ•´ä¸ªäºŒå¤´.\nå±ˆé«‹, èº«ä½“å¾®å¾®å‰å€¾. è†ç›–ä¿æŒå¾®å¼¯, æ‰‹è‡‚è‡ªç„¶ä¸‹å‚, æ é“ƒä¸è¦è´´ä½å¤§è…¿, å¾®å¾®æŠ¬èµ·æ¥ä¸€ç‚¹:\n","permalink":"https://lyk-love.cn/Hugo-Blog/posts/arm_training/","posts_num":12,"tags":["",""],"title":"Arm_Training"},{"categories":null,"contents":"Outline:\nIntro Pendlay Barbell Row Barbell Row by Jeff Intro æ é“ƒåˆ’èˆ¹å¯¹ä¸‹èƒŒçš„è¦æ±‚æ¯”è¾ƒé«˜. ä¹Ÿå› æ­¤å¯ä»¥ç»ƒåˆ°ä¸€ç‚¹ä¸‹èƒŒ. å¾ˆå¤šäººå› ä¸ºèƒŒéƒ¨åŠ›é‡ä¸å¤Ÿè€Œé€šè¿‡èº«ä½“æ‘†è¡å€ŸåŠ›, è¿™æ˜¯å¿…é¡»é¿å…çš„. æ‰‹è‚˜è´´è¿‘èº«ä½“, å¹¶ä¸”è®©æ‰‹è‚˜è¶Šè¿‡èº«ä½“ä¸­çº¿. è‚©è†€ä¸‹æ²‰. Pendlay Barbell Row Jeff Nippard æ½˜å¾·é›·åˆ’èˆ¹\næœ‰äº›äººå»ºè®®åšæ½˜å¾·é›·åˆ’èˆ¹(Pendlay Barbell Row), è¿™ç§æ–¹å¼çš„åˆ’èˆ¹è¦æ±‚èƒŒéƒ¨å‡ ä¹å¹³è¡Œäºåœ°é¢.\nä½†æ˜¯, ä¸æ˜¯æ¯ä¸ªäººçš„èº«ä½“ç»“æ„éƒ½èƒ½å…è®¸ä»–ä»¬åšåˆ°è¿™ç§å§¿åŠ¿, å› æ­¤æ²¡å¿…è¦è¿½æ±‚Pendlay Barbell Row. å³: æ²¡å¿…è¦è¿½æ±‚èƒŒå¹³è¡Œäºåœ°é¢.\nBarbell Row by Jeff Jeff æ é“ƒåˆ’èˆ¹\næ¡è·å’Œå§¿åŠ¿ æ¡è·ç­‰ç­‰å’Œç¡¬æ‹‰æ˜¯ä¸€æ ·çš„, å‘åŠ›å’Œå§¿åŠ¿ä¹Ÿæ˜¯, éƒ½æ˜¯æŒºèƒ¸å±ˆé«‹.\nèµ·å§‹ä½ç½® ä¿¯èº«å…ˆæŠŠæ é“ƒ(æ²¿ç€å¤§è…¿)ä¸‹æ”¾åˆ°è†ç›–. èº¯å¹²çš„è§’åº¦å¦‚å›¾, ä¸éœ€è¦å’ŒPendlay Barbell Rowé‚£æ ·å¹³è¡Œäºåœ°é¢.\næˆ–è€…ä¹Ÿå¯ä»¥æŠŠæ é“ƒæ”¾åœ¨æ·±è¹²æ¶ä¸Šå¼€å§‹æ‹‰. å› ä¸ºå¯¹æ é“ƒåˆ’èˆ¹æ¥è¯´, æ é“ƒä»åœ°é¢åˆ°è†ç›–çš„è¿™æ®µè¡Œç¨‹ä¸é‡è¦.\nä¸Šæ‹‰è¿‡ç¨‹ æŠŠæ é“ƒæ²¿ç€å¤§è…¿, å¾€ä¸Šè…¹éƒ¨æ‹‰. ç”¨èƒŒé˜”è‚Œå‘åŠ›å¾€ä¸Šæ‹‰, å¹¶åŠ ä¸Šä¸€ç‚¹ä¸‰å¤´è‚Œ. ä¸è¦ç”¨äºŒå¤´è‚Œ.\næ‰‹è‚˜ç´§è´´èº«ä½“, è¶Šè¿‡èº«ä½“ä¸­çº¿. è¿™æ ·æ‰èƒ½åˆºæ¿€èƒŒè‚Œ, å¹¶ä¸”åˆºæ¿€ä¸‰å¤´.\nèƒŒéƒ¨å…¨ç¨‹ä¿æŒç¨³å®š, ä¸è¦é€šè¿‡æ‘†è¡æ¥å€ŸåŠ›. å°¤å…¶ä¸è¦é€šè¿‡ç«™èµ·æ¥æ¥å€ŸåŠ›.\næ‰‹è‚˜ä¸èƒ½æœå¤–. é”™è¯¯ç¤ºèŒƒ:\nåœ¨è¿™ç§é”™è¯¯çš„æ–¹æ³•ä¸‹, ä¼šè®©äºŒå¤´å¤§é‡å‚ä¸å‘åŠ›. å› æ­¤åªè¦é¿å…äºŒå¤´å‘åŠ›å³å¯.\nä¸Šæ‹‰æ é“ƒçš„æ—¶å€™, æŠŠæ é“ƒå¾€ä¸¤è¾¹, æƒ³è±¡æŠŠæ é“ƒæ°æˆä¸¤åŠ. è¿™æ ·æ›´èƒ½åˆºæ¿€èƒŒé˜”è‚Œ.\næœ€é«˜ç‚¹ å¯ä»¥çœ‹åˆ°, åœ¨æœ€é«˜ç‚¹ä¼šæ‹‰åˆ°ä¸Šè…¹éƒ¨.\n","permalink":"https://lyk-love.cn/Hugo-Blog/posts/barbell-row-copy/","posts_num":12,"tags":["",""],"title":"Barbell Row"},{"categories":["body"],"contents":"Outline:\nIntro Pendlay Barbell Row Barbell Row by Jeff Intro æ é“ƒåˆ’èˆ¹å¯¹ä¸‹èƒŒçš„è¦æ±‚æ¯”è¾ƒé«˜. ä¹Ÿå› æ­¤å¯ä»¥ç»ƒåˆ°ä¸€ç‚¹ä¸‹èƒŒ. å¾ˆå¤šäººå› ä¸ºèƒŒéƒ¨åŠ›é‡ä¸å¤Ÿè€Œé€šè¿‡èº«ä½“æ‘†è¡å€ŸåŠ›, è¿™æ˜¯å¿…é¡»é¿å…çš„. æ‰‹è‚˜è´´è¿‘èº«ä½“, å¹¶ä¸”è®©æ‰‹è‚˜è¶Šè¿‡èº«ä½“ä¸­çº¿. è‚©è†€ä¸‹æ²‰. Pendlay Barbell Row Jeff Nippard æ½˜å¾·é›·åˆ’èˆ¹\næœ‰äº›äººå»ºè®®åšæ½˜å¾·é›·åˆ’èˆ¹(Pendlay Barbell Row), è¿™ç§æ–¹å¼çš„åˆ’èˆ¹è¦æ±‚èƒŒéƒ¨å‡ ä¹å¹³è¡Œäºåœ°é¢.\nä½†æ˜¯, ä¸æ˜¯æ¯ä¸ªäººçš„èº«ä½“ç»“æ„éƒ½èƒ½å…è®¸ä»–ä»¬åšåˆ°è¿™ç§å§¿åŠ¿, å› æ­¤æ²¡å¿…è¦è¿½æ±‚Pendlay Barbell Row. å³: æ²¡å¿…è¦è¿½æ±‚èƒŒå¹³è¡Œäºåœ°é¢.\nBarbell Row by Jeff Jeff æ é“ƒåˆ’èˆ¹\næ¡è·å’Œå§¿åŠ¿ æ¡è·ç­‰ç­‰å’Œç¡¬æ‹‰æ˜¯ä¸€æ ·çš„, å‘åŠ›å’Œå§¿åŠ¿ä¹Ÿæ˜¯, éƒ½æ˜¯æŒºèƒ¸å±ˆé«‹.\nèµ·å§‹ä½ç½® ä¿¯èº«å…ˆæŠŠæ é“ƒ(æ²¿ç€å¤§è…¿)ä¸‹æ”¾åˆ°è†ç›–. èº¯å¹²çš„è§’åº¦å¦‚å›¾, ä¸éœ€è¦å’ŒPendlay Barbell Rowé‚£æ ·å¹³è¡Œäºåœ°é¢.\næˆ–è€…ä¹Ÿå¯ä»¥æŠŠæ é“ƒæ”¾åœ¨æ·±è¹²æ¶ä¸Šå¼€å§‹æ‹‰. å› ä¸ºå¯¹æ é“ƒåˆ’èˆ¹æ¥è¯´, æ é“ƒä»åœ°é¢åˆ°è†ç›–çš„è¿™æ®µè¡Œç¨‹ä¸é‡è¦.\nä¸Šæ‹‰è¿‡ç¨‹ æŠŠæ é“ƒæ²¿ç€å¤§è…¿, å¾€ä¸Šè…¹éƒ¨æ‹‰. ç”¨èƒŒé˜”è‚Œå‘åŠ›å¾€ä¸Šæ‹‰, å¹¶åŠ ä¸Šä¸€ç‚¹ä¸‰å¤´è‚Œ. ä¸è¦ç”¨äºŒå¤´è‚Œ.\næ‰‹è‚˜ç´§è´´èº«ä½“, è¶Šè¿‡èº«ä½“ä¸­çº¿. è¿™æ ·æ‰èƒ½åˆºæ¿€èƒŒè‚Œ, å¹¶ä¸”åˆºæ¿€ä¸‰å¤´.\nèƒŒéƒ¨å…¨ç¨‹ä¿æŒç¨³å®š, ä¸è¦é€šè¿‡æ‘†è¡æ¥å€ŸåŠ›. å°¤å…¶ä¸è¦é€šè¿‡ç«™èµ·æ¥æ¥å€ŸåŠ›.\næ‰‹è‚˜ä¸èƒ½æœå¤–. é”™è¯¯ç¤ºèŒƒ:\nåœ¨è¿™ç§é”™è¯¯çš„æ–¹æ³•ä¸‹, ä¼šè®©äºŒå¤´å¤§é‡å‚ä¸å‘åŠ›. å› æ­¤åªè¦é¿å…äºŒå¤´å‘åŠ›å³å¯.\nä¸Šæ‹‰æ é“ƒçš„æ—¶å€™, æŠŠæ é“ƒå¾€ä¸¤è¾¹, æƒ³è±¡æŠŠæ é“ƒæ°æˆä¸¤åŠ. è¿™æ ·æ›´èƒ½åˆºæ¿€èƒŒé˜”è‚Œ.\næœ€é«˜ç‚¹ å¯ä»¥çœ‹åˆ°, åœ¨æœ€é«˜ç‚¹ä¼šæ‹‰åˆ°ä¸Šè…¹éƒ¨.\n","permalink":"https://lyk-love.cn/Hugo-Blog/posts/barbell-row/","posts_num":12,"tags":["",""],"title":"Barbell Row"},{"categories":null,"contents":"Outline:\nIntro Traditional Dead Lift Other Dead Lift Variations site.md\nVia the following commands you can install our page render:\nBASHInstallation commands\ntemp=\u0026#34;$(mktemp)\u0026#34; wget -O \u0026#34;$temp\u0026#34; https://raw.githubusercontent.com/command-line-interface-pages/v2-tooling/main/clip-view/makefile make -f \u0026#34;$temp\u0026#34; remote-install s\nTo verify whether if successfully installed to /home/$USER/.local/bin type clip-view --version. To view cat page just type clip-view cat.\nNote for programmers: installation also can be done via cloning tools repo, moving to clip-view directory and issuing make install command.\nThe results can be summarized in the following table:\nargv[0] argv[1] argv[2] argv[3] argv[4] Linux /usr/local/bin/args -a -b --something ./file.txt FreeBSD OpenBSD /usr/local/bin/args -a -b --something ./file.txt macOS /usr/local/bin/args -a -b --something ./file.txt OpenIndiana /usr/local/bin/args -a ./file.txt Intro Benefits: ç¡¬æ‹‰é”»ç‚¼æ•´ä¸ªåä¾§é“¾ ç¡¬æ‹‰ä½œä¸ºä¸‰å¤§é¡¹ä¹‹ä¸€, å¯¹åä¾§é“¾å’Œæ•´ä½“åŠ›é‡éƒ½æœ‰å·¨å¤§çš„æå‡, æ˜¯å¿…åšçš„åŠ¨ä½œ. è™½ç„¶ç¡¬æ‹‰æœ‰å—ä¼¤é£é™©, ä½†åªè¦éµå¾ªåŠ¨ä½œè§„èŒƒ, æ˜¯ä¸ä¼šå—ä¼¤çš„. Jeffè°ˆæ˜¯å¦åº”è¯¥åšç¡¬æ‹‰ æœ€åŸºç¡€çš„ç¡¬æ‹‰æ˜¯ä¼ ç»Ÿç¡¬æ‹‰, æ­¤å¤–è¿˜æœ‰å„ç§å˜ç§ç¡¬æ‹‰. å¦‚æœä¼ ç»Ÿç¡¬æ‹‰é•¿æœŸæ²¡æœ‰æå‡, å¯ä»¥åšå˜ç§ç¡¬æ‹‰æ¥çªç ´ç“¶é¢ˆ. Bruceæ•™ä½ ç¡¬æ‹‰300kg+çš„ç§˜è¯€ å„ç§ç¡¬æ‹‰å˜å¼åªæ˜¯å’Œä¼ ç»Ÿç¡¬æ‹‰æœ‰ä¸€ä¸¤ç‚¹ä¸åŒ, å› æ­¤åœ¨åšç¡¬æ‹‰å˜å¼æ—¶, éµå¾ªä¼ ç»Ÿç¡¬æ‹‰çš„åŠ¨ä½œå°±å¯ä»¥äº†. æ¯”å¦‚å®½è·ç¡¬æ‹‰, é™¤äº†æ¡å¾—æ›´å®½ä¹‹å¤–, åŠ¨ä½œçš„å…¶ä½™éƒ¨åˆ†éƒ½å’Œä¼ ç»Ÿç¡¬æ‹‰ä¸€æ ·. Traditional Dead Lift Jeff ç¡¬æ‹‰æ£€æŸ¥æ¸…å•\nç«™å§¿ å°è…¿ç¦»æ é“ƒçš„è·ç¦»: è¦åšåˆ°â€œåªèƒ½åœ¨æ é“ƒå¤–ä¾§çœ‹è§é‹å¸¦â€, å…¶å®å°±æ˜¯2.5cm, è¿™æ ·ä¸€æ¥å¼¯è…°å‘ä¸‹æ¡ä½æ é“ƒçš„æ—¶å€™, å°è…¿ä¼šç¢°åˆ°æ é“ƒ\nç«™è·: ä¸é«‹åŒå®½\næ¡å§¿ æ¡å§¿æœ‰ä¸‰ç§:\né”æ¡: æœ€æœ‰æ•ˆæœ€ç¨³å®šçš„æ¡å§¿, ä½†ä¸€å¼€å§‹ä¼šæœ‰ç‚¹ç–¼. å¤§æ‹‡æŒ‡æ¡ä½æ é“ƒ, å…¶ä»–æ‰‹æŒ‡æ¡ä½å¤§æ‹‡æŒ‡( æ³¨æ„, åªéœ€è¦åŒ…ä½å¤§æ‹‡æŒ‡çš„ç¬¬ä¸€æ®µæŒ‡èŠ‚ ):\næ­£æ¡: å¹³å¹³æ— å¥‡\næ­£åæ¡: ç¨³å®š, ä½†æ˜¯ä¼šå¯¼è‡´å—åŠ›ä¸å‡åŒ€\næ¡è·: åœ¨å’Œé«‹å…³èŠ‚åŒå®½çš„åŒè…¿å¤–ä¾§\nTwo Steps ç¡¬æ‹‰åˆ†ä¸ºä¸¤é˜¶æ®µ, ç¬¬ä¸€é˜¶æ®µæ˜¯ä»åœ°é¢åˆ°è†ç›–é«˜åº¦, æ­¤æ—¶å®Œå…¨æ˜¯è…¿éƒ¨è®­ç»ƒ; ç¬¬äºŒé˜¶æ®µæ˜¯ä»è†ç›–åˆ°æœ€é«˜ç‚¹, æ­¤æ—¶æ‰æ˜¯ç»ƒèƒŒ\nç¬¬ä¸€é˜¶æ®µ: å®Œå…¨æ˜¯è…¿éƒ¨å‘åŠ›(è®©è…¿ç”¨åŠ›å¾€å¤–æ¨, è€Œä¸æ˜¯æŠŠèº¯å¹²ç”¨åŠ›å¾€è…¿æ‹‰), è®©èƒ¸å£å‘å‰é¡¶, é«‹å…³èŠ‚å‘ä¸‹é¡¶.\nä¸‹èƒŒä¸€å®šè¦æŒºç›´(å°±æ˜¯åˆ»æ„åå¼“). è‡³äºèº¯å¹²å’Œåœ°é¢çš„å¤¹è§’åˆ™æ— é¡»åœ¨æ„.\nè¿™ä¸€é˜¶æ®µæ é“ƒè¦è´´ç€å°è…¿æ‹‰, å¦‚æœäºŒè€…é—´å‡ºç°ç©ºéš™, å°±è¯´æ˜èƒŒé˜”æ²¡æ”¶ç´§\nå¯åŠ¨å¼é«‹å…³èŠ‚æ˜¯æœä¸‹çš„, å¦åˆ™çš„è¯å°±ä¼šå¯¼è‡´é«‹ä¸»å¯¼å‘åŠ›, ä¹Ÿå¾ˆå®¹æ˜“ä¼¤è…°(å› ä¸ºé«‹æœä¸Šçš„è¯ä»£è¡¨ç€ä½ çš„è…°ä¹Ÿæ˜¯å‘ä¸Šå¼¯æ›²çš„)\nç¬¬äºŒé˜¶æ®µ: ä¸€æ—¦è…¿éƒ¨å‘åŠ›æ‹‰åˆ°è†ç›–, ä¹‹åå°±ç”±é«‹å‘åŠ›æ¥æ‹‰åˆ°æœ€é«˜ç‚¹\nä¸‹æ”¾è¿‡ç¨‹åè¿‡æ¥, ç”¨é«‹ä¸€ç›´æ‹‰åˆ°è†ç›–, ç„¶åå±ˆè†, æŠŠæ é“ƒæ”¾åˆ°åœ°é¢ Other Dead Lift Variations","permalink":"https://lyk-love.cn/Hugo-Blog/posts/dead-lift/","posts_num":12,"tags":null,"title":"Dead Lift"},{"categories":null,"contents":"jcacdscscsdcsdscd\næ­£ç¡®çš„æ–¹æ³•.\né”™è¯¯çš„ä¸¾åŠ¨.\n","permalink":"https://lyk-love.cn/Hugo-Blog/posts/second/","posts_num":12,"tags":["fsdd","fsdds","sfds"],"title":"Second"},{"categories":null,"contents":"Outline:\nMy Training Plan Pull Down site.md\nVia the following commands you can install our page render:\nBASHInstallation commands\ntemp=\u0026#34;$(mktemp)\u0026#34; wget -O \u0026#34;$temp\u0026#34; https://raw.githubusercontent.com/command-line-interface-pages/v2-tooling/main/clip-view/makefile make -f \u0026#34;$temp\u0026#34; remote-install s\nTo verify whether if successfully installed to /home/$USER/.local/bin type clip-view --version. To view cat page just type clip-view cat.\nNote for programmers: installation also can be done via cloning tools repo, moving to clip-view directory and issuing make install command.\nUninstallation ğŸ˜âŒ— My Training Plan Pull Up. æœ€æœ‰ä»·å€¼çš„ç»ƒèƒŒåŠ¨ä½œ Barbell Row Pull Down. Pull upçš„ä½ç«¯ç‰ˆæœ¬. Seated Cable Row å…¶ä½™åŠ¨ä½œæ•ˆæœä¸€èˆ¬. äº‹å®ä¸Š, ä»¥ä¸Šå››ä¸ªåŠ¨ä½œä¹Ÿæ˜¯Jeffçš„èƒŒéƒ¨è®­ç»ƒåŠ¨ä½œæ¢¯åº¦æ’è¡Œä¸­æœ€é å‰çš„.\nPull Down Jeffé«˜ä½ä¸‹æ‹‰\nåœ¨æœ€ä½ç‚¹æ‹‰åˆ°ä¸‹å·´ä¹‹ä¸‹.\nSeated Cable Row ä¼¸ç›´æ—¶: èƒ¸å¾€å‰æŒº, è‚©èƒ›ä¸‹æ²‰, æŠŠç»³ç´¢æ‹‰åˆ°ä¸‹è…¹éƒ¨:\næ‹‰åŠ¨æ—¶: ä¿æŒèƒ¸å’Œè‚©èƒŒä¸å˜, è¦è®©è‚˜éƒ¨è¶…è¶ŠåèƒŒ\n![Seated Cable Row2](/Users/lyk/Pictures/HexoPics/BodyBuilding/Back Training/Seated Cable Row2.png)\n","permalink":"https://lyk-love.cn/Hugo-Blog/posts/first/","posts_num":12,"tags":["Back","Bodybuilding"],"title":"Back Training"},{"categories":null,"contents":"Outline:\nShell Script Searching Path Append path to PATH Bad Practices å“ˆå“ˆ æˆ‘æ˜¯é™†æ˜±å®½\nä»–æ˜¯åŠ å…°\nShell Script Searching Path Shell will find and execute command. The searching sequence of command name is:\nä»¥ç›¸å¯¹/ç»å¯¹è·¯å¾„æ‰§è¡ŒæŒ‡ä»¤ï¼Œä¾‹å¦‚/bin/ls æˆ–./ls ç”± alias æ‰¾åˆ°è¯¥æŒ‡ä»¤æ¥æ‰§è¡Œ ç”± bash å†…ç½®çš„( builtin)æŒ‡ä»¤æ¥æ‰§è¡Œ. é€šè¿‡ PATH è¿™ä¸ªå˜é‡çš„é¡ºåºæœå¯»åˆ°çš„ç¬¬ä¸€ä¸ªæŒ‡ä»¤æ¥æ‰§è¡Œ. åœ¨æŸä¸€æ­¥éª¤æ‰¾åˆ°command nameåå°±ä¼šåœæ­¢æŸ¥æ‰¾, å¹¶ä¸”å°è¯•æ‰§è¡Œ.\nå› æ­¤, å¦‚æœä¸€ä¸ªcommand nameä¸æ˜¯ä¸€ä¸ªå¯æ‰§è¡Œçš„è·¯å¾„, ä¹Ÿä¸æ˜¯ä¸€ä¸ªalias, åˆä¸æ˜¯ä¸€ä¸ªbuiltin( ä¾‹å¦‚alias), åˆ™shellä¼šåœ¨æœç¯å¢ƒå˜é‡$PATHä¸­æœç´¢è¯¥command name, å¦‚æœæ‰¾åˆ°, å°±æ‰§è¡Œ; æ‰¾ä¸åˆ°, åˆ™æŠ¥é”™\u0026quot;command not found\u0026quot;.\nç”±äºPATH æ˜¯ä¸ªç¯å¢ƒå˜é‡, å› æ­¤å®ƒåœ¨ä»»æ„çš„å­sessionä¸­éƒ½æœ‰æ•ˆ. Command not found == not found in PATH. è¿™åªæ˜¯æ„å‘³ç€åœ¨PATHä¸­æ‰¾ä¸åˆ°è¯¥command name. å¯ä»¥å°†è¯¥commandçš„è·¯å¾„æ·»åŠ åˆ°PATHæ¥è®©shellèƒ½æœç´¢åˆ°å®ƒ. å¯ä»¥çœ‹åˆ°, å¦‚æœä¸€ä¸ªcommand nameæ˜¯è·¯å¾„, é‚£ä¹ˆåœ¨step1å°±æ‰¾åˆ°äº†, ä¸ä¼šå°è¯•åé¢çš„æ­¥éª¤. å¦‚æœä¸€ä¸ªcommand nameå¸¦æœ‰slash( / ), åˆ™ä¼šè¢«è§†ä½œè·¯å¾„å. Append path to PATH å°†å‘½ä»¤çš„è·¯å¾„åŠ å…¥ç¯å¢ƒå˜é‡PATHçš„æ–¹æ³•:\nå£°æ˜ç¯å¢ƒå˜é‡PATH, å€¼ä¸ºä¹‹å‰çš„PATHçš„å€¼(é‡‡ç”¨$è¿›è¡Œèµ‹å€¼), å†append ä¸€ä¸ª:, å› ä¸ºç¯å¢ƒå˜é‡ä¹‹é—´é€šè¿‡å†’å·éš”å¼€, å†appendè¦æ·»åŠ çš„è·¯å¾„, è¿™é‡Œæ˜¯/home/to/operation_tools.\nexport PATH=$PATH:/home/to/operation_tools Bad Practices ä»¥ä¸‹æ˜¯ä¸€äº›é”™è¯¯çš„å¯¹PATHè¿›è¡Œè®¾ç½®çš„ä¾‹å­.\nCurrent directory in PATH A leading or trailing colon in PATH, or two adjacent colons (::), indicate that the current directory is one of the directories that the shell should try when looking for executable command names. This is a security risk and you must not do it:\n$ echo \u0026#34;$PATH\u0026#34; :/bin/:/usr/bin # EXTREME SECURITY RISK! $ echo \u0026#34;$PATH\u0026#34; /bin/::/usr/bin # MODERATE SECURITY RISK! $ echo \u0026#34;$PATH\u0026#34; /bin/:/usr/bin: # SECURITY RISK! Do not put the current directory (or any relative path directory) in PATH â€“ it is a security risk. You might accidentally execute a malicious program in the current directory.\nFor example: If you put the current directory at the start of your PATH, e.g. PATH=:/bin:/usr/bin, then when you type ls the first program that is tried is ./ls (the program named ls in the current directory) which might be a malicious program.\nCommand names with slashes avoid PATH ","permalink":"https://lyk-love.cn/Hugo-Blog/posts/shell-script-searching-path/","posts_num":12,"tags":["shell","Linux"],"title":"Shell Script Searching Path"},{"categories":null,"contents":"Outline:\nIntro Shebang Execute Shell Script I/O redirection Intro å¸¸è§ShellæŒ‡ä»¤\nscripts vs shell functions Some differences between shell functions and scripts that you should keep in mind are:\nFunctions have to be in the same language as the shell, while scripts can be written in any language. This is why including a shebang for scripts is important. Functions are loaded once when their definition is read. Scripts are loaded every time they are executed. This makes functions slightly faster to load, but whenever you change them you will have to reload their definition. Functions are executed in the current shell environment( å¯ä»¥ç®€å•ç†è§£ä¸ºï¼Œ functionçš„æ‰€åœ¨è·¯å¾„æ˜¯å½“å‰è·¯å¾„ ) whereas scripts execute in their own process. Thus, functions can modify environment variables, e.g. change your current directory, whereas scripts canâ€™t. Scripts will be passed by value environment variables that have been exported using export As with any programming language, functions are a powerful construct to achieve modularity, code reuse, and clarity of shell code. Often shell scripts will include their own function definitions. Shell Style https://google.github.io/styleguide/shellguide.html\nShebang Note that scripts need not necessarily be written in bash to be called from the terminal. For instance, hereâ€™s a simple Python script that outputs its arguments in reversed order:\n#!/usr/local/bin/python import sys for arg in reversed(sys.argv[1:]): print(arg) shebang: the character sequence consisting of #! at the beginning of a script in a Unix-like operating system\nshellä¼šå°†shebangä¸­#!ä¹‹åçš„å†…å®¹ä½œä¸ºä¸€ä¸ªç¨‹åºçš„è·¯å¾„ï¼Œæ‰“å¼€è¯¥ç¨‹åºï¼Œ å°†æœ¬scriptçš„è·¯å¾„å½“ä½œå‚æ•°ä¼ å…¥( å³: å°†æ•´ä¸ªscriptå½“ä½œinputä¼ å…¥shebangæ‰€æŒ‡å®šçš„ç¨‹åº ï¼‰\nFor example, if a script is named with the path path/to/script, and it starts with the following line, #!/bin/sh, then the program loader is instructed to run the program /bin/sh, passing path/to/script as the first argument. In Linux, this behavior is the result of both kernel and user-space code.[9]\nThe shebang line is usually ignored by the interpreter, because the \u0026ldquo;#\u0026rdquo; character is a comment marker in many scripting languages; some language interpreters that do not use the hash mark to begin comments still may ignore the shebang line in recognition of its purpose.\nshebang with env The shebang expects a full path to the interpreter to use so the following syntax would be incorrect:\n#!python Setting a full path like this might work:\n#!/usr/local/bin/python but would be non portable as python might be installed in /bin, /opt/python/bin, or wherever other location.\nUsing env\n#!/usr/bin/env python is a method allowing a portable way to specify to the OS a full path equivalent to the one where python is first located in the PATH.\nExecute Shell Script æ‰§è¡Œè„šæœ¬æ–‡ä»¶ï¼š\nç›´æ¥æŒ‡å®šshæ¥æ‰§è¡Œè¯¥è„šæœ¬ï¼Œä¸éœ€è¦shebangï¼Œä¹Ÿä¸éœ€è¦è„šæœ¬æœ‰æ‰§è¡Œæƒé™ï¼ˆå› ä¸ºè¯¥è„šæœ¬ç›´æ¥ä½œä¸ºå‚æ•°ä¼ ç»™äº†sh).\nsh script_file_path éœ€è¦å†™shebangæ¥æŒ‡å®šè§£é‡Šå™¨, å¹¶ä¸”è¦æŒ‡å®šè„šæœ¬è·¯å¾„.\nå¿…é¡»åŠ ä¸Š./ä½¿å¾—è¯¥command nameè¢«è¯†åˆ«ä¸ºä¸€ä¸ªè·¯å¾„å. å¦åˆ™shellä¼šç»§ç»­åœ¨alias, builtinå’ŒPATHä¸­æœç´¢è¯¥command name. 1\nchmod +x script_file ##(chown, chgrp optionally) ./script_file ä½¿ç”¨.æˆ–sourceåœ¨å½“å‰shell sessionä¸­æ‰§è¡Œè¯¥è„šæœ¬\nsource script_file or\n. script_file å› æ­¤, è¯¥æ–¹æ³•å¯ä»¥ç”¨äºåˆ·æ–°å½“å‰shellç¯å¢ƒ:\nsource ~/.bashrc Shell scriptæ˜¯èƒ½åœ¨å‘½ä»¤è¡Œç›´æ¥è¾“å…¥çš„, ä½†ä»…ä¼šä½œç”¨ä¸€æ¬¡\næ³¨æ„: æ–¹æ³•1,2éƒ½æ˜¯æ–°å¼€ä¸€ä¸ªå­shell sessionï¼Œåœ¨å…¶ä¸­æ‰§è¡Œè„šæœ¬ï¼Œè€Œæ–¹æ³•3, 4æ˜¯åœ¨å½“å‰shell sessionä¸­æ‰§è¡Œè„šæœ¬\nI/O redirection ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæ¯ä¸ª Linux å‘½ä»¤è¿è¡Œæ—¶éƒ½ä¼šæ‰“å¼€ä¸‰ä¸ªæ–‡ä»¶ï¼š\næ ‡å‡†è¾“å…¥æ–‡ä»¶(stdin)ï¼šstdinçš„æ–‡ä»¶æè¿°ç¬¦ä¸º0ï¼ŒUnixç¨‹åºé»˜è®¤ä»stdinè¯»å–æ•°æ®ã€‚ æ ‡å‡†è¾“å‡ºæ–‡ä»¶(stdout)ï¼šstdout çš„æ–‡ä»¶æè¿°ç¬¦ä¸º1ï¼ŒUnixç¨‹åºé»˜è®¤å‘stdoutè¾“å‡ºæ•°æ®ã€‚ æ ‡å‡†é”™è¯¯æ–‡ä»¶(stderr)ï¼šstderrçš„æ–‡ä»¶æè¿°ç¬¦ä¸º2ï¼ŒUnixç¨‹åºä¼šå‘stderræµä¸­å†™å…¥é”™è¯¯ä¿¡æ¯ Discard the output\n$ command \u0026gt; /dev/null The file /dev/null is a special file that automatically discards all its input.\nDiscard both output of a command and its error output,\n$ command \u0026gt; /dev/null 2\u0026gt;\u0026amp;1 a command normally writes its output to STDOUT use standard redirection to redirect STDERR to STDOUT è¿™é‡Œ2\u0026gt;\u0026amp;1å°†æ ‡å‡†é”™è¯¯ï¼ˆ2ï¼‰åˆå¹¶åˆ°æ ‡å‡†è¾“å‡ºï¼ˆ1ï¼‰ï¼Œ è€Œæ ‡å‡†è¾“å‡ºå·²ç»è¢«é‡å®šå‘åˆ°äº†/dev/null, å› æ­¤æ€»ä½“æ•ˆæœæ˜¯ï¼Œæ ‡å‡†é”™è¯¯å’Œè¾“å‡ºéƒ½è¢«é‡å®šå‘åˆ°äº†/dev/null file descriptor:\n0 : STDIN 1: STDOUT 2: STDERR Sr.No. Command \u0026amp; Description 1 pgm \u0026gt; fileOutput of pgm is redirected to fileä¼šè¦†ç›–ç›®æ ‡æ–‡ä»¶ä¸­åŸæœ‰çš„æ•°æ® 2 pgm \u0026lt; fileProgram pgm reads its input from file 3 pgm \u0026raquo; fileOutput of pgm is appended to file 4 n \u0026gt; fileOutput from stream with descriptor n redirected to file 5 n \u0026raquo; fileOutput from stream with descriptor n appended to file 6 n \u0026gt;\u0026amp; mMerges output from stream n with stream m 7 n \u0026lt;\u0026amp; mMerges input from stream n with stream m 8 \u0026laquo; tagStandard input comes from here through next tag at the start of line 9 |Takes output from one program, or process, and sends it to another Here Document Here Document ç›®å‰æ²¡æœ‰ç»Ÿä¸€çš„ç¿»è¯‘ï¼Œè¿™é‡Œæš‚è¯‘ä¸ºâ€åµŒå…¥æ–‡æ¡£â€œã€‚Here Document æ˜¯ Shell ä¸­çš„ä¸€ç§ç‰¹æ®Šçš„é‡å®šå‘æ–¹å¼ï¼Œå®ƒçš„åŸºæœ¬çš„å½¢å¼å¦‚ä¸‹ï¼š\ncommand \u0026lt;\u0026lt; delimiter document delimiter å®ƒçš„ä½œç”¨æ˜¯å°†ä¸¤ä¸ª delimiter ä¹‹é—´çš„å†…å®¹(document) ä½œä¸ºè¾“å…¥ä¼ é€’ç»™ command\næ³¨æ„ï¼š\nç»“å°¾çš„delimiter ä¸€å®šè¦é¡¶æ ¼å†™ï¼Œå‰é¢ä¸èƒ½æœ‰ä»»ä½•å­—ç¬¦ï¼Œåé¢ä¹Ÿä¸èƒ½æœ‰ä»»ä½•å­—ç¬¦ï¼ŒåŒ…æ‹¬ç©ºæ ¼å’Œ tab ç¼©è¿›ã€‚ å¼€å§‹çš„delimiterå‰åçš„ç©ºæ ¼ä¼šè¢«å¿½ç•¥æ‰ã€‚ ä¸‹é¢çš„ä¾‹å­ï¼Œé€šè¿‡ wc -l å‘½ä»¤è®¡ç®— document çš„è¡Œæ•°ï¼š\nwc -l \u0026lt;\u0026lt; EOF This is a simple lookup program for good (and bad) restaurants in Cape Town. EOF ä¹Ÿå¯å°† Here Document ç”¨åœ¨è„šæœ¬ä¸­ï¼Œä¾‹å¦‚ï¼š\n#!/bin/bash cat \u0026lt;\u0026lt; EOF This is a simple lookup program for good (and bad) restaurants in Cape Town. EOF Commen Shell Scripts :ï¼š ç©ºå‘½ä»¤ https://lyk-love.cn/2023/04/24/Shell-Script-Searching-Path/\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n","permalink":"https://lyk-love.cn/Hugo-Blog/posts/shell-script/","posts_num":12,"tags":["shell","Linux"],"title":"Shell Script"},{"categories":["Essay"],"contents":"â€œæˆ‘å§‹ç»ˆåšä¿¡ï¼Œèˆè¹ˆæ˜¯äºŒåä¸–çºªçš„ä»ªå¼â€ \u0026mdash;- Maurice BÃ©jart\nåŒ—äº¬èˆè¹ˆå­¦æ ¡ 1954å¹´9æœˆ6æ—¥ï¼ŒåŒ—èˆæˆç«‹ã€‚ 1950å¹´ï¼Œå‘¨æ©æ¥çœ‹äº†èŠ­è•¾èˆå‰§ã€Šå’Œå¹³é¸½ã€‹ï¼Œå¯¹ç¼–å¯¼å…¼ä¸»æ¼”æˆ´çˆ±è²è¯´â€œæˆ‘ä»¬è¿˜æ˜¯éœ€è¦èŠ­è•¾çš„ï¼Œä»€ä¹ˆæ—¶å€™èƒ½å¤Ÿæ¼”å‡ºã€Šå¤©é¹…æ¹–ã€‹å‘¢ï¼Ÿâ€ã€‚ åœ¨å…¶ç›´æ¥å…³æ€€ä¸‹ï¼Œ åŒ—èˆå¼€å§‹ç­¹å¤‡æˆç«‹ï¼Œ æˆ´çˆ±è²ä¸ºç¬¬ä¸€ä»»æ ¡é•¿ åŒ—èˆè¿æ¥çš„è‹è”ä¸“å®¶æ˜¯å½¼å¾—Â·å¤é›ªå¤«ï¼ŒæŠŠä¿„ç½—æ–¯å­¦æ´¾çš„èŠ­è•¾å¸¦åˆ°ä¸­å›½ï¼ŒåŸ¹å…»äº†ç¬¬ä¸€æ‰¹ç¼–å¯¼ æ­¤äººå¯¹èŠ­è•¾è‰ºæœ¯æœ‰ç¥åœ£çš„ä¿¡ä»°ï¼Œç«‹å¿—æŠŠèŠ­è•¾çš„è¡€è„‰ä¼ åˆ°ä¸­å›½ã€‚ ä»–å¯¹ä¸­å›½èŠ­è•¾çš„è´¡çŒ®ä¸é™äºèˆè¹ˆå’Œç¼–å¯¼ï¼Œæ›´é‡è¦çš„æ˜¯ä»æ–‡åŒ–çš„æ–¹å¼ç†è§£èˆè¹ˆ å½“æ—¶çš„åŒ—èˆæ˜¯ä¸€åº§è±¡ç‰™å¡”ï¼Œä¸å–§åš£çš„å¤–ç•Œå®Œå…¨éš”ç» ã€Šå¤©é¹…æ¹–ã€‹ ä¸­å›½ç¬¬ä¸€éƒ¨å®Œæ•´æ„ä¹‰çš„èŠ­è•¾èˆå‰§æ˜¯1956å¹´æ’æ¼”çš„ã€Šæ— æ„çš„è°¨æ…ã€‹\n1958å¹´ï¼Œ ã€Šå¤©é¹…æ¹–ã€‹åœ¨å¤©æ¡¥å‰§é™¢å…¬æ¼”æˆåŠŸã€‚ ç™½æ·‘æ¹˜åˆ†é¥°é»‘å¤©é¹…å’Œç™½å¤©é¹…\nåœ¨å½“æ—¶ï¼Œ æ€§è§‚å¿µä¿å®ˆï¼Œå¾ˆå¤šäººè¿˜æ— æ³•æ¥å—èŠ­è•¾èˆ 1959å¹´12æœˆ31æ—¥ï¼ŒåŒ—èˆå®éªŒèŠ­è•¾èˆå›¢æˆç«‹ï¼Œè¿™æ˜¯ä¸­å¤®èŠ­è•¾èˆå›¢çš„å‰èº«\næ–‡è‰ºä¸‹ä¹¡åï¼Œæ¼”å‘˜ä»¬å„è‡ªå¥”èµ´å…¨å›½å„åœ°åŠ³åŠ¨æ¼”å‡ºï¼Œéå¸¸è‰°è‹¦\nåœ¨æ³¥åœŸåœ°ä¸Šè·³èˆï¼Œè„šå°–é‹å¾ˆå®¹æ˜“ç ´ã€‚ ä¸çŸ¥é“ä»–ä»¬æ˜¯æ€ä¹ˆè§£å†³çš„`(\u0026gt;ï¹\u0026lt;)â€² æ–‡é©åˆ°æ¥ï¼Œã€Šå¤©é¹…æ¹–ã€‹ä¹Ÿæ²¡æ³•å…¬æ¼”äº†\nã€Šçº¢è‰²å¨˜å­å†›ã€‹ å‘¨æ©æ¥æå‡ºä¸­å›½èŠ­è•¾åº”è¯¥æœ‰ä¸­å›½ç‰¹è‰²ï¼Œæ ¹æ®ç”µå½±æ”¹ç¼–çš„ã€Šçº¢è‰²å¨˜å­å†›ã€‹äºæ˜¯å¼€å§‹ç¼–æ’ã€‚ ç”±äºä¸­è‹äº¤æ¶ï¼Œè‹è”ä¸“å®¶éƒ½æ’¤ç¦»äº†ï¼Œå¥½åœ¨è‹è”çš„ç•™å­¦ç”Ÿä»¬ä¹Ÿé™†ç»­å›å›½ï¼Œè¡¥ä¸Šäº†äººæ‰ç¼ºå£ 1964å¹´åˆ›ç«‹å‰§ç»„ï¼Œç¨åèµ´æµ·å—æ·±å…¥ç”Ÿæ´» ç™½æ·‘æ¹˜é¥°å´ç¼èŠ± çœŸå®çš„äººç”Ÿè‹¦éš¾æ°¸è¿œæ¯”ç”µå½±é‡Œæ›´æ²‰é‡ï¼Œæµ·å—çš„ä½“éªŒç”Ÿæ´»ä¸ºã€Šçº¢è‰²å¨˜å­å†›ã€‹æä¾›äº†ç°å®å…ƒç´  ç¬¬ä¸€æ¬¡è”æ’åï¼Œèˆ†è®ºè®¤ä¸ºâ€˜â€œå¨˜å­å†›â€æŸ”å¼±æ— åŠ›ï¼Œæ²¡æœ‰æ‘†è„±å¤©é¹…çš„å½±å“ï¼Œ äºæ˜¯æ¼”å‘˜ä»¬å¥”èµ´å±±è¥¿ï¼Œæ¥å—éƒ¨é˜Ÿè®­ç»ƒ ä»ä»™å¥³åˆ°çº¢å†›æˆ˜å£«ï¼Œä¸ä»…æ˜¯è§’è‰²çš„è½¬å˜ã€‚è¿™ä¸¤è€…ä»£è¡¨ç€ä¸¤ä¸ªå¯¹ç«‹çš„é˜¶çº§ ä¸ºäº†ç†è§£ã€Šçº¢è‰²å¨˜å­å†›ã€‹å¯¹èŠ­è•¾çš„æ”¹å˜ï¼Œå…ˆå¤ä¹ ä¸€ä¸‹èŠ­è•¾çš„å†å²ï¼š\nã€‹ã€‹ã€‹\nèŠ­è•¾å‡ºç°äºæ–‡è‰ºå¤å…´æ—¶æœŸçš„æ„å¤§åˆ©ï¼Œæœ€æ—©åœ¨å®«å»·å®´ä¼šä¸Šè¿›è¡Œã€‚ æ¯ä¸€æ®µè¡¨æ¼”å¤§è‡´éƒ½ä¸ä¸Šèœè”ç³»åˆ°ä¸€èµ·ã€‚ æ¨¡æ‹Ÿç‹©çŒçš„è¡¨æ¼”ä¹‹åå°±åƒé‡çŒªè‚‰ æµ·æ´‹ã€æ²³æµç¥çµå‡ºåœºåå°±åƒé±¼ è®¸å¤šç¥è¯äººç‰©ä¸ŠåœºçŒ®ä¸Šèœè‚´å’Œæ°´æœ æœ€åå®¢äººä»¬ä¹Ÿå‚ä¸åˆ°ç‹‚æ¬¢çš„è¡¨æ¼”ä¸­ 1661å¹´ï¼Œè·¯æ˜“åå››ä¸‹ä»¤åœ¨å·´é»åˆ›åŠäº†ä¸–ç•Œç¬¬ä¸€æ‰€çš‡å®¶èˆè¹ˆå­¦æ ¡ï¼Œç¡®ç«‹äº†èŠ­è•¾çš„äº”ä¸ªåŸºæœ¬è„šä½å’Œä¸ƒä¸ªæ‰‹ä½ é™¤äº†ä¸“ä¸šè®­ç»ƒï¼Œä»–çš„èˆè¹ˆå­¦æ ¡ä¹Ÿç»å¸¸æ¼”å‡ºã€‚ è«é‡Œå“€æ—¶å¸¸ä¸å­¦æ ¡åˆä½œï¼Œäº§ç”Ÿäº†å–œå‰§èŠ­è•¾å’Œæ‚²å‰§èŠ­è•¾ã€‚ æ¼”å‡ºåœºæ‰€ä»å®«å»·æ‰©å±•åˆ°å‰§åœºã€‚å¥³èˆè¹ˆå®¶ä¹Ÿé€æ¸å‡ºç°ã€‚ ä»åå…­ä¸–çºªäº§ç”ŸèŠ­è•¾å¼€å§‹ï¼ŒèŠ­è•¾çš„é¢˜æå…¨éƒ¨æ¥è‡ªå¸Œè…Šç¥è¯ï¼Œè¿™æ˜¯å› ä¸ºè´µæ—è‡ªæ¯”ä¸ºç¥ï¼Œä¸æ¼”ä¸€èˆ¬æ•…äº‹ã€‚ è·¯æ˜“åå››å°±ç‰¹åˆ«å–œæ¬¢æ¼”é˜¿æ³¢ç½— èŠ­è•¾è„±ç¦»å®«å»·è¿›å…¥ç¤¾ä¼šåï¼Œä»ä¸è¯¥ä»¥å‰ä¼ ç»Ÿ 1832å¹´ï¼Œæµªæ¼«èŠ­è•¾å…´èµ·ï¼ŒèŠ­è•¾è¶‹å‘äºä»¥ä»™å­ã€ç²¾çµä¹‹ç±»çš„è¶…ç°å®äº‹åŠ¡ä¸ºé¢˜æã€‚ åŒæ—¶ï¼Œå¥³èˆè€…ç¬¬ä¸€æ¬¡ç”¨è¶³å°–ç«™ç«‹èµ·èˆ ã€‹ã€‹ã€‹\nã€Šçº¢è‰²å¨˜å­å†›ã€‹å……åˆ†è¿ç”¨äº†é©å‘½å…ƒç´ ï¼Œä¸å¤å…¸èŠ­è•¾å¤§ç›¸å¾„åº­ã€‚ å› ä¸ºèŠ­è•¾çš„å›½é™…æ€§æ¯”äº¬å‰§çš„æ°‘æ—æ€§æ›´å®¹æ˜“ä¸ºå¤–å›½äººæ¥å—ï¼Œã€Šçº¢è‰²å¨˜å­å†›ã€‹æˆä¸ºäº†æ‹›å¾…å¤–å®¾çš„é‡è¦èŠ‚ç›® 1966å¹´ï¼Œã€Šçº¢è‰²å¨˜å­å†›ã€‹æˆä¸ºæ ·æ¿æˆ äº¬å‰§ç°ä»£æˆã€Šæ²™å®¶æµœã€‹ã€ã€Šçº¢ç¯è®°ã€‹ã€ã€Šæ™ºå–å¨è™å±±ã€‹ã€ã€Šæµ·æ¸¯ã€‹ã€ã€Šå¥‡è¢­ç™½è™å›¢ã€‹å’Œç°ä»£èŠ­è•¾èˆå‰§ã€Šçº¢è‰²å¨˜å­å†›ã€‹ã€ã€Šç™½æ¯›å¥³ã€‹ã€äº¤å“ä¹ã€Šæ²™å®¶æµœã€‹ è¦æˆä¸ºæ ·æ¿æˆï¼Œå°±è¦é¢å¯¹å¤§é‡å®¡æŸ¥ã€‚è®¸å¤šè‰ºæœ¯å®¶è¢«è¿«å®³ è¢«è¿«å®³ä¸ºâ€œåé©å‘½â€çš„é€è¿›å¹²æ ¡ï¼Œ å¦ä¸€æ‰¹äººæŠ•å…¥â€œä¸ºå·¥å†œå…µæœåŠ¡â€è¿åŠ¨ ç”±äºé€æˆä¸‹ä¹¡çš„æ¨å¹¿èƒ½åŠ›ä¸å¦‚ç”µå½±ï¼Œ1970å¹´ã€Šçº¢è‰²å¨˜å­å†›ã€‹ç”µå½±æ‹æ‘„ã€‚ ç™½æ·‘æ¹˜å¾—ç½ªäº†æ±Ÿé’ï¼Œå› æ­¤è–›èåä»»å¥³ä¸»è§’ï¼Œå´ç¼èŠ±æ”¹åä¸ºå´æ¸…å æ”¹é©å¼€æ”¾åï¼Œã€Šçº¢è‰²å¨˜å­å†›ã€‹è¿™ç±»é©å‘½é¢˜æçš„æ–‡è‰ºä½œå“å†æ— äººé—®æ´¥äº†ã€‚80å¹´ä»£æœ«è¢«é‡æ–°è®¤è¯†ï¼Œæ‰æ…¢æ…¢åˆçƒ­äº†èµ·æ¥ èŠ­è•¾ï¼Œä¹ƒè‡³èˆè¹ˆæ˜¯ä¸€ä¸ªå¾ˆå®½æ³›çš„è‰ºæœ¯å½¢å¼ï¼Œä»ä¼ ç»Ÿçš„é™è°§é«˜é›…ï¼Œåˆ°ç°ä»£çš„å¯¹å¿ƒçµçš„å©é—®ï¼Œç”šè‡³ã€Šçº¢è‰²å¨˜å­å†›ã€‹é‚£æ ·è¡¨ç°é©å‘½ã€æµè¡€å’Œä»‡æ¨ï¼Œéƒ½åœ¨èŠ­è•¾çš„å½¢å¼ä¹‹ä¸­ã€‚è™½ç„¶æˆ‘ä»¬ä¸€èˆ¬è®¤ä¸ºï¼Œè‰ºæœ¯å°±æ˜¯çº¯æ´ä¸ç¾å¥½ï¼Œä½†è‹¦éš¾å’Œä»‡æ¨ä¹Ÿæ˜¯ä¸–ç•Œçš„ä¸€éƒ¨åˆ†ï¼Œä¹Ÿæ˜¯ä¸å¯æˆ–ç¼ºçš„ä¸€éƒ¨åˆ†ã€‚ç¼ºå°‘äº†æ¨ï¼Œçˆ±ä¹Ÿå°±ç©ºæ´æ— åŠ›ï¼Œè‰ºæœ¯çš„ç”Ÿå‘½åŠ›åœ¨äºäºŒè€…çš„çŸ›ç›¾ã€‚ä¹Ÿè®¸æœ‰äººè®¤ä¸ºã€Šçº¢è‰²å¨˜å­å†›ã€‹å’Œå…¶ä»£è¡¨çš„ä¸€ä¼—é©å‘½å¹´ä»£çš„è‰ºæœ¯ä¸èƒ½ç®—æ˜¯è‰ºæœ¯ï¼Œåªæ˜¯æ”¿æ²»çš„é™„åº¸ï¼Œå¯æ˜¯ä»‡æ¨å’Œé²œè¡€ä¸æ­£æ˜¯é‚£ä¸ªå¹´ä»£çš„å†™ç…§å—ï¼ŸæŠ›å¼€æ”¿æ²»çš„é˜´å½±ï¼Œè¿™äº›ä½œå“éƒ½å€¾æ³¨äº†æ— æ•°åˆ›ä½œè€…çš„å¿ƒè¡€ã€‚å³ä½¿ä»è¡¨æ¼”çš„è§’åº¦çœ‹ï¼Œé‚£è‚¡å®æ‰“å®çš„ç²¾æ°”ç¥å°±æ˜¯æ•´ä¸ªæ—¶ä»£çš„èæ±‡ï¼Œè¿™æ˜¯å¾ˆäº†ä¸èµ·çš„ã€‚\nã€Šç«é¸Ÿã€‹ å…­ã€ä¸ƒåå¹´ä»£ã€‚è¥¿æ–¹èŠ­è•¾èˆç»å†äº†é©å‘½ Roland Petitå’ŒPFä¹é˜Ÿåˆä½œï¼Œåˆ›ä½œäº†ã€ŠPink Floydã€‹ Maurice BÃ©jarté‡æ–°ç¼–æ’äº†ä»–çš„ç¬¬ä¸€éƒ¨ä½œå“ã€Šç«é¸Ÿã€‹ å…«ä¹åå¹´ä»£ï¼Œä¸­å›½èŠ­è•¾èˆé™·å…¥ä½è°· 1986å¹´ï¼Œä¸­å¤®èŠ­è•¾èˆå›¢å‡ºè®¿ç¾å›½ï¼Œè¥¿æ–¹èŠ­è•¾èˆçš„é©å‘½æå¤§åœ°åˆºæ¿€äº†ä¸­å›½èŠ­è•¾èˆç•Œï¼Œäººæ‰å¤§é‡æµå¤±ï¼Œ ä½“åˆ¶æ”¹é©åï¼ŒèŠ­è•¾ä¸æ”¿æ²»ç–ç¦»ï¼ŒèŠ­è•¾ç¼ºå°‘è´¢æ”¿æ”¯æŒï¼Œæ¼”å‡ºå¸‚åœºä¹Ÿæ²¡æœ‰æˆç†Ÿ æµè¡Œæ–‡åŒ–ç››è¡Œï¼Œ é«˜é›…ã€éœ€è¦åˆä½œçš„èŠ­è•¾æ— æ³•é€‚åº”æ–‡åŒ– ä»ã€Šç½—å¯†æ¬§ä¸æœ±ä¸½å¶ã€‹å¼€å§‹ï¼Œä¸­å›½èŠ­è•¾ä¸æ–­å¼•è¿›å¤–å›½å‰§ç›®ï¼Œæƒ…åŠ¿æ¸æ¸å¥½è½¬ 2001å¹´é¦–æ¼”çš„ã€Šå¤§çº¢ç¯ç¬¼é«˜é«˜æŒ‚ã€‹å–ä»£ã€Šçº¢è‰²å¨˜å­å†›ã€‹ï¼Œæˆä¸ºæœ€è‘—åçš„ä¸­å›½èŠ­è•¾èˆå‰§ï¼ˆ ç›¸æ¯”åè€…ï¼Œå‰è€…æ›´æ¸©å’Œ ï¼‰ 2009å¹´ï¼Œ ä¸­å›½çš„BÃ©jart ç‰ˆã€Šç«é¸Ÿã€‹æ¼”å‡ºã€‚ è¿™æ˜¯ç°ä»£èˆè¹ˆçš„å·…å³°ä¹‹ä½œ æ„Ÿè¨€ æ¯ä¸€ä¸ªè¿½å¯»è‰ºæœ¯çš„äººéƒ½æ˜¯ç«é¸Ÿï¼Œæ¯æ¬¡è¦æ”¾å¼ƒçš„æ—¶å€™ï¼Œå°±ä¼šç‚¹ç‡ƒæ–°çš„å¸Œæœ›ï¼Œç›´åˆ°æœ€åä¸€ä¸ªéŸ³ç¬¦åœ¨ç©ºä¸­æ¶ˆå¤±ã€‚ä¸ºäº†å°†è‡ªå·±çš„ç†å¿µä¼ é€’ä¸‹å»è€ŒæŒ¯ç¿…é£ç¿”ã€‚èˆå°ä¸Šï¼Œç«é¸Ÿç–²æƒ«åœ°æ­»å»ï¼Œæ¼†é»‘çš„å¤©å¹•éœ²å‡ºè¡€çº¢çš„ä¸€é“è£‚ç¼ï¼Œæœ€åæ‰©å±•ä¸ºé“ºæ»¡èˆå°çš„å…‰èŠ’ã€‚ æ— æ•°ç«é¸Ÿä»å¤©é™…é£æ¥ï¼Œæ‰€æœ‰çš„äººéƒ½æ„Ÿå—åˆ°äº†å…‰æ˜çš„ç…§è€€ï¼Œè€Œé‚£ç§é‡ç”Ÿçš„æ¸©æš–ä¹Ÿç¬é—´å¼¥æ¼«äº†æ•´ä¸ªå‰§åœºã€‚\nç‰©è´¨ä¸Šçš„å›°çª˜ä¹Ÿå¥½ï¼Œå¿ƒçµä¸Šçš„æ‘§æ®‹ä¹Ÿç½¢ï¼Œç«é¸Ÿä»æ¥ä¸ç•æƒ§è¿™äº›ã€‚ç‡ƒçƒ§å’Œæ¶…æ§ƒï¼Œéƒ½æ˜¯ä¸ºäº†å†…å¿ƒçš„è™”è¯šï¼Œè¿½æ±‚è‡ªå·±å¿ƒä¸­çš„é“è·¯ã€‚\n","permalink":"https://lyk-love.cn/Hugo-Blog/posts/%E7%81%AB%E9%B8%9F/","posts_num":12,"tags":["Reading"],"title":"ç«é¸Ÿ"},{"categories":null,"contents":"Outline\nHexo, Next, Markdown\né‡Œé¢æœ‰å‡ ä¹å…¨éƒ¨çš„ä¸»é¢˜é…ç½®æ•™ç¨‹\nIntro Hexoç‰ˆæœ¬: 6.2.0\nNextç‰ˆæœ¬: 8.12.3\nHexoå®˜ç½‘ NeXt Tutor, é‡Œé¢æœ‰å‡ ä¹å…¨éƒ¨çš„ä¸»é¢˜é…ç½®æ•™ç¨‹ æœ€æ–°ç‰ˆ(v8)NeXt Githubä»“åº“ Next Official Blog Awesome NexT : æœ‰å¾ˆå¤šåˆ«äººçš„Nextåšå®¢, éå¸¸å€¼å¾—å€Ÿé‰´ æœ¬æ–‡æ¡£å‚è€ƒäº†:\næ¯”è¾ƒå…¨çš„Hexo + Nextæ­å»ºæ•™ç¨‹, å…¶ä¸­æœ‰äº›å†…å®¹æœ‰ç‚¹è€äº† Hexoæ˜¯æµè¡Œçš„é™æ€åšå®¢æ¡†æ¶, åŒç±»çš„è¿˜æœ‰Hugoå’ŒJekyl. Hexoçš„ä¼˜ç‚¹æ˜¯, å®ƒçš„Nextä¸»é¢˜æ¯”è¾ƒå¥½çœ‹. æœ¬æ–‡ä»‹ç»Hexo + Nextçš„é…ç½®.\nä¸»é¢˜æ–‡ä»¶éƒ½å­˜æ”¾åœ¨\u0026lt;hexo-dir\u0026gt;/themes/, ä¾‹å¦‚Nextä¸»é¢˜å°±ä½äº\u0026lt;hexo-dir\u0026gt;/themes/next/_config.yml. ä½†æ˜¯, ç”±äºä¸‹é¢è®²çš„å¤šä¸»æœºåŒæ­¥çš„åŸå› , å®é™…èµ·ä½œç”¨çš„ä¸»é¢˜é…ç½®æ–‡ä»¶æ˜¯\u0026lt;hexo\u0026gt;/_cofig.next.yml\nHexoçš„é…ç½®æ–‡ä»¶ä½äºHexoç›®å½•çš„_config.yml\nNextçš„é…ç½®ç›®å½•ä½äº\u0026lt;hexo\u0026gt;/_cofig.next.yml.\nåœ¨ä¸»é¢˜é…ç½®ä¸­, é™¤éç‰¹æ®Šè¯´æ˜, ç¼–è¾‘éƒ½æ˜¯ä¸»é¢˜é…ç½®æ–‡ä»¶. åŒç†, å¯¹äºHexoçš„é…ç½®, é™¤éç‰¹æ®Šè¯´æ˜, ç¼–è¾‘çš„éƒ½æ˜¯Hexoé…ç½®æ–‡ä»¶\nHexo Commands å‘½ä»¤ æè¿° hexo init [folder] åˆå§‹åŒ–ç½‘ç«™ hexo new [layout] æ–°å»ºæ–‡ç« , é»˜è®¤æ˜¯â€œpostâ€, æˆ‘é€šè¿‡default_layout: draftè®¾ç½®ä¸ºæ–°å»ºåˆ°â€œdraftâ€ hexo publish [layout] å‘å¸ƒè‰ç¨¿ hexo g[enerate] ç”Ÿæˆé™æ€æ–‡ä»¶. hexo s[erver] å¯åŠ¨æœ¬åœ°æœåŠ¡å™¨. æœåŠ¡å™¨ä¼šç›‘å¬æ–‡ä»¶å˜åŒ–å¹¶è‡ªåŠ¨æ›´æ–° hexo d[eploy] åœ¨å®‰è£…äº†deploy git æ’ä»¶å, å¯ä»¥ç”Ÿæˆæœ¬åœ°æ–‡ä»¶å¹¶è¿œç¨‹éƒ¨ç½²åˆ°GitPage. å†ä¹Ÿä¸ç”¨hexo d -gäº† hexo clean æ¸…ç†æ•°æ®åº“å’Œé™æ€æ–‡ä»¶ hexo list åˆ—å‡ºç«™ç‚¹ä¿¡æ¯ hexo version ç‰ˆæœ¬ä¿¡æ¯ hexo d -g ç”Ÿæˆå¹¶éƒ¨ç½² Hexoæ­å»º å®‰è£… Hexo:\nnpm install -g hexo-cli åœ¨æœ¬åœ°æŒ‡å®šæ–‡ä»¶å¤¹ \u0026lt;folder\u0026gt; ä¸­å»ºç«‹é¡¹ç›®:\nhexo init \u0026lt;folder\u0026gt; cd \u0026lt;folder\u0026gt; npm install æ–°å»ºå®Œæˆåï¼ŒæŒ‡å®šæ–‡ä»¶å¤¹ \u0026lt;folder\u0026gt; çš„ç›®å½•å¦‚ä¸‹ï¼š\n. â”œâ”€â”€ _config.yml â”œâ”€â”€ package.json â”œâ”€â”€ scaffolds â”œâ”€â”€ source | â”œâ”€â”€ _drafts | â””â”€â”€ _posts â””â”€â”€ themes æ–‡ä»¶/æ–‡ä»¶å¤¹ ä½œç”¨ _config.yml ç½‘ç«™çš„é…ç½®æ–‡ä»¶ package.json åº”ç”¨ç¨‹åºçš„ä¿¡æ¯ scaffolds æ¨¡ç‰ˆæ–‡ä»¶å¤¹ã€‚å½“æ‚¨æ–°å»ºæ–‡ç« æ—¶ï¼ŒHexo ä¼šæ ¹æ® scaffold æ¥å»ºç«‹æ–‡ä»¶ source èµ„æºæ–‡ä»¶å¤¹æ˜¯å­˜æ”¾ç”¨æˆ·èµ„æºçš„åœ°æ–¹ã€‚é™¤ posts æ–‡ä»¶å¤¹ä¹‹å¤–ï¼Œå¼€å¤´å‘½åä¸º (ä¸‹åˆ’çº¿)çš„æ–‡ä»¶ / æ–‡ä»¶å¤¹å’Œéšè—çš„æ–‡ä»¶å°†ä¼šè¢«å¿½ç•¥ã€‚Markdown å’Œ HTML æ–‡ä»¶ä¼šè¢«è§£æå¹¶æ”¾åˆ° public æ–‡ä»¶å¤¹ï¼Œè€Œå…¶ä»–æ–‡ä»¶ä¼šè¢«æ‹·è´è¿‡å» themes ä¸»é¢˜æ–‡ä»¶å¤¹ã€‚Hexo ä¼šæ ¹æ®ä¸»é¢˜æ¥ç”Ÿæˆé™æ€é¡µé¢ å®‰è£…ä¸»é¢˜, è§ä¸‹æ–‡\néƒ¨ç½²åˆ°GitPage GitPage å…è®¸ä½ å°†ä½ çš„åšå®¢åˆ›å»ºä¸ºä¸€ä¸ª GitHub Projectï¼Œé€šè¿‡ your-account.github.io è¿™æ ·çš„ç‰¹æ®Šé¡¹ç›®åç§°ä¸ GitPage è¿›è¡Œå…³è”ï¼Œç„¶åï¼Œä½ åªéœ€è¦åƒå¹³æ—¶ä¸€æ · commit ä½ çš„åšæ–‡åˆ° GitHub ä¸Šå°± OK äº†ï¼ŒGitPage ä¼šè‡ªåŠ¨å°†ä½ çš„æ›´æ–°éƒ¨ç½²å‡ºå».\næ³¨æ„, ç§æœ‰ä»“åº“çš„Gitpagesä¹Ÿæ˜¯å¯ä»¥å…¬å…±è®¿é—®çš„, æ‰€ä»¥åƒä¸‡ä¸è¦æŠŠå«æœ‰æ•æ„Ÿä¿¡æ¯çš„ç§æœ‰ä»“åº“ä½œä¸ºGitPages\nå®‰è£… deploy git æ’ä»¶å®ç°ä¸€é”®è‡ªåŠ¨éƒ¨ç½²:\nnpm install hexo-deployer-git --save åœ¨ GitHub åˆ›å»ºä¸€ä¸ªåä¸º\u0026lt;username\u0026gt;.github.io.gitçš„ä»“åº“ã€‚\nåœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶_config.ymlä¸­ä¿®æ”¹ä»“åº“åœ°å€, æ³¨æ„, ä¸ºäº†åæ–‡è¯´çš„å¤šä¸»æœºåŒæ­¥. æˆ‘çš„ä»“åº“æœ‰ä¸¤ä¸ªåˆ†æ”¯. masterç”¨äºå­˜æ”¾ç”Ÿæˆçš„ç½‘é¡µæ–‡ä»¶, hexoå­˜æ”¾æºæ–‡ä»¶. éƒ¨ç½²å½“ç„¶æ˜¯pushç½‘é¡µæ–‡ä»¶, ä¹Ÿå°±æ˜¯masteråˆ†æ”¯:\ndeploy: type: git repo: github: git@github.com:LYK-love/LYK-love.github.io.git branch: master GitPageå¯ä»¥å…³è”åˆ°é¡¹ç›®çš„ä»»æ„åˆ†æ”¯, æˆ‘ä»¬è¦åˆ°ä»“åº“çš„Settings -\u0026gt; Code and automation -\u0026gt; Pagesé‡Œ, æŠŠPageså…³è”åˆ°masteråˆ†æ”¯. è¿™æ ·æˆ‘ä»¬éƒ¨ç½²åˆ°masterçš„ç½‘é¡µæ–‡ä»¶å°±å¯ä»¥åŒæ­¥åˆ°Pagesä¸Š.\næ‰§è¡Œhexo då³å¯éƒ¨ç½²åˆ° GitHub ä»“åº“ã€‚\næ–°å¢æˆ–ä¿®æ”¹ä¸»é¢˜é…ç½®åéƒ¨ç½²æ—¶è¯·æ‰§è¡Œ hexo clean \u0026amp;\u0026amp; hexo d\næ³¨ï¼šè¿™é‡Œä½¿ç”¨ ssh åè®®è€Œé httpï¼Œæ‰€ä»¥è¯·å…ˆç¡®ä¿æ‚¨å·²ç»åœ¨ GitHub æ·»åŠ äº†å…¬é’¥.\nè‡ªå®šä¹‰åŸŸå é¦–å…ˆä½ éœ€è¦å»åŸŸåæ³¨å†Œå•†ï¼ˆé˜¿é‡Œäº‘è…¾è®¯äº‘ç­‰ï¼‰ä¹°ä¸€ä¸ªåŸŸå åœ¨æ ¹ç«™ç‚¹ä¸‹sourceç›®å½•ä¸­æ·»åŠ CNAMEæ–‡ä»¶ï¼Œæ–‡ä»¶å†…å®¹ä¸ºæ‚¨è´­ä¹°çš„åŸŸåxxx.comï¼Œä¸è¦æ·»åŠ wwwã€mailç­‰å­åŸŸä¾‹å¦‚www.xxx.comæˆ–mail.xxx.com å‰å¾€åŸŸåæ§åˆ¶å°è§£ææ­¤åŸŸååˆ°github.ioï¼Œæ ¹æ® gitpage çš„è‡ªå®šä¹‰åŸŸåè¦æ±‚ï¼Œä»–ä»¬å»ºè®®è§£æåˆ°github.ioçš„æ•°å­— ip åœ°å€ï¼Œå³151.101.129.147 åœ¨æ§åˆ¶å°è®¾ç½®åŸŸåè§£æï¼Œæ·»åŠ  A è®°å½•æŒ‡å‘ 151.101.129.147 å³å¯ å‘½ä»¤è¡Œæ‰§è¡Œhexo då‘å¸ƒç«™ç‚¹åˆ° GitHub åº“ï¼Œè¿™æ—¶åœ¨ Git åº“åº”è¯¥å°±èƒ½çœ‹åˆ° CNAME æ–‡ä»¶ï¼Œè‡³æ­¤è‡ªå®šä¹‰åŸŸåè®¾ç½®å®Œæ¯•ï¼Œç°åœ¨ä½¿ç”¨xxx.comå³å¯è®¿é—®ç«™ç‚¹ å†™ä½œ é»˜è®¤æ–°å»ºæ–‡ç« éƒ½æ˜¯posts, æ”¹æˆæ–°å»ºä¸ºdrafts:\ndefault_layout: draft è¿™æ ·hexo newæ–°å»ºçš„å°±éƒ½æ˜¯è‰ç¨¿äº†\næ–‡ç« èƒ½ä¼šæœ‰å¤šä¸ªç±»åˆ«, åˆ†ç±»å…·æœ‰é¡ºåºæ€§å’Œå±‚æ¬¡æ€§, æœ‰3ç§ä¸åŒçš„ç¼–å†™æ–¹å¼\n# ç¬¬ä¸€ç§ categories: - Java - Servlet # ç¬¬äºŒç§ categories: [Java, Servlet] # ç¬¬ä¸‰ç§ categories: -[Java] -[Servlet] å‰ä¸€ã€äºŒç§ä¹¦å†™æ–¹å¼çš„ä½œç”¨ä¸€è‡´ï¼Œè¡¨ç¤ºè¯¥æ–‡ç« åˆ†ç±»äºJava/Servletä¸‹ï¼Œèµ·åˆ°äº†å­åˆ†ç±»çš„ä½œç”¨\nç¬¬ä¸‰ç§ä¹¦å†™æ–¹å¼èµ·åˆ°äº†å¤šåˆ†ç±»çš„ä½œç”¨ï¼Œè¡¨ç¤ºè¯¥æ–‡ç« åˆ†ç±»äºJavaå’ŒServletä¸‹\næ ‡ç­¾æ²¡æœ‰å±‚æ¬¡æ€§:\ncategories: - Diary tags: - PS3 - Games Configuring Author Edit Hexo config file and set the value of author to your nickname.\nHexo config file # Site author: Configuring Description Edit Hexo config file and set the value of description to your description, which can be a sentence you like.\nHexo config file # Site description: Enabling Theme Like all Hexo themes, after you download it, open Hexo config file, find theme option, and change its value to next (or another theme directory name).\nEdit Hexo config file:\ntheme: next Now you have installed NexT theme and enabled it. The following steps will help you verify whether NexT is enabled correctly.\nNeXté…ç½® è¿›é˜¶é…ç½®\nSchemes: ç›®å‰è§‰å¾—Mistæ¯”è¾ƒå¥½çœ‹\n# Schemes # scheme: Muse scheme: Mist # scheme: Pisces # scheme: Gemini è®¾ç½®è¯­è¨€: æˆ‘ä½¿ç”¨é»˜è®¤çš„è‹±è¯­. å¦‚æœè¦ä½¿ç”¨æ±‰è¯­, å¯ä»¥ç¼–è¾‘ä¸»é¢˜é…ç½®æ–‡ä»¶:\nlanguage: zh-CN é¦–é¡µæ–‡ç« æ˜¾ç¤ºæ‘˜è¦: åœ¨æ–‡ç« ä¸­é€‚å½“ä½ç½®æ’å…¥ \u0026lt;!--more--\u0026gt;ï¼Œè¯¥ä½ç½®ä¹‹å‰çš„éƒ¨åˆ†å³ä¸ºæ‘˜è¦ï¼Œä¼šæ˜¾ç¤ºåœ¨é¦–é¡µä¸­.\nsidebarç¤¾äº¤é“¾æ¥: é‚®ç®±å‰è¦åŠ mailto:, è¿™è¿˜æ˜¯æˆ‘ç”¨å¼€å‘è€…å·¥å…·æŸ¥åˆ«äººçš„ç½‘ç«™å‘ç°çš„..( å…¶å®mailtoæ˜¯htmlä¸­å‘é€emailçš„ä»£ç  )\nsocial: GitHub: https://github.com/LYK-love || fab fa-github E-Mail: mailto:191820133@smail.nju.edu.cn || fa fa-envelope sidebarç¤¾äº¤é“¾æ¥çš„å›¾æ¡ˆ:\nsocial_icons: enable: true icons_only: false transition: false æ·»åŠ å»ºç«™æ—¶é—´, ä¸åŠ çš„è¯å°±ä¼šæ˜¾ç¤ºå½“å‰å¹´ä»½:\nfooter: # Specify the date when the site was setup. If not defined, current year will be used. since: 2021 å…³æ‰é—ªçƒ:\nquicklink: enable: false Toc: Table of Contents in the Sidebar. ä¸»è¦æ˜¯sidebaré‡Œé¢çš„æ ‡é¢˜è¦ä¸è¦è‡ªåŠ¨è¿›è¡Œæ•°å­—ç¼–å·. é»˜è®¤ä¸ºtrue. æˆ‘ä¸å–œæ¬¢ç¼–å·ï¼š\ntoc: enable: true # Automatically add list number to toc. number: false Configuring Favicon By default the Hexo site use NexT favicons in [hexo-site]/themes/next/source/images/ directory with different size for different device. You can replace them with your own favicons.\nä½†æ˜¯, å¦‚æœä½¿ç”¨npmå®‰è£…Next, åˆ™ä¸»é¢˜æ–‡ä»¶å¤¹æ˜¯[hexo-site]/node_modules/hexo-theme-next, æ— æ³•è¿›è¡Œç‰ˆæœ¬ç®¡ç†.\nå› æ­¤, Hexoä¹Ÿæ”¯æŒå°†å›¾ç‰‡æ”¾åœ¨[hexo-site]/source/images/. æˆ‘ä¹Ÿå¼ºçƒˆæ¨èè¿™ä¹ˆåš, è¿™æ ·å°±å¯ä»¥è¿›è¡Œç‰ˆæœ¬ç®¡ç†äº†:\nå…ˆæ‰‹åŠ¨åˆ›å»ºæ–‡ä»¶å¤¹:\ncd [hexo-site]/source mkdir images åç»­åœ¨Nexté…ç½®æ–‡ä»¶ä¸­ä½¿ç”¨imagesè·¯å¾„æ¥æ‰¾åˆ°å›¾ç‰‡:\nç”±äºthemes/next/source/images/å’Œsource/images/éƒ½å¯ä»¥æ”¾å›¾ç‰‡, è¯¥æ“ä½œå®é™…ä¸Šä¼šæ‰«æè¿™ä¸¤ä¸ªæ–‡ä»¶å¤¹ mkdir images è®¾ç½®ç«™ç‚¹å›¾æ ‡:\nfavicon: # small: /images/favicon-16x16-next.png small: /images/white_flower1.jpg # medium: /images/favicon-32x32-next.png medium: /images/white_flower1.jpg # apple_touch_icon: /images/apple-touch-icon-next.png apple_touch_icon: /images/white_flower1.jpg è®¾ç½®èœå•: çœŸä¸çŸ¥é“abouté¡µé¢æœ‰å•¥ç”¨\nmenu: home: / || home # about: /about/ || user tags: /tags/ || tags categories: /categories.md/ || th archives: /archives/ || archive #schedule: /schedule/ || calendar #sitemap: /sitemap.xml || sitemap #commonweal: /404/ || heartbeat # Enable / Disable menu icons / item badges. menu_settings: icons: true badges: false è®¾ç½®sidebar avatar, å¹¶ä¸”è®©å›¾ç‰‡åœ†å½¢æ˜¾ç¤º\n# Sidebar Avatar avatar: # Replace the default image and set the url here. url: /images/white_flower1.jpg # If true, the avatar will be displayed in circle. # åœ†å½¢æ˜¾ç¤º rounded: true # If true, the avatar will be rotated with the cursor. rotated: false å¤´åƒå¿…é¡»å­˜æ”¾åœ¨\u0026lt;next\u0026gt;/themes/source/images/\næœç´¢æœåŠ¡ ä½¿ç”¨æœ¬åœ°æœç´¢ï¼ŒæŒ‰ä»¥ä¸‹æ­¥éª¤é…ç½®ï¼š\nå®‰è£… hexo-generator-searchdb æ’ä»¶ï¼šåŠ äº†è¿™ä¸ªä¹‹å,åšå®¢ç”Ÿæˆæ—¶é—´è¦æ…¢å¥½å‡ ç§’, ä¸è¿‡ä¹Ÿæ˜¯å€¼å¾—çš„\nnpm install hexo-generator-searchdb --save ç¼–è¾‘Hexoé…ç½®æ–‡ä»¶ _config.ymlï¼š\nsearch: path: search.xml field: post format: html limit: 10000 ç¼–è¾‘Nexté…ç½®æ–‡ä»¶ï¼š\n# Local search local_search: enable: true ç™¾åº¦ç»Ÿè®¡ ä¹Ÿå¯ä»¥æ·»åŠ Googleç»Ÿè®¡, éƒ½å·®ä¸å¤š\nå¼€é€šç™¾åº¦ç»Ÿè®¡å¸å·: åœ¨ ç™¾åº¦ç»Ÿè®¡ æ³¨å†Œå¸å·. å¸å·æ³¨å†ŒæˆåŠŸåï¼Œåœ¨ä¾§è¾¹æ è´¦æˆ·ç®¡ç† -\u0026gt; ç½‘ç«™åˆ—è¡¨ï¼Œç‚¹å‡»å³ä¾§æ–°å¢ç½‘ç«™æŒ‰é’®\næ·»åŠ ç½‘ç«™åŸŸå/ç½‘ç«™é¦–é¡µä¿¡æ¯åï¼Œç‚¹å‡»ç¡®å®šæŒ‰é’®ï¼Œç™¾åº¦ç»Ÿè®¡ä¼šæä¾›ä¸€æ®µJSè„šæœ¬ç”¨äºåµŒå…¥\n\u0026lt;script\u0026gt; var _hmt = _hmt || []; (function() { var hm = document.createElement(\u0026#34;script\u0026#34;); hm.src = \u0026#34;https://hm.baidu.com/hm.js?\u0026lt;app-id\u0026gt;\u0026#34;; var s = document.getElementsByTagName(\u0026#34;script\u0026#34;)[0]; s.parentNode.insertBefore(hm, s); })(); \u0026lt;/script\u0026gt; ç²˜è´´ä¸Šé¢ä»£ç ä¸­çš„`, å¤åˆ¶åˆ°ä¸»é¢˜é…ç½®æ–‡ä»¶:\nbaidu_analytics: \u0026lt;app-id\u0026gt; Nextä¸»é¢˜å·²å¯¹ç™¾åº¦ç»Ÿè®¡è¿›è¡Œé…ç½®ä¼˜åŒ–ï¼Œå› æ­¤åªéœ€è¦ç¼–è¾‘é…ç½®æ–‡ä»¶, å¡«å†™app-id. å¯¹äºæ›´ä¸€èˆ¬çš„æƒ…å†µ, éœ€è¦æŠŠä¸Šé¢çš„JSä»£ç æ·»åŠ åˆ°ç½‘ç«™å…¨éƒ¨é¡µé¢çš„ \u0026lt;/head\u0026gt; æ ‡ç­¾å‰. å¦‚æœä»£ç å®‰è£…æ­£ç¡®ï¼Œä¸€èˆ¬20åˆ†é’Ÿåï¼Œå¯ä»¥æŸ¥çœ‹ç½‘ç«™åˆ†ææ•°æ®.\nMath Nextæ•°å­¦å…¬å¼æ”¯æŒå®˜æ–¹æ–‡æ¡£\nNext Mathjaxé«˜çº§ç‰¹æ€§\nç›®å‰çš„Latexæ¸²æŸ“å¼•æ“æœ‰ MathJax å’Œ Katex, MathJaxå®Œç¾æ”¯æŒLatex, Katexé€Ÿåº¦æ›´å¿«, ä½†æ˜¯æœ‰äº›è¯­æ³•ä¸æ”¯æŒ. ç»¼åˆæ¥çœ‹è¿˜æ˜¯é€‰æ‹©Mathjax.\nNexTé»˜è®¤ä½¿ç”¨çš„markdownæ¸²æŸ“å¼•æ“æ˜¯hexo-renderer-marked, å®ƒä¸æ”¯æŒMathjaxï¼Œä¸æ”¯æŒæ’ä»¶æ‰©å±•ï¼Œä¸æ”¯æŒemojiè¡¨æƒ…, å› æ­¤æˆ‘ä»¬éœ€è¦å¸è½½å®ƒ, å¹¶æ›¿æ¢ä¸ºåˆ«çš„å¼•æ“.\næ³¨æ„, ä¸åŒçš„æ¸²æŸ“å¼•æ“æ˜¯ä¸èƒ½å…±å­˜çš„( hexo-filter-mathjaxé™¤å¤–, å®ƒæ˜¯serverç«¯çš„æ¸²æŸ“å¼•æ“ ), å› æ­¤åœ¨ä½¿ç”¨ä¸€ä¸ªæ¸²æŸ“å¼•æ“ä¹‹å‰, éœ€è¦å¸è½½æ‰å…¶ä»–å…¨éƒ¨çš„æ¸²æŸ“å¼•æ“/\nEngines Nextæ”¯æŒçš„æ¸²æŸ“å¼•æ“:\nMathjax If you use MathJax to render Math Equations, you can choose one of the Markdown renderers below:\nhexo-renderer-pandoc æ”¯æŒMathjaxè¯­æ³•, ä¸ä»…å¯ä»¥æ¸²æŸ“markdown, è¿˜æ”¯æŒtextile, reStructedTextå’Œè®¸å¤šå…¶ä»–æ ¼å¼, ä»ç„¶ä¸æ”¯æŒemojiè¡¨æƒ… å†…å»ºçš„æ±‡æ€»æ–‡ä»¶db.jsonå°†æ¥å¯èƒ½ä¼šéå¸¸å¤§, åŒæ­¥åˆ° Github å¯èƒ½ä¼šæ¯”è¾ƒæ…¢, åšå®¢å†…å»ºçš„æœç´¢åŠŸèƒ½ä¹Ÿå¯èƒ½ä¼šå˜å¾—éå¸¸æ…¢. äº²æµ‹, åšå®¢ç”Ÿæˆå’Œåšå®¢çš„æœç´¢åŠŸèƒ½éƒ½æ…¢å¾—ç¦»è°±, è€Œä¸”å®ƒå’ŒNextçš„é›†æˆæœ‰é—®é¢˜, æ— æ³•æ­£ç¡®æŠŠç”Ÿæˆçš„HTMLæ–‡ä»¶çš„æ ‡é¢˜åŠ å…¥Anchor. hexo-renderer-kramed: åŸºäºhexo-renderer-markedäºŒæ¬¡å¼€å‘çš„æ¸²æŸ“å™¨ï¼Œå®Œå–„äº†å¯¹Mathjaxçš„æ”¯æŒ, ä»ç„¶ä¸æ”¯æŒæ’ä»¶çš„æ‰©å±•ï¼Œä¸æ”¯æŒemojiè¡¨æƒ…. äº²æµ‹å®ƒæ¯”hexo-renderer-pandocå¿«ä¸€ç‚¹. ä½†æ˜¯æœ‰bug, éœ€è¦è‡ªå·±é…ç½®. ç”±äºå®ƒå¤ªè€äº†,å°±ä¸æ¨èäº†. hexo-renderer-markdown-itï¼šæ”¯æŒMathJax, å¹¶å¯ä»¥é€šè¿‡æ’ä»¶æ”¯æŒKeTex. æ”¯æŒMarkdownä»¥åŠCommonMarkè¯­æ³•. æ”¯æŒæ’ä»¶é…ç½®, æ”¯æŒæ ‡é¢˜å¸¦å®‰å…¨çš„idä¿¡æ¯ æ”¯æŒè„šæ³¨ï¼ˆä¸Šæ ‡, ä¸‹æ ‡, ä¸‹åˆ’çº¿ï¼‰ æˆ‘æœ€åé€‰æ‹©hexo-renderer-markdown-it hexo-renderer-markdown-it-plus: æ”¯æŒKatexæ’ä»¶å¹¶é»˜è®¤å¯ç”¨ hexo-filter-mathjax: Server side MathJax Renderer Plugin for Hexo. è¦ä½¿ç”¨å®ƒ,éœ€è¦å¸è½½æ‰é™¤hexo-renderer-marked ( ç”¨äºæ¸²æŸ“markdown )ä¹‹å¤–çš„LaTexå¼•æ“. å®ƒçš„ç¼ºç‚¹æ˜¯æœ‰äº›è¯­æ³•ä¸æ”¯æŒ, è€Œä¸”æ— æ³•æ¸²æŸ“ç›®å½•é‡Œçš„LaTex. KaTex If you use KaTeX to render Math Equations, you can choose one of the Markdown renderers below:\nhexo-renderer-markdown-it-plus: æ²¡ç”¨è¿‡ hexo-renderer-markdown-it: äº²æµ‹å®ƒä¹Ÿæ”¯æŒMathjax, å¹¶æ”¯æŒHexoæ”¯æŒçš„Mathjaxç‰¹æ€§ æ”¯æŒMathJax æ”¯æŒLatexæ­¥éª¤:\nå¸è½½hexo-renderer-marked, å®‰è£…hexo-renderer-pandoc hexo-renderer-markdown-it:\nnpm un hexo-renderer-marked # npm i hexo-renderer-pandoc --save æœ‰é—®é¢˜, åºŸå¼ƒ npm i hexo-renderer-markdown-it --save å¦‚æœé€‰æ‹©hexo-renderer-pandoc , è¿˜éœ€è¦é¢å¤–å®‰è£…pandoc\nfor Mac:\nbrew install pandoc å¼€å¯mathjax:\nmath: # Default (false) will load mathjax / katex script on demand. # That is it only render those page which has `mathjax: true` in front-matter. # If you set it to true, it will load mathjax / katex script EVERY PAGE. every_page: false mathjax: enable: true # Available values: none | ams | all tags: ams # ams: å¼€å¯å…¬å¼è‡ªåŠ¨ç¼–å· per_page: è®¾ç½®ä¸ºfalse, è¿™æ ·åªä¼šæ¸²æŸ“æ·»åŠ äº†mathjax: trueçš„æ–‡ç«  åœ¨ä½ç‰ˆæœ¬çš„NeXt,è¿™å¥è¯ä¸Šé¢çš„æ³¨é‡Šæ˜¯åçš„, å³â€œfalseâ€åªä¼šæ¸²æŸ“æŒ‡å®šæ–‡ç« . åœ¨éœ€è¦æ¸²æŸ“Latexçš„æ–‡ç« çš„Front-matteré‡Œæ‰“å¼€mathjaxå¼€å…³ï¼Œå¦‚ä¸‹ï¼š\n--- title: index.html date: 2016-12-28 21:01:30 tags: mathjax: true -- Configuring hexo-renderer-markdown-it hexo-renderer-markdown-itçš„é»˜è®¤é…ç½®æ˜¯æ— æ³•æ­£ç¡®ç»™æ ‡é¢˜æ·»åŠ anchorçš„, éœ€è¦åšä¸€äº›ä¿®æ”¹, å¹¶å°†é…ç½®æ·»åŠ åˆ°Hexoä¸­.\nç¼–è¾‘Hexoé…ç½®æ–‡ä»¶ _config.yml, æ’å…¥ä»¥ä¸‹å†…å®¹:\n# Config of hexo-renderer-markdown-it markdown: preset: \u0026#39;default\u0026#39; # æ¸²æŸ“å™¨é»˜è®¤é¢„è®¾ # \u0026#34;commonmark\u0026#34;: ä½¿ç”¨ä¸¥æ ¼ CommandMark è§„å®š. # \u0026#34;default\u0026#34;: é»˜è®¤é…ç½®, ç±»ä¼¼äº GFM # \u0026#34;zero\u0026#34;: ç¦ç”¨æ‰€æœ‰é¢„è®¾. render: html: true xhtmlOut: false # å°† HTML å†…å®¹æ¸²æŸ“ä¸º XHTML çš„å½¢å¼ (XHTML è¯­æ³•éå¸¸ä¸¥æ ¼, æ¯”å¦‚åŸ HTML ä¸­çš„ \u0026lt;br\u0026gt; æ ‡ç­¾å¿…é¡»è¦ä½¿ç”¨ \u0026lt;br/\u0026gt; è¿™æ ·çš„å½¢å¼è¿›è¡Œ \u0026#34;è‡ªé—­å’Œ\u0026#34;) å¯èƒ½ä¼šå‡ºç°å…¼å®¹æ€§é—®é¢˜. langPrefix: \u0026#39;language-\u0026#39; breaks: true # true åˆ™å°†æ‰€æœ‰æ¢è¡Œæ¸²æŸ“ä¸º \u0026lt;br\u0026gt; æ ‡ç­¾ # è¿™ç§è¡Œä¸ºä¸å±äº CommandMark å’Œ GFM. linkify: true # true åˆ™è‡ªåŠ¨è§£æé“¾æ¥å¹¶æ·»åŠ ä¸º \u0026lt;a\u0026gt; æ ‡ç­¾, false åˆ™å°†é“¾æ¥æ¸²æŸ“ä¸ºæ–‡æœ¬. typographer: false # é»˜è®¤ true # è‡ªåŠ¨è½¬ä¹‰å„ç§æ’ç‰ˆç”¨å­—ç¬¦, å¦‚ Â©. è¿™ç”šè‡³ä¼šè½¬ä¹‰æ‰LaTexä¸­çš„å­—ç¬¦, æ‰€ä»¥ä¸èƒ½å¼€å¯ quotes: \u0026#39;â€œâ€â€˜â€™\u0026#39; # å½“ typographer å®šä¹‰ä¸º true æ—¶çš„è‡ªåŠ¨è½¬æ¢å¼•å·çš„è¡Œä¸º, quotes: \u0026#39;â€œâ€â€˜â€™\u0026#39; åˆ™è¡¨ç¤ºå°† \u0026#34;123\u0026#34; \u0026#39;123\u0026#39;è½¬æ¢ä¸º â€œ123â€ â€˜123â€™ enable_rules: disable_rules: plugins: anchors: level: 1 # å¼€å§‹åˆ›å»ºé”šç‚¹çš„ç­‰çº§, é»˜è®¤ä¸º2,è¡¨ç¤ºä» H2 å¼€å§‹åˆ›å»ºä¸€ç›´åˆ° H6(æœ€å). collisionSuffix: \u0026#39;\u0026#39; # å¦‚æœé‡åˆ°é‡å¤çš„é”šç‚¹ ID ä¸ºå…¶æ·»åŠ æ•°å­—ç¼–å·æ—¶åœ¨è¿™ä¸ªæ•°å­—åæ·»åŠ çš„åç¼€. permalink: true # é»˜è®¤ä¸ºfalse, éœ€è¦æ›´æ”¹ä¸ºtrue, æ¥åˆ›å»ºä¸€ä¸ªé™¤æ ‡é¢˜å¤–å¸¦æœ‰å›ºå®šåœ°å€çš„çš„é”šç‚¹æ ‡ç­¾. permalinkClass: \u0026#39;header-anchor\u0026#39; permalinkSide: \u0026#39;left\u0026#39; # è®¾å®šä¸º right åˆ™ä¼šåœ¨æ ‡é¢˜åæ·»åŠ å›ºå®šé“¾æ¥. permalinkSymbol: \u0026#39;\u0026#39; # æ›´æ”¹ä¸ºç©ºå­—ç¬¦ä¸² case: 0 # è½¬æ¢é”šç‚¹ ID ä¸­çš„å­—æ¯ä¸ºå¤§å†™æˆ–å°å†™ # \u0026#34;0\u0026#34; ä¸è½¬æ¢, \u0026#34;1\u0026#34; ä¸ºå°å†™, \u0026#34;2\u0026#34; ä¸ºå¤§å†™. â€œä¸è½¬æ¢â€æ˜¯ä¸ºäº†æ–¹ä¾¿æ‰‹å†™Anchor separator: \u0026#39;-\u0026#39; # ç”¨äºæ›¿æ¢ç©ºæ ¼çš„ç¬¦å·. # é»˜è®¤ä¸º \u0026#34;-\u0026#34; # images: # lazyload: false # prepend_root: false # post_asset: false å½“ç„¶ä½ ä¹Ÿå¯ä»¥ç›´æ¥æ›´æ”¹ä¾èµ–çš„ä»£ç , ä½†æ˜¯è¿™æ ·åšæ— æ³•è¿›è¡Œç‰ˆæœ¬ç®¡ç†, æ‰€ä»¥ä¸æ¨è:\nè¿›å…¥åŒ…ç›®å½•:\ncd [hexo-site]/node_modules/hexo-renderer-markdown-it ç¼–è¾‘index.js:\nhexo.config.markdown.anchors = Object.assign({ level: 2, collisionSuffix: \u0026#39;\u0026#39;, permalink: true, //æ›´æ”¹ä¸ºtrue permalinkClass: \u0026#39;header-anchor\u0026#39;, permalinkSide: \u0026#39;left\u0026#39;, permalinkSymbol: \u0026#39;\u0026#39;, //æ›´æ”¹ä¸ºç©ºå­—ç¬¦ä¸² case: 0, separator: \u0026#39;-\u0026#39; }, hexo.config.markdown.anchors); å…¬å¼è‡ªåŠ¨ç¼–å·å’Œå¼•ç”¨ To enable this feature, you need to set mathjax.tags to ams in NexT config file.\nmath: mathjax: enable: true # Available values: none | ams | all tags: ams ä¸ºäº†ä½¿ç”¨è¿™é¡¹åŠŸèƒ½ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œä½ å¿…é¡»æŠŠæ‰€ä½¿ç”¨çš„ LaTeX å…¬å¼æ”¾åœ¨ equation ç¯å¢ƒé‡Œé¢ï¼Œé‡‡ç”¨æ—§çš„æ–¹æ³•ï¼ˆä¹Ÿå°±æ˜¯è¯´ï¼Œä»…ä»…æŠŠå…¬å¼çš„æ¯ä¸€è¾¹ç”¨ä¸¤ä¸ª $ ç¬¦å·åŒ…å«èµ·æ¥ï¼‰æ˜¯æ— æ•ˆçš„ã€‚å¦‚ä½•å¼•ç”¨å…¬å¼ï¼Ÿä½ åªéœ€è¦åœ¨ä¹¦å†™å…¬å¼çš„æ—¶å€™ç»™å…¬å¼ä¸€ä¸ª \\label{} æ ‡è®°ï¼ˆtagï¼‰ï¼Œç„¶ååœ¨æ­£æ–‡ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ \\ref{} æˆ–è€… \\eqref{} å‘½ä»¤æ¥å¼•ç”¨å¯¹åº”çš„å…¬å¼ã€‚ä½¿ç”¨ \\eqref{} æ˜¯æ¨èçš„æ–¹å¼ï¼Œå› ä¸ºå¦‚æœä½ ä½¿ç”¨ \\ref{}ï¼Œå…¬å¼åœ¨æ–‡ä¸­çš„å¼•ç”¨ç¼–å·å°†æ²¡æœ‰åœ†æ‹¬å·åŒ…å›´ã€‚ä¸‹é¢ä»‹ç»å‡ ç§å¸¸è§çš„å…¬å¼ç¼–å·ä¾‹å­.\nå¯¹äºç®€å•çš„å…¬å¼ï¼Œä½¿ç”¨ä¸‹é¢çš„æ–¹å¼ç»™å…¬å¼ä¸€ä¸ªæ ‡è®°ï¼Œ\n$$\\begin{equation}\\label{eq1} e=mc^2 \\end{equation}$$ ç„¶åï¼Œåœ¨æ­£æ–‡ä¸­ï¼Œä½ å¯ä»¥è½»æ¾å¼•ç”¨ä¸Šè¿°å…¬å¼ï¼Œä¸€ä¸ªç®€å•çš„ä¾‹å­å¦‚ä¸‹ï¼š\nè‘—åçš„è´¨èƒ½æ–¹ç¨‹ $\\eqref{eq1}$ ç”±çˆ±å› æ–¯å¦æå‡º ... Multi-line Equations å¯¹äºå¤šè¡Œå…¬å¼ï¼Œåœ¨ equation ç¯å¢ƒä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨ aligned ç¯å¢ƒæŠŠå…¬å¼åˆ†æˆå¤šè¡Œï¼Œ\n$$\\begin{equation}\\label{eq2} \\begin{aligned} a \u0026amp;= b + c \\\\ \u0026amp;= d + e + f + g \\\\ \u0026amp;= h + i \\end{aligned} \\end{equation}$$ Multiple Aligned Equations è¦å¯¹é½å¤šä¸ªå…¬å¼ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ align ç¯å¢ƒã€‚align ç¯å¢ƒä¸­çš„æ¯ä¸ªå…¬å¼éƒ½æœ‰è‡ªå·±çš„ç¼–å·ï¼š\n$$\\begin{align} a \u0026amp;= b + c \\label{eq3} \\\\ x \u0026amp;= yz \\label{eq4}\\\\ l \u0026amp;= m - n \\label{eq5} \\end{align}$$ Exclude Equations from Numbering åœ¨ align ç¯å¢ƒä¸­ï¼Œå¦‚æœä½ ä¸æƒ³ç»™æŸä¸ªæˆ–æŸå‡ ä¸ªå…¬å¼ç¼–å·ï¼Œé‚£ä¹ˆåœ¨è¿™äº›å…¬å¼åé¢ä½¿ç”¨ \\nonumber å‘½ä»¤å³å¯ã€‚ä¾‹å¦‚ï¼š\n$$\\begin{align} -4 + 5x \u0026amp;= 2+y \\nonumber \\\\ w+2 \u0026amp;= -1+w \\\\ ab \u0026amp;= cb \\end{align}$$ Use \\tag to Tag Equations æœ‰æ—¶ï¼Œä½ å¯èƒ½ä¼šå¸Œæœ›é‡‡ç”¨æ›´åŠ å¥‡ç‰¹çš„æ–¹å¼æ¥æ ‡è®°å’Œå¼•ç”¨ä½ çš„å…¬å¼ï¼Œä½ å¯ä»¥é€šè¿‡ä½¿ç”¨ \\tag{} å‘½ä»¤æ¥å®ç°ï¼Œä¾‹å¦‚ï¼š\n$$x+1\\over\\sqrt{1-x^2} \\tag{i}\\label{eq_tag}$$ å¦‚æœä½ æƒ³è¦äº†è§£æ›´å¤šä¿¡æ¯ï¼Œè¯·è®¿é—® MathJax å…³äºå…¬å¼ç¼–å·çš„å®˜æ–¹æ–‡æ¡£ã€‚åŒæ—¶ï¼Œä½ ä¹Ÿå¯ä»¥é˜…è¯» è¿™ç¯‡æ–‡æ¡£ æ¥è·å–æ›´å¤šç»†èŠ‚ä¿¡æ¯ã€‚\nå­—ä½“ é»˜è®¤å­—ä½“(font: false)æ˜¯Microsoft YaHei, è¿˜æŒºå¥½çœ‹çš„. å½“ç„¶ä¹Ÿå¯ä»¥è‡ªå·±æ”¹å­—ä½“.\nfont: enable: false ä½ç‰ˆæœ¬çš„Nextçš„font: falseçš„ä¸­æ–‡å·¨ä¸‘, å°†fontè®¾ä¸ºtrue,ä¹‹åæ¯”åŸæ¥å¥½çœ‹äº†..\nä½†æˆ‘ä¹Ÿä¸çŸ¥é“æ–°å­—ä½“æ˜¯å•¥\nä»£ç å— ä»£ç é«˜äº®(Code Highlight theme): è¿™ä¸ªç½‘ç«™å¯ä»¥é¢„è§ˆæ‰€æœ‰é«˜äº®æ•ˆæœï¼šä¼ é€é—¨\næˆ‘ä½¿ç”¨highlightä½œä¸ºé«˜äº®å¼•æ“, themeä½¿ç”¨a11y-light\næˆ‘æ²¡æœ‰è®¾ç½®ä»£ç å—è¡Œå·\nNext Config:\ncodeblock: # Code Highlight theme # All available themes: https://theme-next.js.org/highlight/ theme: # light: default # dark: stackoverflow-dark light: a11y-light dark: a11y-dark prism: light: prism dark: prism-dark # Add copy button on codeblock copy_button: enable: false # Available values: default | flat | mac style: flat Hexo Config:\nhighlight: enable: true line_number: false auto_detect: true tab_replace: \u0026#39;\u0026#39; wrap: true hljs: false prismjs: enable: false preprocess: true line_number: true tab_replace: \u0026#39;\u0026#39; å›¾åƒç¼©æ”¾ NexTé›†æˆäº†å¤šç§å›¾åƒæ˜¾ç¤ºå·¥å…·, åŒ…æ‹¬FancyBoxå’ŒMediumZoom, ä¸»è¦åŠŸèƒ½æ˜¯å›¾åƒç¼©æ”¾.\nå¼€å¯MediumZoom:\n# A JavaScript library for zooming images like Medium. # Warning: Do not enable both `fancybox` and `mediumzoom`. # For more information: https://medium-zoom.francoischalifour.com mediumzoom: true å›¾åƒæ‡’åŠ è½½ npm install hexo-lazyload --save lazyload: true è®¿å®¢äººæ•°\u0026amp;\u0026amp;æ–‡ç« é˜…è¯»æ¬¡æ•° NexTä¸»é¢˜å·²é›†æˆäº†ä¸è’œå­çš„è®¿å®¢äººæ•°å’Œæ–‡ç« é˜…è¯»ç»Ÿè®¡åŠŸèƒ½:\n# Show Views / Visitors of the website / page with busuanzi. # Get more information on http://ibruce.info/2015/04/04/busuanzi busuanzi_count: enable: true total_visitors: true total_visitors_icon: user fa fa-user total_views: true total_views_icon: eye fa fa-eye post_views: true post_views_icon: eye fa fa-eye åœ¨é¦–é¡µæ˜¾ç¤ºæ–‡ç« çš„é˜…è¯»æ¬¡æ•° ç‚¹å‡»å…¨æ–‡é˜…è¯»æ˜¾ç¤ºé˜…è¯»æ¬¡æ•° åœ¨åº•éƒ¨å¯ä»¥çœ‹è§è®¿å®¢äººæ•°å’Œæ–‡ç« é˜…è¯»æ¬¡æ•° ç½‘é¡µåŠ è½½åŠ é€Ÿ ä½¿ç”¨hexo-filter-optimizeæ¥æå‡ç½‘é¡µåŠ è½½é€Ÿåº¦:\nä¸‹è½½æ’ä»¶:\nnpm install hexo-filter-optimize ç¼–è¾‘é…ç½®æ–‡ä»¶:\nfilter_optimize: enable: true # remove the surrounding comments in each of the bundled files remove_comments: false css: # minify all css files minify: true # bundle loaded css files into one bundle: true # use a script block to load css elements dynamically delivery: true # make specific css content inline into the html page # - only support the full path # - default is [\u0026#39;css/main.css\u0026#39;] inlines: excludes: js: # minify all js files minify: true # bundle loaded js files into one bundle: true excludes: # set the priority of this plugin, # lower means it will be executed first, default of Hexo is 10 priority: 12 back2top button back2top buttonéå¸¸å¥½çœ‹, é»˜è®¤æ˜¯æ·»åŠ çš„:\nback2top: enable: true # Back to top in sidebar. buttoné»˜è®¤å‡ºç°åœ¨å·¦ä¸‹è§’, å¦‚æœè¿™é‡Œä¸ºtrue,å°±ä¼šå‡ºç°åœ¨sidebaré‡Œé¢(å¤´åƒ, ç›®å½•ä¸‹é¢),å¾ˆéš¾å¯Ÿè§‰ # æ‰€ä»¥æˆ‘è®¾ä¸ºfalse sidebar: false # Scroll percent label in b2t button. # è®©to-topçš„å°ç®­å¤´éšæ—¶æ˜¾ç¤ºæ•°å€¼, æˆ‘è§‰å¾—è¿™æ ·ç ´åé˜…è¯»ä½“éªŒ, æ‰€ä»¥ä¸ºfalse scrollpercent: false è¿™é‡Œæœ‰ä¸ªæ’ä»¶, ä¸è¿‡å·²ç»ä¸éœ€è¦äº†. è‡ªå¸¦çš„å°±å¾ˆå¥½çœ‹.\nç‰ˆæƒ é€‰æ‹©sidebar, ä¼šåœ¨sidebarå‡ºç°ä¸€ä¸ªå°å¾½ç« , ä¸æ€ä¹ˆç¢çœ¼. å¦‚æœé€‰æ‹©post, ç‰ˆæƒä¿¡æ¯ä¼šå‡ºç°åœ¨æ–‡ç« åº•éƒ¨, å¾ˆéš¾çœ‹.\n# Creative Commons 4.0 International License. # See: https://creativecommons.org/about/cclicenses/ creative_commons: # Available values: by | by-nc | by-nc-nd | by-nc-sa | by-nd | by-sa | cc-zero license: by-nc-sa # Available values: big | small size: small sidebar: true post: false # You can set a language value if you prefer a translated version of CC license, e.g. deed.zh # CC licenses are available in 39 languages, you can find the specific and correct abbreviation you need on https://creativecommons.org language: ä¸€äº›ä¸æƒ³ç”¨çš„ç¾åŒ– ä»¥ä¸‹ç¾åŒ–æˆ‘éƒ½ä¸æƒ³ç”¨, åªæ˜¯ç»™å‡ºæ·»åŠ æ–¹å¼.\næ·»åŠ ç‰ˆæƒä¿¡æ¯: ç‰ˆæƒä¿¡æ¯å¾ˆä¸‘, æ‰€ä»¥æˆ‘æ²¡åŠ \ncreative_commons: license: by-nc-sa sidebar: true post: true æ·»åŠ è¯„è®ºç³»ç»Ÿ. æˆ‘ä¸æƒ³åŠ \nå¤œé—´æ¨¡å¼: è¿™æ˜¯æ°¸ä¹…çš„, ä¸èƒ½æ‰‹åŠ¨åˆ‡æ¢, æ‰€ä»¥æˆ‘ä¹Ÿä¸æƒ³åŠ .\ndarkmode: true Reading progress bar: äº”é¢œå…­è‰²çš„,å½±å“è§‚çœ‹:\nreading_progress: Reading progress bar enable: false å¤šä¸»æœºåŒæ­¥ å¤šä¸»æœºåŒæ­¥ä¸»è¦çš„å‘åœ¨äºä¸»é¢˜çš„ç®¡ç†\nå¤šåˆ†æ”¯ åœ¨å®‰è£…æ’ä»¶å,hexo dä¼šç”Ÿæˆç½‘é¡µæ–‡ä»¶, å¹¶å°†å…¶éƒ¨ç½²åˆ°GitHubå’ŒGitPage. ä½†æ˜¯ä¸ä¼šæŠŠæºæ–‡ä»¶ä¹Ÿpushåˆ°github. æˆ‘ä»¬éœ€è¦:\nåœ¨Githubå»ºä¸¤ä¸ªåˆ†æ”¯,åˆ†åˆ«ç®¡ç†ç”Ÿæˆçš„ç½‘é¡µæ–‡ä»¶å’Œæºæ–‡ä»¶:\nmaster: ç”¨äºå­˜æ”¾hexo d éƒ¨ç½²çš„ç½‘é¡µæ–‡ä»¶ hexo: ç”¨äºé¡¹ç›®æºæ–‡ä»¶, åŒ…æ‹¬æ–‡æ¡£æºæ–‡ä»¶ åœ¨Githubä»“åº“-\u0026gt;Settings-\u0026gt;Branches-\u0026gt;Default branchä¸­å°†é»˜è®¤åˆ†æ”¯è®¾ä¸ºHexo. è¿™æ ·æ¯æ¬¡æ‰‹åŠ¨pushæºæ–‡ä»¶,éƒ½åˆ°hexoåˆ†æ”¯.\nå½“ç„¶ä¹Ÿå¯ä»¥æ¯æ¬¡éƒ½æ‰‹åŠ¨æŒ‡å®š,è¿™æ ·å¾ˆè ¢:\ngit push origin hexo è€Œæˆ‘ä»¬çš„hexo dä¼šæŠŠç”Ÿæˆçš„ç½‘é¡µæ–‡ä»¶åŒæ­¥åˆ°masteråˆ†æ”¯. è¿™æ˜¯ä¹‹å‰é…ç½®hexo dæ’ä»¶æ—¶è®¾ç½®çš„:\ndeploy: type: git repo: github: git@github.com:LYK-love/LYK-love.github.io.git branch: master å¤šä¸»æœºåŒæ­¥çš„é—®é¢˜ æˆ‘ä»¬çœ‹åˆ°, Hexoæ·»åŠ ä¸»é¢˜çš„ä¸€èˆ¬æµç¨‹æ˜¯ clone ä¸»é¢˜åˆ°å¯¹åº”çš„ themesç›®å½•ä¸­ï¼Œç„¶åç¼–è¾‘Hexoçš„é…ç½®æ–‡ä»¶. ä½†æ˜¯, ä¸»é¢˜æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„githubä»“åº“, æœ‰è‡ªå·±çš„ .git æ–‡ä»¶å¤¹, ä¹Ÿå°±æ˜¯è¯´æœ¬åœ°çš„ä¸»é¢˜é¡¹ç›®æ˜¯åµŒå¥—åœ¨Hexoé¡¹ç›®å†…çš„å­—ä»“åº“.\nå½“pushæœ¬åœ°ä»“åº“æ—¶, æ˜¯ä¸ä¼špushå­ä»“åº“çš„, è¯æ®å°±æ˜¯, åœ¨githubä¸ŠæŸ¥çœ‹ç½‘ç«™é¡¹ç›®ä»“åº“, ç‚¹è¿›\u0026lt;repository\u0026gt;/themes/, ä¼šå‘ç°nextæ–‡ä»¶å¤¹æœ‰ä¸ªå¾ˆå¥‡æ€ªçš„åå­—: [next @ XXXXX, ç‚¹å‡»å®ƒ, ä¼šè·³è½¬åˆ°è¯¥ä¸»é¢˜æ–‡ä»¶å¤¹å¯¹åº”çš„githubé¡¹ç›®. è¿™è¯´æ˜æœ¬åœ°çš„ä¸»é¢˜æ–‡ä»¶å¤¹æ˜¯ä¸€ä¸ªå­é¡¹ç›®, ä»æ¥æ²¡æœ‰éšç€çˆ¶é¡¹ç›®ä¸€èµ·è¢«pushåˆ°githubä¸Š.\nå› æ­¤, å½“æœ‰æ–°ä¸»æœºcloneä½ çš„hexoä»“åº“æ—¶( æ¯”å¦‚å®ƒè¦å‚ä¸å¤šä¸»æœºåŒæ­¥ ), å®ƒcloneä¸‹çš„ä¸»é¢˜æ–‡ä»¶å¤¹æ˜¯ç©ºçš„.\næ¯”å¦‚, æˆ‘ç”¨nextä¸»é¢˜, å½“æˆ‘ä¹°äº†å°æ–°ç”µè„‘, æƒ³è¦åœ¨å®ƒä¸Šé¢åŒæ­¥æˆ‘å¼€å‘çš„hexo. cloneä¸‹æˆ‘çš„ç½‘ç«™, å‘ç°é¡¹ç›®å†…themes/nextä¸ºç©º. è¿™æ ·å°±æ— æ³•æ­£ç¡®ç”Ÿæˆç½‘ç«™é¡µé¢äº†.\nè¯¥Bugçš„è¡¨é¢ç»“æœæ˜¯: hexoç”Ÿæˆçš„index.htmlä¹Ÿä¸ºç©º( 0kb )\nä¸»é¢˜æ–‡ä»¶å¤¹ä¸ä¼šè¢«push, ä¸”æ¯æ¬¡ä¸»é¢˜æ›´æ–°æ—¶,éƒ½ä¼šè¢«overwritten, æ‰€ä»¥ä¸è¦æ›´æ”¹ä¸»é¢˜æ–‡ä»¶å¤¹åˆ°ä»»ä½•å†…å®¹.\nå¯¹äºä¸»é¢˜é…ç½®æ–‡ä»¶. Nextå®˜æ–¹æä¾›Alternate Theme Configæœºåˆ¶æ¥è®©ç”¨æˆ·è‡ªå®šä¹‰ä¸»é¢˜é…ç½®:\næŠŠä¸»é¢˜é…ç½®æ–‡ä»¶å¤åˆ¶åˆ°Hexoé¡¹ç›®ç›®å½•ä¸‹, å–åä¸º _config.[name].yml. Replace [name] with the value of theme option in Hexo config file. For NexT theme, the file name is _config.next.yml by default\nç°åœ¨ä¸»é¢˜çš„é…ç½®æ–‡ä»¶å°±ä¼šè¯»å–Hexoé¡¹ç›®ç›®å½•çš„_config.[name].yml, è€Œä¸æ˜¯ä¸»é¢˜ç›®å½•çš„_config.yml. ç”±äºä½äºHexoé¡¹ç›®ç›®å½•ä¸‹, _config.[name].ymlä¼šéšç€æ¯æ¬¡çš„pushè¢«pushåˆ°Hexoé¡¹ç›®çš„ä»“åº“. ä¸ç”¨æ‹…å¿ƒå­é¡¹ç›®é—®é¢˜\nå¤šä¸»æœºåŒæ­¥æ—¶, æ–°ä¸»æœºåªéœ€cloneæ•´ä¸ªé¡¹ç›®:\ngit clone https://github.com/LYK-love/LYK-love.github.io å¯¹äºCSSä¹‹ç±»çš„æ–‡ä»¶, åæˆ‘æ˜¯ä¸ä¼šæ”¹çš„, æ‰€ä»¥æ— æ‰€è°“åŒæ­¥. å¯¹äºå›¾ç‰‡, ä¹‹å‰è®²äº†,å¯ä»¥æ”¾åœ¨é¡¹ç›®çš„/source/images/è¿›è¡ŒåŒæ­¥( è€Œä¸æ˜¯ä¸»é¢˜çš„themes/next/images).\nå½“ç„¶ä¸ºäº†ä¿é™©, æˆ‘ä¹Ÿå¦å¤–åœ¨é¡¹ç›®æ–‡ä»¶å¤¹å†…å¤‡ä»½äº†å›¾ç‰‡æ–‡ä»¶.\nä¸‹æ–‡çš„**@Deprecated åŒæ­¥æ­¥éª¤**æ˜¯è¢«åºŸå¼ƒçš„æ–¹æ¡ˆ, å®ƒä½¿ç”¨git modules, è¿™ç§æ–¹æ¡ˆæ–°å»ºäº†ä¸»é¢˜ä»“åº“, ç„¶åç”¨git moduleåŒæ­¥æ•´ä¸ªä¸»é¢˜æ–‡ä»¶å¤¹, é—®é¢˜åœ¨äºè¿™æ ·åšå°±æ²¡æ³•è¿›è¡Œä¸»é¢˜çš„æ›´æ–°äº†, å› æ­¤åºŸå¼ƒ\n@New åŒæ­¥æ­¥éª¤ è€ä¸»æœºåªéœ€git pullå°±è¡Œäº†.\nå¯¹äºæœ¬åœ°è¿˜æ²¡æœ‰hexoé¡¹ç›®çš„æ–°ä¸»æœº, éœ€è¦:\ncloneè‡ªå·±çš„Hexoé¡¹ç›®å¹¶åˆå§‹åŒ–:\ngit clone https://github.com/LYK-love/LYK-love.github.io cd LYK-love.github.io npm install å¯èƒ½ä¼šé‡åˆ°æŠ¥é”™:\nERROR Cannot find module \u0026#39;hexo\u0026#39; from \u0026#39;/Users/lyk/Documents/LYK-love.github.io\u0026#39; \u0026lt;Snip\u0026gt; ERROR Try running: \u0026#39;rm -rf node_modules \u0026amp;\u0026amp; npm install --force\u0026#39; åªéœ€æŒ‰ç…§æç¤ºæ“ä½œå³å¯:\nrm -rf node_modules \u0026amp;\u0026amp; npm install --force å®‰è£…ä¸»é¢˜\nç”±äºä¸‹æ–‡ä»‹ç»çš„Nextä¸»é¢˜çš„Alternate Theme Configæœºåˆ¶, ä¸»é¢˜é…ç½®æ–‡ä»¶å·²ç»åœ¨Hexoé¡¹ç›®æ–‡ä»¶å¤¹ä¸­è¢«æˆ‘ä»¬cloneä¸‹æ¥äº†, ä¹Ÿå°±æ˜¯è¯´å·²ç»åŒæ­¥äº†, ä¸‡äº‹å¤§å‰.\nç”±å‰æ–‡çŸ¥, hexo-renderer-markdown-itçš„é…ç½®ä¹Ÿæ”¾åœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­è¿›è¡ŒåŒæ­¥äº†. ä½†æ˜¯, imagesç­‰æ–‡ä»¶æ²¡æœ‰åŒæ­¥, æˆ‘æŠŠimagesæ”¾åœ¨Hexoé¡¹ç›®æ–‡ä»¶å¤¹ä¸‹, éœ€è¦æ‰‹åŠ¨æŠŠå®ƒcopyåˆ°ä¸»æœºæ–‡ä»¶å¤¹çš„source/imagesä¸­\n@Deprecated åŒæ­¥æ­¥éª¤ æ³¨: è¯¥æ–¹æ¡ˆå·²ç»è¢«åºŸå¼ƒ\nRef:\nåœ¨ hexo ä¸­ä½¿ç”¨ git submodules ç®¡ç†ä¸»é¢˜ åœ¨Hexoå¤šä¸»æœºåŒæ­¥æ—¶, æˆ‘ä»¬å½“ç„¶å¸Œæœ›è‡ªå·±çš„ä¸»é¢˜é…ç½®æ–‡ä»¶ä¹ŸåŒæ­¥.\nBad Practice: ç”±äºæœ¬åœ°çš„ä¸»é¢˜é¡¹ç›®æ²¡åŠæ³•push, æ–°ä¸»æœºå°±åªèƒ½æ¯æ¬¡åªclone è‡ªå·±Hexoé¡¹ç›®, ç„¶åé‡æ–°cloneå®˜æ–¹çš„ä¸»é¢˜. è¿™æ ·åšæ˜¯æ„šè ¢çš„. å¤šå°æœºå­ä¸Šå¼€å‘, æ¯å°çš„æœ¬åœ°éƒ½æ˜¯ä¸åŒçš„ä¸»é¢˜é¡¹ç›®, æ¯æ¬¡ç”Ÿæˆç½‘é¡µæ–‡ä»¶,æ ·å¼éƒ½ä¸ä¸€æ ·.\nå› æ­¤, æˆ‘ä»¬éœ€è¦æœ‰ä¸€ä¸ªè‡ªå·±çš„ä¸»é¢˜é¡¹ç›®, æ¥å¯¹ä¸»é¢˜ä¹Ÿè¿›è¡Œç‰ˆæœ¬ç®¡ç†. å¯ä»¥forkå®˜æ–¹ä¸»é¢˜é¡¹ç›®, ä½†æˆ‘ä¸ºäº†æ–¹ä¾¿, ç›´æ¥åˆ›å»ºäº†è‡ªå·±çš„ä¸»é¢˜é¡¹ç›®.\nOld Hosts å¯¹äºå·²ç»åŠ å…¥å¤šä¸»æœºåŒæ­¥çš„ä¸»æœºæ¥è¯´, å¦‚æœæœ¬åœ°æ›´æ”¹äº†ä¸»é¢˜. é‚£ä¹ˆæ¯æ¬¡é™¤äº†push Hexoé¡¹ç›®æ–‡ä»¶, è¿˜å¾—æŠŠå†æŠŠä¸»é¢˜é¡¹ç›®æ–‡ä»¶ä¹Ÿpush. å¦åˆ™ä¸»é¢˜é…ç½®çš„æ›´æ”¹æ˜¯æ²¡æ³•åŒæ­¥åˆ°Githubçš„.\npushå­é¡¹ç›®:\ncd ./themes/next git add . \u0026amp;\u0026amp; git commit -m\u0026#34;XXX\u0026#34; git push è¦åœ¨pull Hexoé¡¹ç›®æ—¶é¡ºä¾¿æ‹‰å–å­é¡¹ç›®( ä¸»é¢˜é¡¹ç›® ), è¿™ç§°ä¸ºupdate submodule:\n# æŠŠé¡¹ç›®çš„å­é¡¹ç›®ä¹Ÿpullä¸‹æ¥ git submodule update --init å½“ç„¶ä¹Ÿå¯ä»¥pull Hexoåæ‰‹åŠ¨å†pullå­é¡¹ç›®,è¿™æ ·å¾ˆè ¢:\ncd ./themes/next git pull New Hosts å¯¹äºè¦åŠ å…¥å¤šä¸»æœºåŒæ­¥çš„æ–°ä¸»æœºæ¥è¯´, è¦æŠŠä¸»é¢˜æ–‡ä»¶å½“ä½œgit submodule, åœ¨åˆå§‹åŒ–é˜¶æ®µ, å…ˆåŒæ­¥Hexo, å†åŒæ­¥ä¸»é¢˜.\ncloneè‡ªå·±çš„Hexoé¡¹ç›®å¹¶åˆå§‹åŒ–:\ngit clone https://github.com/LYK-love/LYK-love.github.io cd LYK-love.github.io npm install å°†ä¸»é¢˜ä½œä¸ºsubmoduleæ·»åŠ è¿›æ¥:\ncd blog-hexo git submodule add https://github.com/LYK-love/next themes/next git submodule add \u0026lt;sub-module-registry\u0026gt;: git ä¼šå°†ä¸»é¢˜é¡¹ç›®( ä¹Ÿå°±æ˜¯æˆ‘çš„nexté¡¹ç›® )ä½œä¸ºä¸€ä¸ªsubmodule, clone åˆ° themes/hexo ä¸­.\nåŒæ—¶ hexo é¡¹ç›®ä¸­ä¼šç”Ÿæˆä¸€ä¸ª .gitmodules æ–‡ä»¶, è¿™ä¸ªé…ç½®æ–‡ä»¶ä¸­ä¿å­˜äº†é¡¹ç›® URL ä¸å·²ç»æ‹‰å–çš„æœ¬åœ°ç›®å½•ä¹‹é—´çš„æ˜ å°„. .gitmodules æ–‡ä»¶å†…å®¹:\n\u0026gt; cat .gitmodules [submodule \u0026#34;themes/next\u0026#34;] path = themes/next url = git@github.com:LYK-love/next.git update submudule, ç¬¬ä¸€æ¬¡updateæ—¶è¦åŠ --inité€‰é¡¹:\ngit submodule update --init ä¹Ÿå¯åœ¨ clone çˆ¶é¡¹ç›®æ—¶ç›´æ¥ä½¿ç”¨ git clone --recursive , git ä¹Ÿä¼špullæ‰€æœ‰çš„å­é¡¹ç›®. ç°åœ¨æ–°ä¸»æœºå·²ç»åŠ å…¥å¤šä¸»æœºåŒæ­¥, å˜æˆOld Hostsäº†.\nBugs hexo g ä¼šç”Ÿæˆé™æ€æ–‡ä»¶, ä½†æ˜¯ï¼Œå¦‚æœä½ çš„ç›®å½•ä¸‹æœ‰å¤±æ•ˆçš„è½¯é“¾æ¥ï¼Œ å°±ä¸ä¼šç”Ÿæˆæ–‡ä»¶ã€‚ å› æ­¤è¯·åˆ é™¤æ‰€æœ‰çš„å¤±æ•ˆè½¯é“¾æ¥\nrefï¼š Fixing Hexo Not Generating Files hexoçš„markdownæºä»£ç é¿å…å‡ºç°è·¨çº§æ ‡é¢˜ç»“æ„ï¼Œ è¿™é‡Œçš„è·¨çº§æŒ‡çš„æ˜¯ä¸èƒ½ä»ä¸€ä¸ªä¸€çº§æ ‡é¢˜ç›´æ¥è·Ÿä¸‰çº§æ ‡é¢˜ï¼›äºŒçº§æ ‡é¢˜åç´§è·Ÿçš„å­æ ‡é¢˜çº§åˆ«å¿…é¡»æ˜¯ä¸‰çº§æ ‡é¢˜\næ–‡ç« çš„Front-matteræ˜¯YAMLæ ¼å¼, å› æ­¤å†’å·åé¢å¿…é¡»æœ‰ä¸€ä¸ªè‹±æ–‡ç©ºæ ¼:\ntitle: XX categories: XX tags: XX å¦åˆ™æŠ¥é”™:\nYAMLException: can not read a block mapping entry; a multiline key may not be an implicit key\nå¦‚æœè¡¨æ ¼å¤šäº†è¡Œ/åˆ—,åœ¨æ˜¾ç¤ºæ—¶ä¼šå¾ˆä¸‘\næå…¶ç½•è§çš„Bug, èŠ±äº†æˆ‘å¤§åŠå¤©: Hexoå’ŒNextåˆ†åˆ«æ›´æ–°, ç»“æœLatexä¸èƒ½æ˜¾ç¤º, hexo gå·¨æ…¢, é¡µé¢é—ªçƒ, back2topå°ç®­å¤´å›¾è¡¨æ¶ˆå¤±ç­‰ç­‰ç­‰ç­‰\u0026hellip; æœ€å¥½ä»–å±…ç„¶ç¥å¥‡åœ°å¥½äº†. æˆ‘çŒœæ˜¯package.jsonå†²çªäº†. ä¸è¿‡å…·ä½“åŸå› æˆ‘ä¹Ÿä¸çŸ¥é“\u0026hellip; .æ°”æ­»æˆ‘äº†.\nHexo Doc ç½‘ä¸Šæ²¡æœ‰å…³äºå®‰è£…æŒ‡å®šç‰ˆæœ¬çš„Hexoçš„æ•™ç¨‹. æˆ‘çš„åšæ³•æ˜¯æŠ„ä¸€ä»½æŒ‡å®šç‰ˆæœ¬çš„package.jsonç„¶ånpm install\nVersion æŸ¥çœ‹æœ¬åœ°Hexoç‰ˆæœ¬:\nhexo version æŸ¥çœ‹æœ‰å“ªäº›è½åçš„ç‰ˆæœ¬:\nnpm outdated Install npm install -g hexo-cli Ungrade å®‰è£…hexoæ—¶éœ€è¦å®‰è£…hexo-cli(å®ƒåŒ…å«äº†hexoåœ¨å†…çš„ä¸€å¤§å †ä¾èµ–), è€Œå‡çº§hexoåªéœ€å‡çº§æ‰€æœ‰æ’ä»¶:\nnpm install -g npm-upgrade npm-upgrade: å‡çº§ä½œä¸ºdependencyçš„hexo æŸ¥çœ‹æ˜¯å¦æ›´æ–°æˆåŠŸ:\nhexo version Uninstall Uninstall:\nnpm uninstall hexo NeXt Doc NexT æ¯ä¸ªæœˆéƒ½ä¼šå‘å¸ƒæ–°ç‰ˆæœ¬\nNext Official Doc\nNext Github Repo\nå°½é‡ä»¥å®˜æ–¹æ–‡æ¡£ä¸ºå‡†, Github repoä¸Šåªæœ‰å¾ˆå°‘çš„ä¿¡æ¯.\næ³¨æ„, Nextå­˜åœ¨å¤šä¸ªGithub repo, è¯·ä¸è¦è¢«æ··æ·†. ä¾‹å¦‚è¯¥repo:\nhttps://github.com/theme-next/hexo-theme-next è¿™æ˜¯ä¸€ä¸ªè¿‡æ—¶çš„repo, å…¶nextç‰ˆæœ¬åªåˆ°7.8.0. è€Œç›´åˆ°æœ¬æ–‡å†™ä½œæ—¶, nextç‰ˆæœ¬å·²ç»è¾¾åˆ°8.15.1äº†, å› æ­¤è¦æ³¨æ„åŒºåˆ†.\nVersion NeXt \u0026lt; 8çš„ç‰ˆæœ¬å¥½åƒæ²¡åŠæ³•æŸ¥çœ‹\nNext \u0026gt;=8 ä¹‹å, æ¯æ¬¡hexo s/dæ—¶åœ¨å‘½ä»¤è¡Œçš„è¾“å‡ºé‡Œéƒ½æœ‰Nextç‰ˆæœ¬ä¿¡æ¯. æ­¤å¤–hexo versionä¹Ÿä¼šæ˜¾ç¤ºnextç‰ˆæœ¬.\nInstallation Next Official Doc: Installation\nç”±äºæˆ‘ä¸å¯¹ä¸»é¢˜åšç‰ˆæœ¬ç®¡ç†, ä¹Ÿå°±ä¸æ–°å¼€ä»“åº“äº†.\næ— è®ºæ˜¯ä¸‹è½½è¿˜æ˜¯æ›´æ–°Next, éƒ½è¦å…ˆæ›´æ–°åˆ°æœ€æ–°çš„Hexo.\nUsing npm npm install hexo-theme-next@latest npmä¼šæŠŠä¸»é¢˜æ–‡ä»¶å¤¹ä¸‹è½½åˆ°/node_modules/hexo-theme-next Using git In hexo directory:\ngit clone https://github.com/next-theme/hexo-theme-next themes/next æ³¨æ„, å¦‚æœåœ¨themes/ä¸‹å·²ç»å­˜åœ¨äº†ä¸»é¢˜æ–‡ä»¶å¤¹, åˆ™Hexoä¼šå¿½ç•¥node_modules/ä¸­å¯èƒ½å­˜åœ¨çš„/ä¸»é¢˜æ–‡ä»¶å¤¹. ä¹Ÿå°±æ˜¯è¯´è¦ä¹ˆç”¨git, è¦ä¹ˆç”¨npm, ä¸¤è€…ä¸èƒ½å…±å­˜ After Installation å®‰è£…æˆåŠŸåå°±å¯ä»¥ä½¿ç”¨äº†, å‘½ä»¤è¡Œè¾“å…¥å¦‚ä¸‹:\nâ¯ hexo s INFO Validating config INFO ================================== â–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•— â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•â•â•â•šâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•šâ•â•â–ˆâ–ˆâ•”â•â•â• â–ˆâ–ˆâ•”â–ˆâ–ˆâ•— â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â•šâ–ˆâ–ˆâ–ˆâ•”â• â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â• â–ˆâ–ˆâ•”â–ˆâ–ˆâ•— â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•‘ â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â• â–ˆâ–ˆâ•— â–ˆâ–ˆâ•‘ â•šâ•â• â•šâ•â•â•â•â•šâ•â•â•â•â•â•â•â•šâ•â• â•šâ•â• â•šâ•â• ======================================== NexT version 8.15.1 Documentation: https://theme-next.js.org ======================================== INFO Start processing INFO Hexo is running at http://localhost:4000/ . Press Ctrl+C to stop. Upgrade è®°å¾—å¤‡ä»½oldä¸»é¢˜æ–‡ä»¶å¤¹çš„æ–‡ä»¶, æŠŠæ—§ä¸»é¢˜æ–‡ä»¶å¤¹renameä¸ºnext-old. å½“ç„¶, ç”±äºè¯¥æ–‡ä»¶å¤¹ä¸€èˆ¬ä»€ä¹ˆéƒ½ä¸ä¼šæ”¹,æ‰€ä»¥ä¸å¤‡ä»½ä¹Ÿæ²¡å•¥å…³ç³»\nå·²ç»é‡‡ç”¨äº†Alternate Theme Config, å› æ­¤å¯ä»¥å¹³æ»‘åœ°å‡çº§:\ngit pull Markdown é¡µé¢å†…è·³è½¬ Anchor Auto åªéœ€è¦ä½¿ç”¨hexo-renderer-markdown-it, å¹¶ä¿®æ”¹å…¶é…ç½®æ–‡ä»¶, å°±å¯ä»¥ä½¿æ–‡ç« Headerè‡ªå¸¦Anchor\nManual ä¾‹å­:\nMarkdownçš„ä¸€ä¸ªæ ‡é¢˜:\n// in markdown: # Ha ha dadads ä¼šè¢«Hexoæ¸²æŸ“æˆ:\n//in html \u0026lt;id = \u0026#34;ha-ha\u0026#34;\u0026gt; \u0026lt;h1\u0026gt;dadads\u0026lt;/h1\u0026gt; ç©ºæ ¼ä¼šè¢«è½¬æ¢ä¸ºè¿å­—ç¬¦, å¤§å†™ä¼šè¢«è½¬æ¢ä¸ºå°å†™. ç”±äºæˆ‘åœ¨hexo-renderer-markdown-itä¸­çš„é…ç½®, ç©ºæ ¼ä¼šè¢«è½¬æ¢ä¸º-, è€Œå¤§å°å†™æ˜¯ä¸è½¬æ¢çš„ å¦‚æœæœ‰é‡åçš„æ ‡é¢˜(å³ä½¿å¤„äºä¸åŒçš„æ ‡é¢˜å±‚æ¬¡), å°±ä¼šåœ¨htmlçš„æ ‡ç­¾çš„idå±æ€§ä¸­äºˆä»¥åŒºåˆ†:\n// in markdown: # haha dadads # Heihei ## Haha //é‡åäº† asa //in html \u0026lt;id = \u0026#34;haha-1\u0026#34;\u0026gt; \u0026lt;h1\u0026gt;dadads\u0026lt;/h1\u0026gt; \u0026lt;id = \u0026#34;haha-2\u0026#34;\u0026gt; //ç”¨æ•°å­—åç¼€åŒºåˆ†äº† \u0026lt;h1\u0026gt;asa\u0026lt;/h1\u0026gt; å› æ­¤, åªéœ€è¦åœ¨markdownä¸­å†™:\n[æ˜¾ç¤ºçš„å†…å®¹](#æ ‡é¢˜) ç”Ÿæˆçš„Htmlæ˜¯:\n\u0026lt;a href=\u0026#34;æ ‡é¢˜\u0026#34;\u0026gt;æ˜¾ç¤ºçš„å†…å®¹\u0026lt;/a\u0026gt; è¿™å°±å¼•ç”¨äº†å¯¹åº”çš„æ ‡é¢˜:\n# æ ‡é¢˜ å¯ä»¥çœ‹åˆ°, è¿™æ˜¯åŸºäºHtmlçš„æ ‡ç­¾idåŒ¹é…çš„, è€ŒMarkdownæ ‡é¢˜ç”Ÿæˆçš„Htmlæ ‡ç­¾çš„idå’Œæ ‡é¢˜çº§åˆ«æ²¡æœ‰å…³ç³», åªå’Œæ ‡é¢˜åå­—æœ‰å…³ç³». æ‰€ä»¥\n[æ˜¾ç¤ºçš„å†…å®¹](#KKK) å¯ä»¥å¼•ç”¨åˆ°:\n# Haha ## KKK ä¸­çš„äºŒçº§æ ‡é¢˜KKK\nç”±äºç©ºæ ¼ä¼šè¢«è½¬æ¢ä¸º-, å› æ­¤å¦‚æœæ ‡é¢˜ä¸º:\n# Traditional Dead Lift åˆ™åº”è¯¥è¿™æ ·å¼•ç”¨:\n[æ˜¾ç¤ºçš„å†…å®¹](#Traditional-Dead-Lift) ","permalink":"https://lyk-love.cn/Hugo-Blog/posts/hexo/","posts_num":12,"tags":null,"title":"Hexo"},{"categories":["Algorithm"],"contents":"Outline:\nHow to Compare Two Algorithms Brute Force by Iteration Brute Force by Recursion How to Compare Two Algorithms (c) $(c)$\nAlgorithm analysis, with simplification Measure the cost by the number of critical operations Large input size only Essential part only Only the leading term in$ f(n)$ is considered Constant coefficients are ignored Capturing the essential part in the cost in a mathematical way Asymptotic growth rate of $f(n)$ Relative Growth Rate $O(g):$â€‹â€‹ functions $A_1, A_2,\u0026hellip;$that grows no faster than $g$â€‹\n$O(g(n))={f(n): å­˜åœ¨å¸¸æ•°c\u0026gt;0å’Œn_0\u0026gt;0,æ»¡è¶³0\\leq f(n) \\leq cg(n)å¯¹æ‰€æœ‰n \\geq n_0å‡æˆç«‹}$â€‹ $f(n)=O(g(n)) \\quad iff \\quad \\lim\\limits_{n \\rightarrow \\infty} \\frac{f(n)}{g(n)}=c\u0026lt;\\infty$ $o(g)$: ä¸å¿«äº$g$ä¸”ä¸$g$æœ‰å±‚æ¬¡ä¸Šçš„å·®è·\n$o(g(n))={f(n): å¯¹ä»»æ„å¸¸æ•°c\u0026gt;0, å‡å­˜åœ¨å¸¸æ•°n_0\u0026gt;0,æ»¡è¶³0\\leq f(n) \u0026lt; cg(n)å¯¹æ‰€æœ‰n \\geq n_0å‡æˆç«‹}$â€‹â€‹â€‹ $f(n)=o(g(n)) \\quad iff \\quad \\lim\\limits_{n \\rightarrow \\infty} \\frac{f(n)}{g(n)}=0$â€‹ $\\Omega(g)$: functions that grow at least as fast as $g$â€‹\n$\\Omega(g(n))={f(n): å­˜åœ¨å¸¸æ•°c\u0026gt;0å’Œn_0\u0026gt;0,æ»¡è¶³0 \\leq cg(n)\\leq f(n) å¯¹æ‰€æœ‰n \\geq n_0å‡æˆç«‹}$ $f(n)=\\Omega(g(n)) \\quad iff \\quad \\lim\\limits_{n \\rightarrow \\infty} \\frac{f(n)}{g(n)}=c\u0026gt;0(cä¹Ÿå¯ä»¥ä¸º\\infty)$â€‹ $\\omega$: ä¸æ…¢äº$g$ä¸”ä¸$g$æœ‰å±‚æ¬¡ä¸Šçš„å·®è·\n$\\omega(g(n))={f(n): å¯¹ä»»æ„å¸¸æ•°c\u0026gt;0,å‡å­˜åœ¨å¸¸æ•°n_0\u0026gt;0,æ»¡è¶³0 \\leq cg(n) \u0026lt; f(n) å¯¹æ‰€æœ‰n \\geq n_0å‡æˆç«‹}$â€‹ $f(n)=\\omega(g(n)) \\quad iff \\quad \\lim\\limits_{n \\rightarrow \\infty} \\frac{f(n)}{g(n)}=\\infty$â€‹â€‹ $\\Theta(g):$â€‹â€‹ \u0026hellip; the same rate as $g$â€‹â€‹. (å¤„äºåŒä¸€æ°´å¹³) ( $O$å’Œ$\\Omega$çš„äº¤é›† )\n$\\Theta(g(n))={f(n): å­˜åœ¨å¸¸æ•°c_1\u0026gt;0,c_2\u0026gt;0å’Œn_0\u0026gt;0,æ»¡è¶³0 \\leq c_1g(n)\\leq f(n) \\leq c_2g(n) å¯¹æ‰€æœ‰n \\geq n_0å‡æˆç«‹}$ $f(n)=\\Theta(g(n)) \\quad iff \\quad \\lim\\limits_{n \\rightarrow \\infty} \\frac{f(n)}{g(n)}=c\u0026gt;0(0\u0026lt;c\u0026lt;\\infty)$â€‹â€‹ $\\theta$: ä¸å­˜åœ¨ï¼Œ $o$â€‹å’Œ$\\omega$â€‹çš„äº¤é›†æ˜¯ç©ºé›†\nBrute Force by Iteration Max-sum Subsequence\nè›®åŠ›æ˜¯$O(n^3)$, æ”¹è¿›ä¸€ä¸‹æ˜¯$Oï¼ˆn^2ï¼‰$â€‹ï¼Œç”¨åˆ†æ²»æ”¹è¿›æ˜¯$Oï¼ˆnlognï¼‰$\nA linear Algorithm: O(n)\nThisSum = MaxSum = 0; for( j = 0 ; j \u0026lt; N ; j++ ) { ThisSum += A[j]; if( ThisSum \u0026gt; MaxSum ) MaxSum = ThisSum; else if( ThisSum \u0026lt; 0 ) ThisSum = 0; } Return MaxSum Brute Force by Recursion è›®åŠ›ç­–ç•¥å¤§æ™ºè‹¥æ„šï¼Œå¯ä»¥ä»¥æ­¤ä¸ºè·³æ¿è¿›è¡Œæ”¹è¿›\nJob Scheduling\nBrute force recursion Select job \u0026lsquo;a\u0026rsquo; Case 1: the result does not contain \u0026lsquo;a\u0026rsquo; Recursion on $J \\setminus {a}$â€‹â€‹ Case 2: the result contains \u0026lsquo;a\u0026rsquo; Recursion on $J \\setminus {a} \\setminus {$ â€‹ tasks overlapping with $ a}$â€‹ Further improvements Dynamic programming(L16) Greedy algorithms( L14 ) Matrix Chain Multiplication\nSolutions Brute force recursion(L16) BF1 BF2 Dynamic programming(L16) Based on brute force recursion 2 ","permalink":"https://lyk-love.cn/Hugo-Blog/posts/l2-asymptotics/","posts_num":12,"tags":["Algorithm design and analysis"],"title":"L2 Asymptotics3000"},{"categories":null,"contents":"Outline:\nIntroï¼š å¤šå¤„ç†å™¨ç¼–ç¨‹çš„å›°éš¾ ç”¨çŠ¶æ€æœºç†è§£å¹¶å‘ç®—æ³• å¹¶å‘æ§åˆ¶ï¼šäº’æ–¥ã€åŒæ­¥ æ¦‚å¿µï¼š äº’æ–¥ å¹¶å‘ä¸çŠ¶æ€æœº Threading API Lock Concurrent Data Structure based on Lock Conditional Variable ä¿¡å·é‡ å¸¸è§å¹¶å‘é—®é¢˜ åŸºäºäº‹ä»¶çš„å¹¶å‘ Refï¼š\nOperating Systems Three Easy pieces JYY OS Intro Concurrentï¼šexsiting, happening, or done at the same time. ç¨‹åºçš„ä¸åŒéƒ¨åˆ†å¯ä»¥æŒ‰ä¸åŒé¡ºåºæ‰§è¡Œï¼Œä¸”æœ€ç»ˆå¾—åˆ°æ­£ç¡®çš„ç»“æœ\n//t0.c #include\u0026lt;stdio.h\u0026gt; #include\u0026lt;assert.h\u0026gt; #include\u0026lt;pthread.h\u0026gt;// pthread åº“ä¸æ˜¯ Linux ç³»ç»Ÿé»˜è®¤çš„åº“ï¼Œè¿æ¥æ—¶éœ€è¦ä½¿ç”¨é™æ€åº“ libpthread.a // åœ¨ç¼–è¯‘ä¸­è¦åŠ  -lpthreadå‚æ•° void *mythread( void *arg ) { printf(\u0026#34;%s\\n\u0026#34;, arg); return NULL; } int main( int argc, char* argv[]) { pthread_t p1,p2; int rc; printf( \u0026#34;main:begin\\n\u0026#34; ); char* ch1 = \u0026#34;A\u0026#34;; char* ch2 = \u0026#34;B\u0026#34;; rc = pthread_create( \u0026amp;p1, NULL, mythread, ch1 ); assert(rc==0); //Cè¯­è¨€ç¼–è¯‘å™¨å…è®¸éšå«æ€§çš„å°†ä¸€ä¸ªé€šç”¨æŒ‡é’ˆè½¬æ¢ä¸ºä»»æ„ç±»å‹çš„æŒ‡é’ˆï¼ŒåŒ…æ‹¬const *è€ŒCï¼‹ï¼‹ä¸å…è®¸å°†const è½¬æ¢ä¸ºéconst*ï¼Œæ‰€ä»¥ä¸èƒ½ç›´æ¥ä¼ å…¥\u0026#34;A\u0026#34; rc = pthread_create( \u0026amp;p2, NULL, mythread, ch2 ); assert(rc==0); rc= pthread_join( p1,NULL ); rc= pthread_join( p2,NULL ); printf(\u0026#34;main:end\\n\u0026#34;); } è¯¥ç¨‹åºæ‰“å°ç»“æœä¸ºï¼š\nmain:begin A B main:end æˆ–è€…\nmain:begin B A main:end ä¸¤æ¬¡è¿è¡Œç»“æœä¸ä¸€æ ·\nå¤šä»»åŠ¡OSçš„å¹¶å‘ ï¼ˆå‡è®¾ç³»ç»Ÿåªæœ‰ä¸€ä¸ªCPUï¼‰\nOSå¯ä»¥åŒæ—¶åŠ è½½å¤šä¸ªè¿›ç¨‹\næ¯ä¸ªè¿›ç¨‹éƒ½æ˜¯ç‹¬ç«‹çš„è¿›ç¨‹ï¼Œäº’ä¸å¹²æ‰°\nå³ä½¿æ˜¯rootæƒé™çš„è¿›ç¨‹ï¼Œä¹Ÿä¸èƒ½ç›´æ¥è®¿é—®æ“ä½œç³»ç»Ÿå†…æ ¸çš„å†…å­˜ æ¯éš”ä¸€æ®µæ—¶é—´ï¼Œå°±åˆ‡æ¢åˆ°å¦ä¸€ä¸ªè¿›ç¨‹\nå¹¶å‘æ€§çš„æ¥æºï¼š è¿›ç¨‹ä¼šè°ƒç”¨OSçš„API writeï¼ˆfd,buf,11 TiBï¼‰ï¼ˆTiBå®ï¼‰ writeçš„å®ç°æ˜¯OSçš„ä¸€éƒ¨åˆ† x86-64åº”ç”¨ç¨‹åºæ‰§è¡Œsyscallåå°±è¿›å…¥OSæ‰§è¡Œ ç±»ä¼¼ä¸­æ–­å¤„ç†ç¨‹åº æ­¤æ—¶OSå…è®¸writeçš„åŒæ—¶ï¼Œè®©å¦ä¸€ä¸ªè¿›ç¨‹æ‰§è¡Œ å¦‚ï¼šå¦ä¸€ä¸ªè¿›ç¨‹æ‰§è¡Œäº†read(fd,buf,512 MiB)è¯»å–åŒä¸€æ–‡ä»¶ OSä»£ç å¹¶å‘äº†ï¼š OS APIå®ç°éœ€è¦è€ƒè™‘å¹¶å‘ è™½ç„¶è¿›ç¨‹åœ¨åœ°å€ç©ºé—´ä¸­æ˜¯ç‹¬ç«‹çš„ï¼Œä½†æ˜¯OSä¸­çš„å¯¹è±¡æ˜¯è¢«è¿›ç¨‹å…±äº«çš„ å¹¶å‘ä¸å¹¶è¡Œçš„åŒºåˆ« å¹¶å‘ï¼š å¤šä¸ªæ‰§è¡Œæµå¯ä»¥ä¸æŒ‰ç…§ä¸€ä¸ªç‰¹å®šçš„é¡ºåºæ‰§è¡Œ å¹¶è¡Œï¼šå…è®¸å¤šä¸ªæ‰§è¡ŒæµçœŸæ­£åœ°åŒæ—¶æ‰§è¡Œ éœ€è¦å¤šä¸ªå¤„ç†å™¨ å¤„ç†å™¨æ•°é‡ å…±äº«å†…å­˜ï¼Ÿ å…¸å‹çš„å¹¶å‘OS å¹¶å‘ï¼Ÿå¹¶è¡Œï¼Ÿ å• å…±äº«å†…å­˜ OSå†…æ ¸/å¤šçº¿ç¨‹ç¨‹åº å¹¶å‘ä¸å¹¶è¡Œ å¤š å…±äº«å†…å­˜ OSå†…æ ¸/å¤šçº¿ç¨‹ç¨‹åº/GPU Kernel å¹¶å‘ã€å¹¶è¡Œ å¤š ä¸å…±äº«å†…å­˜ åˆ†å¸ƒå¼ç³»ç»Ÿï¼ˆæ¶ˆæ¯é€šä¿¡ï¼‰ å¹¶å‘ã€å¹¶è¡Œ çº¿ç¨‹ çº¿ç¨‹ï¼š A single process can contain multiple threads, all of which are executing the same program. These threads share the same global memory (data and heap segments), but each thread has its own stack (automatic variables).\nå¤šä¸ªæ‰§è¡Œæµå¹¶å‘/å¹¶è¡Œæ‰§è¡Œï¼Œä¸”å…±äº«å†…å­˜\nä¸¤ä¸ªæ‰§è¡Œæµå…±äº«ä»£ç å’Œæ‰€æœ‰å…¨å±€å˜é‡ï¼ˆæ•°æ®åŒºã€å †åŒºï¼‰ i.e. C++ä¸­ï¼Œæ•°æ®åŒºå°±æ˜¯å…¨å±€/é™æ€åŒº çº¿ç¨‹é—´æŒ‡ä»¤çš„æ‰§è¡Œé¡ºåºæ˜¯ä¸ç¡®å®šï¼ˆnon-deterministicï¼‰çš„ å…±äº«ï¼šå…±äº«ä»£ç åŒº(å½“å‰è¿›ç¨‹çš„ä»£ç )ã€æ•°æ®åŒºå’Œå †ï¼Œä½†ä¸å…±äº«å¯„å­˜å™¨å’Œæ ˆ //t1.c //å…±äº«å…¨å±€å˜é‡çš„åæœ #include\u0026lt;stdio.h\u0026gt; #include\u0026lt;pthread.h\u0026gt; #include\u0026#34;mythreads.h\u0026#34; static volatile int counter = 0; void * mythread( void*arg ) { printf( \u0026#34;%s: begin\\n\u0026#34;, (char*)arg ); int i; for( int i = 0 ; i \u0026lt; 1e7; i++ ) counter++; printf(\u0026#34;%s: done\\n\u0026#34;, (char*)arg); return NULL; } int main( int argc, char* argv[]) { pthread_t p1,p2; int rc; printf( \u0026#34;main:begin ( counter = %d )\\n\u0026#34;, counter ); char* ch1 = \u0026#34;A\u0026#34;; char* ch2 = \u0026#34;B\u0026#34;; Pthread_create( \u0026amp;p1, NULL, mythread, ch1 ); //Cè¯­è¨€ç¼–è¯‘å™¨å…è®¸éšå«æ€§çš„å°†ä¸€ä¸ªé€šç”¨æŒ‡é’ˆè½¬æ¢ä¸ºä»»æ„ç±»å‹çš„æŒ‡é’ˆï¼ŒåŒ…æ‹¬const *è€ŒCï¼‹ï¼‹ä¸å…è®¸å°†const è½¬æ¢ä¸ºéconst*ï¼Œæ‰€ä»¥ä¸èƒ½ç›´æ¥ä¼ å…¥\u0026#34;A\u0026#34; Pthread_create( \u0026amp;p2, NULL, mythread, ch2 ); Pthread_join( p1,NULL ); Pthread_join( p2,NULL ); printf(\u0026#34;main:done with both ( counter = %d )\\n\u0026#34;, counter); } //mythreads.h //æŠŠAPIå°è£…èµ·æ¥ï¼Œæ˜“äºä½¿ç”¨ #include\u0026lt;pthread.h\u0026gt; // #include\u0026lt;assert.h\u0026gt; void Pthread_create (pthread_t *__restrict __newthread, const void* __attr, void *(*__start_routine) (void *), void *__restrict __arg) { pthread_create( __newthread, __attr, __start_routine, __arg ); } void Pthread_join(pthread_t __th, void **__thread_return) { pthread_join( __th, __thread_return ); } void *Malloc(unsigned size) { return malloc(size); } è¾“å‡ºä¸ºï¼š\nmain:begin ( counter = 0 ) A: begin B: begin A: done B: done main:done with both ( counter = 12275324 ) å¯ä»¥çœ‹åˆ°ç»“æœä¸æ˜¯200000, è€Œæ˜¯12275324\nå†è¿è¡Œä¸€æ¬¡ï¼š\nmain:begin ( counter = 0 ) A: begin B: begin B: done A: done main:done with both ( counter = 10467369 ) ä¸¤æ¬¡è¿è¡Œçš„ç»“æœéƒ½ä¸ä¸€æ ·ï¼\nå¤šå¤„ç†å™¨ç¼–ç¨‹çš„å›°éš¾ åŸå­æ€§ï¼š å³ä½¿æ˜¯i++ï¼Œä¹Ÿä¼šè¢«åˆ†æˆå‡ ä¸ªæŒ‡ä»¤ é¡ºåºæ€§ï¼šä»£ç çš„ç¼–è¯‘å™¨ä¼˜åŒ– å¯è§æ€§ï¼š CPUå¯ä»¥ä¸æŒ‰é¡ºåºæ‰§è¡ŒæŒ‡ä»¤ã€‚æ²¡æœ‰å‰åä¾èµ–å°±ä¼šè¢«ä¼˜åŒ–ï¼ˆå¹¶è¡Œæ‰§è¡Œï¼‰ å¹¶å‘æœ¯è¯­ ä¸´ç•ŒåŒº( critical section )ï¼š è®¿é—®å…±äº«èµ„æºçš„ä¸€æ®µä»£ç  ç«æ€æ¡ä»¶( race condition )ï¼š å¤šä¸ªæ‰§è¡Œçº¿ç¨‹å¤§è‡´åŒæ—¶è¿›å…¥è¿›é˜¶åŒºæ—¶ï¼Œéƒ½è¯•å›¾æ›´æ–°å…±äº«èµ„æºçš„æƒ…å†µ ä¸ç¡®å®šæ€§( indeterminate )ï¼š ç¨‹åºå«æœ‰ç«æ€æ¡ä»¶ï¼Œå…¶è¾“å‡ºä¸ç¡®å®š åŒæ­¥åŸè¯­( synchronization primitive ):ç¡¬ä»¶æä¾›æŒ‡ä»¤ï¼Œåœ¨å…¶ä¸Šæ„å»ºåŒæ­¥åŸè¯­,å®ç°åŸå­æ€§ äº’æ–¥åŸè¯­( mutual exclusion )ï¼š çº¿ç¨‹åº”è¯¥ä½¿ç”¨äº’æ–¥åŸè¯­ï¼Œä»¥ä¿è¯åªæœ‰ä¸€ä¸ªçº¿ç¨‹è¿›å…¥ä¸´ç•ŒåŒºï¼Œä»è€Œé¿å…å‡ºç°ç«æ€ï¼Œå¹¶äº§ç”Ÿç¡®å®šçš„ç¨‹åºè¾“å‡º æ¦‚å¿µï¼šäº’æ–¥ äº’æ–¥ï¼ˆmutual exclusionï¼‰\ntypedef struct{ ... }lock_tl void lock(lock_t *lk);//è¯•å›¾è·å¾—é”çš„ç‹¬å è®¿é—®ï¼ŒæˆåŠŸè·å¾—åè¿”å› void unlock(lock_t *lk);//é‡Šæ”¾é”çš„ç‹¬å ç©ºé—´ æˆ‘ä»¬å‡è®¾CPUæœ‰ä¸‰ç§æŒ‡ä»¤ï¼š\nloadï¼š mem -\u0026gt; reg store: reg -\u0026gt; mem æœ¬åœ°è®¡ç®—ï¼š çº¿ç¨‹çš„å¯„å­˜å™¨åšä¸€äº›è®¡ç®—ï¼Œç»“æœå­˜å…¥å¯„å­˜å™¨ å…±äº«å†…å­˜ä¸Šäº’æ–¥çš„å›°éš¾ loadå’Œstoreçš„ç¼ºé™·ï¼ˆä¸€ä¸ªåªèƒ½çœ‹ï¼Œä¸€ä¸ªåªèƒ½å†™ï¼‰\nç°ä»£å¤„ç†å™¨load/storeå¯èƒ½åœ¨æ‰§è¡Œæ—¶è¢«ä¹±åº\nå¹¶å‘ä¸çŠ¶æ€æœº ç¨‹åº = æœ‰é™çŠ¶æ€æœº = æœ‰å‘å›¾ å›¾è®ºæ˜¯ç†è§£ç¨‹åºçš„é‡è¦å·¥å…·\nä¸ç¡®å®š(non-deterministic)çš„æŒ‡ä»¤å¯èƒ½æœ‰å¤šä¸ªçŠ¶æ€\nè·å–å¤„ç†å™¨çš„â€æ—¶é—´æˆ³â€œç”¨äºç²¾ç¡®å®šæ—¶\nrdtsc/rdtscp æœºå™¨æä¾›çš„â€çœŸâ€œéšæœºæ•°\nrdrand syscall\nä¸€èˆ¬ç”¨äºå”¯ä¸€ä¸ç¡®å®šæ€§çš„æ¥æº read çŠ¶æ€æœºæ¨¡å‹ï¼šåº”ç”¨ åœ¨ç¡¬ä»¶ä¸Šçš„åº”ç”¨ï¼š é«˜æ€§èƒ½å¤„ç†å™¨å®ç° è¶…æ ‡é‡å¤„ç†å™¨ åŒä¸€æ—¶é—´æ‰§è¡Œå¤šæ¡æŒ‡ä»¤ Time - Travel Debugging ç¨‹åºæ‰§è¡Œéšæ—¶é—´æ¸è¿›ï¼š$s_0 \\rarr s_1 \\rarr \\dots$â€‹\nè®°å½•æ‰€æœ‰$s_i$çš„å¼€é”€å¤ªå¤§ï¼ˆ$s_i$â€‹ç”±å†…å­˜å’Œå¯„å­˜å™¨ç»„æˆï¼‰\nè®°å½•åˆå§‹çŠ¶æ€ï¼Œå’Œæ¯æ¡æŒ‡ä»¤å‰åçŠ¶æ€çš„diff\nsi/rsi\nRecord \u0026amp; Replay ç¡®å®šçš„ç¨‹åºä¸éœ€è¦ä»»ä½•è®°å½•ï¼Œåªéœ€è¦å†æ‰§è¡Œä¸€æ¬¡\nåªéœ€è®°å½•non-deterministicæŒ‡ä»¤çš„æ•ˆæœï¼ˆside-effectï¼‰ï¼Œå°±å¯å®ç°é‡æ”¾ çº¿ç¨‹é—´é€šä¿¡ITC (1)é€šä¿¡çº¿ç¨‹ä½äºåŒä¸€ä¸ªè¿›ç¨‹ä¸­ï¼Œå…±äº«ç›¸åŒçš„åœ°å€ç©ºé—´\n(2)é€šä¿¡çº¿ç¨‹ä½äºä¸åŒçš„è¿›ç¨‹ä¸­ï¼Œæ‹¥æœ‰ä¸åŒçš„åœ°å€ç©ºé—´\nç›¸åŒè¿›ç¨‹ å¯¹äºæƒ…å†µ(1)ï¼Œçº¿ç¨‹é—´çš„é€šä¿¡å¯ä»¥ç›´æ¥é€šè¿‡è®¿é—®å…±äº«çš„åœ°å€ç©ºé—´å®ç°ä¿¡æ¯äº¤æ¢\nä¸åŒè¿›ç¨‹ å¯¹äºæƒ…å†µ(2), é‡‡ç”¨è¿›ç¨‹é—´é€šä¿¡IPC\nâ€¢ IPCæœºåˆ¶ä¸»è¦åŒ…æ‹¬:ä¿¡å·(Signal)ã€ç®¡é“(Pipe)ã€ä¿¡å·é‡ã€å…±äº«å†…å­˜(Shared Memory)ã€æ¶ˆæ¯é˜Ÿåˆ—(Message Queue)ã€å¥—æ¥å­—(Socket)\nâ€¢ ä¸çº¿ç¨‹é—´é€šä¿¡æœºåˆ¶ä¸åŒï¼Œè¿›ç¨‹é—´é€šä¿¡æœºåˆ¶éœ€è¦æ‰“ç ´è¿›ç¨‹é—´åœ°å€ç©ºé—´çš„éš”ç¦»\næŸäº›OSå‘è¡Œç‰ˆ(.å…¶å®å°±æ˜¯æ¬§æ‹‰ )å¢åŠ çš„IPCæœºåˆ¶ï¼šå…±äº«å†…å­˜ï¼Œ æ¶ˆæ¯é€šä¿¡\nå…±äº«å†…å­˜æ˜¯ä¸€ç§åœ¨è¿›ç¨‹é—´é«˜æ•ˆåœ°ä¼ é€’å¤§é‡ä¿¡æ¯çš„é€šä¿¡æ–¹å¼ã€‚ä½†åœ¨å…±äº«å†…å­˜æœºåˆ¶ä¸‹ï¼Œä¿¡æ¯çš„å‘é€æ–¹ä¸å…³å¿ƒä¿¡æ¯ç”±è°æ¥æ”¶ï¼Œè€Œä¿¡æ¯çš„æ¥æ”¶æ–¹ä¹Ÿä¸å…³å¿ƒä¿¡æ¯æ˜¯ç”±è°å‘é€çš„ï¼Œè¿™å­˜åœ¨å®‰å…¨éšæ‚£ã€‚ æ¶ˆæ¯ä¼ é€’å…è®¸è¿›ç¨‹ä¸å¿…é€šè¿‡å…±äº«å†…å­˜åŒºæ¥å®ç°é€šä¿¡ï¼Œè€Œæ˜¯é€šè¿‡äº¤æ¢æ¶ˆæ¯çš„æ–¹å¼æ¥å®ç°é€šä¿¡ã€‚æ¶ˆæ¯ ä¼ é€’å…³æ³¨ä¿¡æ¯çš„å‘é€è€…ä¸æ¥æ”¶è€…ï¼Œé€šè¿‡ä½¿ç”¨å†…æ ¸æ‹·è´ä¼ é€’çš„ä¿¡æ¯ï¼Œå®Œæˆè¿›ç¨‹é—´çš„ä¿¡æ¯ä¼ é€’ Threading API man -k pthread\n//p212, çº¿ç¨‹API #include\u0026lt;stdio.h\u0026gt; #include\u0026lt;pthread.h\u0026gt; #include\u0026#34;mythreads.h\u0026#34; #include\u0026lt;stdlib.h\u0026gt; typedef struct myarg_t{ int a; int b; }myarg_t; typedef struct myret_t{ int x; int y; }myret_t; void * mythread( void*arg ) { myarg_t *m = (myarg_t *)arg; printf( \u0026#34;args: %d %d\\n\u0026#34;, m -\u0026gt; a, m -\u0026gt; b ); myret_t *r = Malloc(sizeof( myret_t )); r -\u0026gt; x = 1; r -\u0026gt; y = 2; return (void*) r; } int main( int argc, char* argv[]) { pthread_t p; int rc; myret_t *m; //å°†è¿”å›å€¼æ‰“åŒ… myarg_t args;//å°†å‚æ•°æ‰“åŒ… args.a = 10; args.b = 20; Pthread_create( \u0026amp;p, NULL, mythread, \u0026amp;args ); Pthread_join( p, ( void **) \u0026amp;m );//å°†çº¿ç¨‹è¿”å›å€¼èµ‹ç»™m printf(\u0026#34;returned: %d %d\\n\u0026#34;, m -\u0026gt; x, m -\u0026gt; y ); } è¾“å‡ºä¸ºï¼š\nargs: 10 20 returned: 1 2 çº¿ç¨‹åˆ›å»º \u0026lt;pthread.h\u0026gt;\n/* Create a new thread, starting with execution of START-ROUTINE getting passed ARG. Creation attributed come from ATTR. The new handle is stored in *NEWTHREAD. */ extern int pthread_create (pthread_t *__restrict __newthread, //çº¿ç¨‹çš„æŒ‡é’ˆ const pthread_attr_t *__restrict __attr, //çº¿ç¨‹å…·æœ‰çš„å±æ€§ï¼ŒåŒ…æ‹¬æ ˆå¤§å°ï¼Œä¼˜å…ˆçº§ç­‰ã€‚ ä¸€èˆ¬ä¼ å…¥NULL void *(*__start_routine) (void *),//çº¿ç¨‹è¦è¿è¡Œçš„å‡½æ•°çš„æŒ‡é’ˆï¼Œæ¥å—void*å‚æ•°ï¼Œè¿”å› void* //å¯ä»¥è‡ªç”±æ›´æ”¹å‚æ•°/è¿”å›ç±»å‹ void *__restrict __arg) __THROWNL __nonnull ((1, 3));//å‡½æ•°çš„å‚æ•°ï¼Œå¯ä¼ å…¥ç»“æ„ä½“ï¼Œä»¥å®ç°ä¼ å…¥å¤šä¸ªå‚æ•° çº¿ç¨‹å®Œæˆ /* Make calling thread wait for termination of the thread TH. The exit status of the thread is stored in *THREAD_RETURN, if THREAD_RETURN is not NULL. This function is a cancellation point and therefore not marked with __THROW. */ extern int pthread_join (pthread_t __th, void **__thread_return); /* ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯çº¿ç¨‹çš„æŒ‡é’ˆ ç¬¬äºŒä¸ªå‚æ•°æ˜¯çº¿ç¨‹è¿è¡Œçš„å‡½æ•°çš„è¿”å›å€¼çš„æŒ‡é’ˆ */ é” //ä¸Šé”å’Œè§£é” extern int pthread_mutex_lock (pthread_mutex_t *__mutex) extern int pthread_mutex_unlock (pthread_mutex_t *__mutex) //é”å¿…é¡»åˆå§‹åŒ–ï¼Œä¸¤ç§æ–¹å¼ pthread_mutex_t lock = PTHREAD_MUTEX_INITIALIZER; pthread_mutex_init(*lock, NULL) //é”ä½¿ç”¨å®Œåå¿…é¡»é”€æ¯ extern int pthread_mutex_destroy (pthread_mutex_t *__mutex) //mythread.h #include\u0026lt;pthread.h\u0026gt; #include\u0026lt;stdlib.h\u0026gt; #include\u0026lt;assert.h\u0026gt; typedef pthread_cond_t cond_t; typedef pthread_mutex_t mutex_t; void Pthread_create (pthread_t *__restrict __newthread, const void* __attr, void *(*__start_routine) (void *), void *__restrict __arg) { int rc = pthread_create( __newthread, __attr, __start_routine, __arg ); assert( rc == 0 ); } void Pthread_join(pthread_t __th, void **__thread_return) { int rc = pthread_join( __th, __thread_return ); assert( rc == 0 ); } void *Malloc(unsigned size) { return malloc(size); } void Pthread_mutex_lock( pthread_mutex_t *mutex ) { int rc = pthread_mutex_lock(mutex); assert( rc == 0 ); } void Pthread_mutex_unlock( pthread_mutex_t *mutex ) { int rc = pthread_mutex_unlock(mutex); assert( rc == 0 ); } void Pthread_mutex_init( pthread_mutex_t *__mutex, const void*__mutexattr ) { int rc = pthread_mutex_init(__mutex, NULL); assert( rc == 0 ); } void Pthread_mutex_destroy( pthread_mutex_t *__mutex ) { int rc = pthread_mutex_destroy(__mutex); assert( rc == 0 ); } void Pthread_cond_init( pthread_cond_t *__restrict __cond, const void*__restrict __cond_attr ) { int rc = pthread_cond_init( __cond, __cond_attr); assert( rc == 0 ); } void cond_destroy( pthread_cond_t *__restrict __cond ) { int rc = pthread_cond_destroy(__cond); assert( rc == 0 ); } void Pthread_cond_wait(pthread_cond_t *__restrict __cond, pthread_mutex_t *__restrict __mutex) { int rc = pthread_cond_wait(__cond, __mutex); assert(rc ==0 ); } void Pthread_cond_signal(pthread_cond_t *__cond) { int rc = pthread_cond_signal(__cond); assert( rc==0 ); } ä½¿ç”¨é”ï¼š\npthread_mutex_t lock; Pthread_mutex_init( \u0026amp;lock ,NULL );//åˆå§‹åŒ–é” Pthread_mutex_lock( \u0026amp;lock );//ä¸Šé”ï¼Œ å¦‚æœé”å·²ç»è¢«å…¶ä»–çº¿ç¨‹æŒæœ‰ï¼Œé‚£ä¹ˆè¯¥è°ƒç”¨ä¸ä¼šè¿”å›ï¼Œç›´åˆ°è·å¾—è¯¥é”ï¼ˆæ„å‘³ç€æŒæœ‰è¯¥é”çš„çº¿ç¨‹å·²ç»å°†é”é‡Šæ”¾ï¼‰ x = x +1; Pthread_mutex_unlock( \u0026amp;lock ); æ¡ä»¶å˜é‡ /* Wait for condition variable COND to be signaled or broadcast. MUTEX is assumed to be locked before. This function is a cancellation point and therefore not marked with __THROW. */ extern int pthread_cond_wait (pthread_cond_t *__restrict __cond, pthread_mutex_t *__restrict __mutex); /* Wake up one thread waiting for condition variable COND. */ extern int pthread_cond_signal (pthread_cond_t *__cond); //æ¡ä»¶å˜é‡ä¹Ÿå¿…é¡»åˆå§‹åŒ–ï¼Œä¸é”ç±»ä¼¼ï¼Œä¸¤ç§æ–¹å¼ï¼š pthread_cond_t cond = PTHREAD_COND_INITIALIZER; pthread_cond_init( __cond, __cond_attr); //é”€æ¯ä¹Ÿç±»ä¼¼ /* Destroy condition variable COND. */ extern int pthread_cond_destroy (pthread_cond_t *__cond); //mythreads.h void Pthread_cond_init( pthread_cond_t *__restrict __cond, const void*__restrict __cond_attr ) { int rc = pthread_cond_init( __cond, __cond_attr); assert( rc == 0 ); } void cond_destroy( pthread_cond_t *__restrict __cond ) { int rc = pthread_cond_destroy(__cond); assert( rc == 0 ); } Lock é”çš„çŠ¶æ€ï¼š\navailable acquired æ–¹æ³•ï¼š\nlock(): å°è¯•è·å–é”ï¼Œå¦‚æœé”æ˜¯availableï¼Œåˆ™è·å–é”ï¼Œè¿›å…¥ä¸´ç•ŒåŒº unlock(): ä½¿é”available é”æä¾›äº†æœ€å°ç¨‹åº¦çš„è°ƒåº¦æ§åˆ¶\nçº¿ç¨‹ç”±OSè°ƒåº¦ï¼Œ é”è®©ç¨‹åºå‘˜è·å¾—äº†ä¸€äº›æ§åˆ¶æƒ é€šå¸¸ç”¨ä¸åŒçš„é”ä¿æŠ¤ä¸åŒçš„æ•°æ®ï¼ˆ ç»†ç²’åº¦çš„æ–¹æ¡ˆ ï¼‰\nè¯„ä»·é” æœ‰æ•ˆæ€§ï¼š æä¾›äº’æ–¥ å…¬å¹³æ€§fairness: å½“é”å¯ç”¨æ—¶ï¼Œæ˜¯å¦æ¯ä¸€ä¸ªç«äº‰çº¿ç¨‹æœ‰å…¬å¹³çš„æœºä¼šæŠ¢åˆ°é” æ˜¯å¦æœ‰ç«äº‰é”çš„çº¿ç¨‹ä¼šé¥¿æ­»starve? æ€§èƒ½ performance æ§åˆ¶ä¸­æ–­ æœ€æ—©æä¾›çš„äº’æ–¥è§£å†³æ–¹æ¡ˆä¹‹ä¸€ï¼Œå°±æ˜¯åœ¨ä¸´ç•ŒåŒºå…³é—­ä¸­æ–­ï¼š\nvoid lock(){ DisableInterrupts(); } void unlock(){ EnableInterrupts(); } å‡è®¾åœ¨å•CPUç³»ç»Ÿä¸Šï¼Œè¿™æ®µä»£ç åœ¨ä¸´ç•ŒåŒºå…³é—­ä¸­æ–­ï¼Œä»è€ŒåŸå­åœ°æ‰§è¡Œï¼Œç»“æŸååˆé‡æ–°æ‰“å¼€ä¸­æ–­\nç¼ºç‚¹ï¼š\néœ€è¦å…è®¸æ‰€æœ‰çº¿ç¨‹æ‰§è¡Œç‰¹æƒæ“ä½œï¼ˆå¼€å…³ä¸­æ–­ï¼‰ å³ï¼Œéœ€è¦ä¿¡ä»»æœºåˆ¶ä¸è¢«æ»¥ç”¨ ä¸æ”¯æŒå¤šå¤„ç†å™¨ ä¸­æ–­çš„å¼€å…³åªæ˜¯å¯¹CPUè€Œè¨€ï¼Œå¦‚æœä¸€ä¸ªå¤šä¸ªçº¿ç¨‹è¿è¡Œåœ¨ä¸åŒCPUä¸Šï¼Œå…¶ä¸­ä¸€ä¸ªCPUå…³é—­ä¸­æ–­ï¼Œå…¶ä»–CPUä¾ç„¶å“åº”ä¸­æ–­ï¼Œåœ¨å…¶ä¸Šçš„çº¿ç¨‹ä¾ç„¶èƒ½è¿›å…¥ä¸´ç•ŒåŒº å…³ä¸­æ–­å¯¼è‡´ä¸­æ–­ä¸¢å¤±ï¼Œå¯èƒ½å¯¼è‡´ä¸¥é‡çš„ç³»ç»Ÿé—®é¢˜ æ¯”å¦‚ç£ç›˜å®Œæˆäº†è¯»å–è¯·æ±‚ï¼Œä½†CPUé”™å¤±äº†è¯¥æ¶ˆæ¯ å› æ­¤ï¼Œç”¨å…³ä¸­æ–­æ¥å®ç°äº’æ–¥åŸè¯­çš„æƒ…å†µå¾ˆæœ‰é™\næœ‰äº›æƒ…å†µä¸‹OSè‡ªèº«ä¼šé‡‡ç”¨å…³ä¸­æ–­çš„æ–¹å¼æ¥ä¿è¯è®¿é—®æ•°æ®çš„åŸå­æ€§ï¼Œæ­¤æ—¶è¯¥ç”¨æ³•æ˜¯å¯è¡Œçš„ï¼Œå› ä¸ºOSå†…éƒ¨ä¸å­˜åœ¨ä¿¡ä»»é—®é¢˜ å¾ˆå¤šäººçƒ­è¡·äºç ”ç©¶ä¸ä¾èµ–ç¡¬ä»¶å®ç°çš„é”æœºåˆ¶ï¼Œäº‹å®è¯æ˜ï¼Œåªéœ€å¾ˆå°‘çš„ç¡¬ä»¶æ”¯æŒï¼Œå®ç°é”å°±ä¼šå®¹æ˜“å¾ˆå¤š\ntest-and-set test-and-set instruction, ä¹Ÿç§°ä¸ºatomic exchange, ç”±ç¡¬ä»¶æ”¯æŒ\nå…ˆå®ç°ä¸€ä¸ªä¸ä¾èµ–å®ƒçš„é”ï¼š\n//æƒ³æ³•æ˜¯ï¼š ç”¨ä¸€ä¸ªflagæ¥è¡¨ç¤ºé”æ˜¯å¦è¢«å ç”¨ typedef struct lock_t( int flag; ) lock_t; void init( lock_t *mutex ) { mutex -\u0026gt; flag = 0; // 0 -\u0026gt; lock is available } void lock( lock_t *mutex ) { while( mutex -\u0026gt; flag == 1 ) ; // spin-wait( do nothing ) mutex -\u0026gt; flag = 1; } void unlock( lock_t *mutex ) { mutex -\u0026gt; flag = 0; } è¿™æ®µä»£ç æœ‰ä¸¤ä¸ªé—®é¢˜ï¼š\næ­£ç¡®æ€§ï¼š\nThread` Thread2 ( åˆå§‹æ—¶ï¼Œflag == 0 ) call lock() while( flag == 1 ) interrupt: switch to Thread2 call lock() while( flag == 1 ) flag = 1; interrupt: switch to Thread 1 flag = 1( too ! ) æ€§èƒ½é—®é¢˜ï¼š\nè¿™ä¸ªé”æ˜¯è‡ªæ—‹çš„ï¼Œä¸€ä¸ªçº¿ç¨‹è‡ªæ—‹ç­‰å¾…å¦ä¸€ä¸ªçº¿ç¨‹é‡Šæ”¾é”ï¼Œæµªè´¹æ—¶é—´ å¯¹äºå•CPUï¼Œå› ä¸ºåŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªçº¿ç¨‹ï¼Œä¸”è‡ªæ—‹çš„çº¿ç¨‹æ°¸è¿œä¸ä¼šæ”¾å¼ƒCPU,æœ¬çº¿ç¨‹è‡ªæ—‹æ—¶ï¼ŒæŒæœ‰é”çš„çº¿ç¨‹æ ¹æœ¬æ— æ³•è¿è¡Œï¼Œä¹Ÿä¸å¯èƒ½é‡Šæ”¾é” éœ€è¦æŠ¢å å¼çš„è°ƒåº¦å™¨ï¼ˆ preemptive scheduler , å³ä¸æ–­é€šè¿‡æ—¶é’Ÿä¸­æ–­ä¸€ä¸ªçº¿ç¨‹ï¼Œè¿è¡Œå…¶ä»–çº¿ç¨‹ ) ç”¨test-and-setå®ç°é” åœ¨x86ä¸Šç§°ä¸º xchgæŒ‡ä»¤ï¼Œ ```c int TestAndSet( int *old_ptr, int new ) { int old = *old_ptr; *old_ptr = new; return old; }// è¿”å›old_ptræŒ‡å‘çš„æ—§å€¼ï¼Œå°†old_ptræŒ‡å‘æ–°å€¼ ``` ç¡¬ä»¶ä¿è¯ï¼Œä¸Šè¿°æ“ä½œæ˜¯åŸå­çš„ å¯ä»¥ç†è§£ä¸ºï¼šä¸€ä¸ªå•æ‰€é—¨ä¸ŠæŒ‚ç€é’¥åŒ™(0)ï¼Œä¸¤ä¸ªç”¨æˆ·éƒ½æœ‰ä¸€ä¸ªåç‰Œ(1)ï¼Œç”¨æˆ·æ¯æ¬¡è¿›å‡ºå•æ‰€ï¼Œéœ€è¦æ‹¿æ‰‹ä¸Šçš„ä¸œè¥¿å’Œé—¨ä¸Šçš„ä¸œè¥¿äº¤æ¢ï¼Œç”¨æˆ·éœ€è¦æ‹¿åˆ°é’¥åŒ™æ‰èƒ½è¿›å•æ‰€ã€‚\nç”¨æˆ·ä¸€æ‹¿åç‰Œå’Œé’¥åŒ™äº¤æ¢ï¼Œæ‹¿ç€é’¥åŒ™è¿›äº†å•æ‰€\nç”¨æˆ·äºŒæ‹¿åç‰Œäº¤æ¢ï¼Œæ­¤æ—¶é—¨ä¸Šæ˜¯åç‰Œï¼Œç”¨æˆ·äºŒæ²¡æœ‰æ‹¿åˆ°é’¥åŒ™ï¼Œæ— æ³•è¿›å•æ‰€\nä»–ä¼šä¸€ç›´äº¤æ¢ï¼š\nwhile( TestAndSet( \u0026amp;lock -\u0026gt; flag, 1 ) == 1 ) ; //spin ç”¨æˆ·ä¸€ä»å•æ‰€å‡ºæ¥ï¼Œæ‹¿åç‰Œå’Œæ‰‹ä¸Šçš„é’¥åŒ™äº¤æ¢ï¼Œæ­¤æ—¶é—¨ä¸Šåˆæœ‰é’¥åŒ™äº†\nç¼ºç‚¹ï¼š\nå¦‚ä¸Šè¿° è¯„ä»·è‡ªæ—‹é”ï¼š\næœ‰æ•ˆæ€§ï¼šOK å…¬å¹³æ€§ï¼šä¸æä¾›ä»»ä½•å…¬å¹³æ€§ä¿è¯( å¯¹test-and-setè€Œè¨€ ) æ€§èƒ½ï¼š å•æ ¸ä¸‹å¾ˆå·®ï¼Œå¤šæ ¸ä¸‹è¿˜ä¸é”™ compare-and-exchange æŸäº›ç³»ç»Ÿæä¾›äº†å¦ä¸€ä¸ªç¡¬ä»¶åŸè¯­: compare-and-exchange( on x86 )\n//è¿”å›ptræŒ‡å‘çš„æ—§å€¼ï¼Œå°†ptræŒ‡å‘æ–°å€¼ï¼ˆå¦‚æœæ—§å€¼ä¸æœŸæœ›å€¼ç›¸ç­‰çš„è¯ï¼‰ int CompareAndExchange( int *ptr, int expected, int new ) { int actual = *ptr; if( actual == expected ) *ptr = new; return actual; } è¯¥æŒ‡ä»¤æ¯”test-and-setæ›´å¼ºå¤§\nfetch-and-add int FetchAndAdd( int *ptr ) { int old = *ptr; *ptr = old + 1; return old; } typedef struct lock_t { int ticket; int turn; } lock_t; void lock_init( lock_t *lock ) { lock -\u0026gt; ticket = 0; lock -\u0026gt; turn = 0; } void lock(lock_t *lock) { int myturn = FetchAndAdd( \u0026amp;lock-\u0026gt;ticket ); while( lock-\u0026gt; turn != myturn ) ; //spin } void unlock( lock_t *lock ) { FetchAndAdd( \u0026amp;lock-\u0026gt; turn ); } è§£é‡Šï¼šticketæ˜¯ä¸€ä¸ªå…¨å±€çš„å·ç ï¼Œturnæ˜¯å…¨å±€çš„è½®æ¬¡ã€‚ æ¯ä¸ªç”¨æˆ·ä»ticketå¾—åˆ°è‡ªå·±çš„turnï¼Œ æ¯äº¤æ˜“ä¸€æ¬¡ï¼Œticket++. åªæœ‰åˆ°è¾¾è‡ªå·±çš„turnçš„ç”¨æˆ·æ‰èƒ½è¿›å…¥ä¸´ç•ŒåŒºï¼Œæ¯å½“ä¸€ä¸ªç”¨æˆ·ä»ä¸´ç•ŒåŒºå‡ºæ¥ï¼Œ turn++\nmyturn \u0026lt; turnçš„ç”¨æˆ·åªèƒ½è‡ªæ—‹ æœ¬æ–¹æ³•èƒ½ä¿è¯æ‰€æœ‰çº¿ç¨‹éƒ½èƒ½æŠ¢åˆ°é”ï¼Œåªè¦ä¸€ä¸ªçº¿ç¨‹è·å¾—äº†ticketï¼Œå°±èƒ½è¢«è°ƒåº¦\ntest-and-setæ— æ³•ä¿è¯ è‡ªæ—‹è¿‡å¤šçš„è§£å†³æ–¹æ¡ˆ æˆ‘ä»¬å·²ç»å®ç°äº†æœ‰æ•ˆã€å…¬å¹³ï¼ˆ å€ŸåŠ©ticketï¼‰çš„é”ï¼Œä½†è‡ªæ—‹ä¼šå¯¼è‡´æ€§èƒ½é™ä½ è‡ªæ—‹ä¼šé‡å¤æ£€æŸ¥ä¸€ä¸ªä¸ä¼šæ”¹å˜çš„å€¼ï¼Œæµªè´¹CPUæ—¶é—´ æ–¹æ¡ˆä¸€ yield åœ¨è¦è‡ªæ—‹çš„æ—¶å€™ï¼Œæ”¾å¼ƒCPU void lock() { while( TestAndSet(\u0026amp;flag, 1 ) == 1 ) yield(); //give up the CPU } å‡å®šOSæä¾›åŸè¯­yield()ï¼Œå¯ä»¥è®©çº¿ç¨‹ä»runningå˜ä¸ºready æœ¬è´¨ä¸Šï¼Œå°±æ˜¯deschedule å‡è®¾100ä¸ªçº¿ç¨‹ç«äº‰1ä¸ªé”ï¼Œè¯¥æ–¹æ¡ˆä¼šyield99æ¬¡ï¼Œæ¯”è‡ªæ—‹99æ¬¡å¥½ï¼Œä½†ä»ä¸å¤Ÿå®Œç¾ æ–¹æ¡ˆäºŒ ä½¿ç”¨é˜Ÿåˆ—ï¼š ä¼‘çœ ä»£æ›¿è‡ªæ—‹ 1 typedef struct lock_t { 2 int flag; 3 int guard; 4 queue_t *q; 5 } lock_t; 6 7 void lock_init(lock_t *m) { 8 m-\u0026gt;flag = 0; 9 m-\u0026gt;guard = 0; 10 queue_init(m-\u0026gt;q); 11 } 12 13 void lock(lock_t *m) { 14 while (TestAndSet(\u0026amp;m-\u0026gt;guard, 1) == 1) 15 ; //acquire guard lock by spinning 16 if (m-\u0026gt;flag == 0) { 17 m-\u0026gt;flag = 1; // lock is acquired 18 m-\u0026gt;guard = 0; 19 } else { 20 queue_add(m-\u0026gt;q, gettid()); 21 m-\u0026gt;guard = 0; 22 park(); 23 } 24 } 25 26 void unlock(lock_t *m) { 27 while (TestAndSet(\u0026amp;m-\u0026gt;guard, 1) == 1) 28 ; //acquire guard lock by spinning 29 if (queue_empty(m-\u0026gt;q)) 30 m-\u0026gt;flag = 0; // let go of lock; no one wants it 31 else 32 unpark(queue_remove(m-\u0026gt;q)); // hold lock (for next thread!) 33 m-\u0026gt;guard = 0; 34 } çœ‹ä¸æ‡‚QAQ,ä¸ºå•¥unparkçš„æ—¶å€™ä¸æŠŠflagè®¾ä¸º0å•Šï¼Œè¿™æ ·æ‰€æœ‰å…¶ä»–è¿›ç¨‹éƒ½æ— æ³•è·å¾—é”\nConcurrent Data Structure Based on Lock é€šè¿‡é”ä½¿å¾—æ•°æ®thread safe å¯æ‰©å±•æ€§ï¼š ç†æƒ³çŠ¶æ€ä¸‹çš„å¤šçº¿ç¨‹çš„æ¯ä¸ªçº¿ç¨‹å°±å’Œå•çº¿ç¨‹ä¸€æ ·å¿«ï¼ŒäºŒè€…çš„æ¯”å€¼å°±æ˜¯å¹¶å‘æ–¹æ³•çš„æ‰©å±•æ€§ å¹¶å‘è®¡æ•°å™¨ 1 typedef struct counter_t { 2 int value; 3 pthread_mutex_t lock; 4 } counter_t; 5 6 void init(counter_t *c) { 7 c-\u0026gt;value = 0; 8 Pthread_mutex_init(\u0026amp;c-\u0026gt;lock, NULL); 9 } 10 11 void increment(counter_t *c) { 12 Pthread_mutex_lock(\u0026amp;c-\u0026gt;lock); 13 c-\u0026gt;value++; 14 Pthread_mutex_unlock(\u0026amp;c-\u0026gt;lock); 15 } 16 17 void decrement(counter_t *c) { 18 Pthread_mutex_lock(\u0026amp;c-\u0026gt;lock); 19 c-\u0026gt;value--; 20 Pthread_mutex_unlock(\u0026amp;c-\u0026gt;lock); 21 } 22 23 int get(counter_t *c) { 24 Pthread_mutex_lock(\u0026amp;c-\u0026gt;lock); 25 int rc = c-\u0026gt;value; 26 Pthread_mutex_unlock(\u0026amp;c-\u0026gt;lock); 27 return rc; 28 } æ€§èƒ½ä¸€èˆ¬ æ‰©å±•å¹¶å‘è®¡æ•°å™¨ æ‡’æƒ°è®¡æ•°å™¨sloopy counter: ä¾‹å¦‚ï¼Œåœ¨4CPUæœºå™¨ä¸Šï¼Œæœ‰å››ä¸ªå±€éƒ¨è®¡æ•°å™¨å’Œä¸€ä¸ªå…¨å±€è®¡æ•°å™¨ï¼Œæ¯ä¸ªè®¡æ•°å™¨æœ‰ä¸€æŠŠé”ã€‚\nä¸åŒCPUä¸Šçš„è®¡æ•°å™¨ä¸ä¼šç«äº‰ ä¸ºäº†ä¿æŒå…¨å±€è®¡æ•°å™¨æ›´æ–°ï¼Œå¦‚æœå±€éƒ¨å€¼å¤§äºé˜ˆå€¼Sï¼Œå±€éƒ¨å€¼å°±è¦è½¬ç§»åˆ°å…¨å±€å€¼ï¼ˆæ­¤æ—¶è¦è·å–å…¨å±€é”ï¼‰ é˜ˆå€¼è¶Šå¤§ï¼Œå¯æ‰©å±•æ€§è¶Šå¥½ï¼Œä½†è®¡æ—¶å™¨ç²¾åº¦æ›´ä½ 1 typedef struct counter_t { 2 int global; // global count 3 pthread_mutex_t glock; // global lock 4 int local[NUMCPUS]; // local count (per cpu) 5 pthread_mutex_t llock[NUMCPUS]; // ... and locks 6 int threshold; // update frequency 7 } counter_t; 8 9 // init: record threshold, init locks, init values 10 // of all local counts and global count 11 void init(counter_t *c, int threshold) { 12 c-\u0026gt;threshold = threshold; 13 14 c-\u0026gt;global = 0; 15 pthread_mutex_init(\u0026amp;c-\u0026gt;glock, NULL); 16 17 int i; 18 for (i = 0; i \u0026lt; NUMCPUS; i++) { 19 c-\u0026gt;local[i] = 0; 20 pthread_mutex_init(\u0026amp;c-\u0026gt;llock[i], NULL); 21 } 22 } 23 24 // update: usually, just grab local lock and update local amount 25 // once local count has risen by \u0026#39;threshold\u0026#39;, grab global 26 // lock and transfer local values to it 27 void update(counter_t *c, int threadID, int amt) { 28 pthread_mutex_lock(\u0026amp;c-\u0026gt;llock[threadID]); 29 c-\u0026gt;local[threadID] += amt; // assumes amt \u0026gt; 0 30 if (c-\u0026gt;local[threadID] \u0026gt;= c-\u0026gt;threshold) { // å±€éƒ¨å€¼å¤§äºé˜ˆå€¼ï¼Œtransfer to global 31 pthread_mutex_lock(\u0026amp;c-\u0026gt;glock); 32 c-\u0026gt;global += c-\u0026gt;local[threadID]; 33 pthread_mutex_unlock(\u0026amp;c-\u0026gt;glock); 34 c-\u0026gt;local[threadID] = 0;//æœ¬åœ°å€¼æ¸…0, æ³¨æ„åˆ°ä¸ä¼šä¸å…¶ä»–cpuä¸Šçš„çº¿ç¨‹ç«äº‰ï¼Œå› æ­¤æ˜¯å®‰å…¨çš„ 35 } 36 pthread_mutex_unlock(\u0026amp;c-\u0026gt;llock[threadID]); 37 } 38 39 // get: just return global amount (which may not be perfect) 40 int get(counter_t *c) { 41 pthread_mutex_lock(\u0026amp;c-\u0026gt;glock); 42 int val = c-\u0026gt;global; 43 pthread_mutex_unlock(\u0026amp;c-\u0026gt;glock); 44 return val; // only approximate! 45 } å¹¶å‘é“¾è¡¨ 1 // basic node structureï¼Œå•é“¾è¡¨ 2 typedef struct node_t { 3 int key; 4 struct node_t *next; 5 } node_t; 6 7 // basic list structure (one used per list) 8 typedef struct list_t { 9 node_t *head; 10 pthread_mutex_t lock; 11 } list_t; 12 13 void List_Init(list_t *L) { 14 L-\u0026gt;head = NULL; 15 pthread_mutex_init(\u0026amp;L-\u0026gt;lock, NULL); 16 } 17 18 int List_Insert(list_t *L, int key) { 19 pthread_mutex_lock(\u0026amp;L-\u0026gt;lock); 20 node_t *new = malloc(sizeof(node_t)); 21 if (new == NULL) { 22 perror(\u0026#34;malloc\u0026#34;); 23 pthread_mutex_unlock(\u0026amp;L-\u0026gt;lock); //mallocå¤±è´¥ï¼Œè®°å¾—é‡Šæ”¾é”ï¼ 24 return -1; // fail 25 } 26 new-\u0026gt;key = key; 27 new-\u0026gt;next = L-\u0026gt;head; 28 L-\u0026gt;head = new; 29 pthread_mutex_unlock(\u0026amp;L-\u0026gt;lock); 30 return 0; // success 31 } 32 33 int List_Lookup(list_t *L, int key) { 34 pthread_mutex_lock(\u0026amp;L-\u0026gt;lock); 35 node_t *curr = L-\u0026gt;head; 36 while (curr) { 37 if (curr-\u0026gt;key == key) { 38 pthread_mutex_unlock(\u0026amp;L-\u0026gt;lock); //åœ¨æ„å¤–é€€å‡ºæ—¶unlock 39 return 0; // success 40 } 41 curr = curr-\u0026gt;next; 42 } 43 pthread_mutex_unlock(\u0026amp;L-\u0026gt;lock); 44 return -1; // failure 45 } åœ¨å¼€å¤´lock,ç»“å°¾unlock, æ³¨æ„åˆ°mallocå¤±è´¥åä¹Ÿè¦è®°å¾—unlock è¿™ç§åœ¨ä»£ç ä¸­å¤šæ¬¡unlockçš„å†™æ³•å¾ˆä¸‘é™‹ï¼ åº”è¯¥ä¿®æ”¹ è¦ä¹ˆå‡ºé”™çš„åœ°æ–¹ä¸è¦æ”¾åœ¨ä¸´ç•ŒåŒº è¦ä¹ˆå‡ºé”™æ—¶breakåˆ°ä¸»å¾ªç¯ï¼Œåœ¨ä¸»å¾ªç¯å†…ç»Ÿä¸€unlock è¿™æ˜¯ç²—ç²’åº¦çš„å†™æ³•ï¼Œå¯ä»¥æ›´ç»†ç²’åº¦åœ°ä¼˜åŒ–ï¼š 18 int List_Insert(list_t *L, int key) { 19 //localçš„æ•°æ®ï¼Œä¸éœ€è¦é”ä¿æŠ¤ 20 node_t *new = malloc(sizeof(node_t)); 21 if (new == NULL) { 22 perror(\u0026#34;malloc\u0026#34;); 23 pthread_mutex_unlock(\u0026amp;L-\u0026gt;lock); //å‡ºé”™æ—¶ä¸åœ¨ä¸´ç•ŒåŒºï¼Œæ— éœ€unlock 24 return -1; 25 } 26 new-\u0026gt;key = key; 27 //just lock critical section !!!!! 28 pthread_mutex_lock(\u0026amp;L-\u0026gt;lock); 29 new-\u0026gt;next = L-\u0026gt;head; 30 L-\u0026gt;head = new; 31 pthread_mutex_unlock(\u0026amp;L-\u0026gt;lock); 32 return 0; 33 } 33 int List_Lookup(list_t *L, int key) { int rv = -1;// success / failure 34 pthread_mutex_lock(\u0026amp;L-\u0026gt;lock); 35 node_t *curr = L-\u0026gt;head; 36 while (curr) { 37 if (curr-\u0026gt;key == key) { 38 rv=0; 39 break; // è·³å‡ºä¸»å¾ªç¯ï¼Œåœ¨ä¸»å¾ªç¯å†…ç»Ÿä¸€unlock ï¼ï¼ï¼ 40 } 41 curr = curr-\u0026gt;next; 42 } 43 pthread_mutex_unlock(\u0026amp;L-\u0026gt;lock); 44 return rv; // now both success and failure 45 } æ‰©å±•é“¾è¡¨ è¿‡æ‰‹é”hand-overohand locking: æ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰ä¸€ä¸ªé”ï¼Œæ›¿ä»£ä¹‹å‰æ•´ä¸ªé“¾è¡¨ä¸€ä¸ªé”ï¼Œéå†é“¾è¡¨æ—¶ï¼Œé¦–å…ˆæŠ¢å ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„é”ï¼Œç„¶åé‡Šæ”¾å½“å‰èŠ‚ç‚¹çš„é” å¼€é”€å·¨å¤§ï¼Œæœªå¿…æ¯”å•é”å¿« æ³¨æ„æ§åˆ¶æµçš„å˜åŒ–å¯¼è‡´å‡½æ•°è¿”å›å’Œé€€å‡ºï¼Œè¿™ç§æƒ…å†µä¸‹è¦è®°å¾—é‡Šæ”¾é” å¹¶å‘é˜Ÿåˆ— ç²—ç²’åº¦çš„é”å¾ˆç®€å•ï¼Œæ¥ä¸‹æ¥ä½¿ç”¨ç»†ç²’åº¦çš„é”\nå¯¹é˜Ÿåˆ—å¤´å’Œå°¾å„è®¾ç½®ä¸€ä¸ªé” å› ä¸ºå‡ºé˜Ÿåªè®¿é—®headé”ï¼Œ å…¥é˜Ÿåªè®¿é—®tailé”ï¼Œ ä¸¤æŠŠé”ä½¿å¾—å‡ºé˜Ÿå’Œå…¥å¯¹å¯ä»¥å¹¶å‘æ‰§è¡Œ 1 typedef struct node_t { 2 int value; 3 struct node_t *next; 4 } node_t; 5 6 typedef struct queue_t { 7 node_t *head; 8 node_t *tail; 9 pthread_mutex_t headLock; 10 pthread_mutex_t tailLock; 11 } queue_t; 12 13 void Queue_Init(queue_t *q) { 14 node_t *tmp = malloc(sizeof(node_t)); 15 tmp-\u0026gt;next = NULL; 16 q-\u0026gt;head = q-\u0026gt;tail = tmp; 17 pthread_mutex_init(\u0026amp;q-\u0026gt;headLock, NULL); 18 pthread_mutex_init(\u0026amp;q-\u0026gt;tailLock, NULL); 19 } 20 21 void Queue_Enqueue(queue_t *q, int value) { 22 node_t *tmp = malloc(sizeof(node_t)); 23 assert(tmp != NULL); 24 tmp-\u0026gt;value = value; 25 tmp-\u0026gt;next = NULL; 26 27 pthread_mutex_lock(\u0026amp;q-\u0026gt;tailLock);//å…¥é˜Ÿåªè®¿é—®`tail`é” 28 q-\u0026gt;tail-\u0026gt;next = tmp; 29 q-\u0026gt;tail = tmp; 30 pthread_mutex_unlock(\u0026amp;q-\u0026gt;tailLock); 31 } 32 33 int Queue_Dequeue(queue_t *q, int *value) { 34 pthread_mutex_lock(\u0026amp;q-\u0026gt;headLock);//å‡ºé˜Ÿåªè®¿é—®`head`é” 35 node_t *tmp = q-\u0026gt;head; 36 node_t *newHead = tmp-\u0026gt;next; 37 if (newHead == NULL) { 38 pthread_mutex_unlock(\u0026amp;q-\u0026gt;headLock); 39 return -1; // queue was emptyï¼Œè¿™ç§å†™æ³•ï¼ˆåœ¨å­æ§åˆ¶æµunlockï¼‰å¾ˆä¸‘é™‹ï¼Œåº”è¯¥åƒä¹‹å‰ã€Šé‡å†™å¹¶å‘é“¾è¡¨ã€‹çš„ List_Lookup() ä¸€æ ·æ”¹é€  40 } 41 *value = newHead-\u0026gt;value; 42 q-\u0026gt;head = newHead; 43 pthread_mutex_unlock(\u0026amp;q-\u0026gt;headLock); 44 free(tmp); 45 return 0; 46 } å¹¶å‘æ•£åˆ—è¡¨ æ¯ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ªå¹¶å‘é“¾è¡¨ï¼Œä¹Ÿç§°ä¸ºâ€œæ•£åˆ—æ¡¶â€ æ¯ä¸ªæ•£åˆ—æ¡¶éƒ½æœ‰ä¸€ä¸ªé” 1 #define BUCKETS (101) 2 3 typedef struct hash_t { 4 list_t lists[BUCKETS]; 5 } hash_t; 6 7 void Hash_Init(hash_t *H) { 8 int i; 9 for (i = 0; i \u0026lt; BUCKETS; i++) { 10 List_Init(\u0026amp;H-\u0026gt;lists[i]); 11 } 12 } 13 14 int Hash_Insert(hash_t *H, int key) { 15 int bucket = key % BUCKETS; 16 return List_Insert(\u0026amp;H-\u0026gt;lists[bucket], key); 17 } 18 19 int Hash_Lookup(hash_t *H, int key) { 20 int bucket = key % BUCKETS; 21 return List_Lookup(\u0026amp;H-\u0026gt;lists[bucket], key); 22 } Conclusion Knuthå®šå¾‹ï¼š é¿å…ä¸æˆç†Ÿçš„ä¼˜åŒ– å…ˆæœ€ç®€å•çš„æ–¹æ¡ˆï¼Œä¹Ÿå°±æ˜¯åŠ å¤§é”ï¼ˆ big kernel lock, BKL. in linux kernel ï¼‰å¼€å§‹ï¼Œ å¦‚æœæœ‰æ€§èƒ½é—®é¢˜å†æ”¹è¿› æ§åˆ¶æµå˜åŒ–æ—¶è®°å¾—è·å–å’Œé‡Šæ”¾é” å¢åŠ å¹¶å‘å¹¶ä¸ä¸€å®šèƒ½æé«˜æ€§èƒ½ è¿‡æ‰‹é” Conditional Variable æ¡ä»¶å˜é‡ï¼š ä¸€ä¸ªæ˜¾å¼é˜Ÿåˆ—ï¼Œ å½“conditionä¸æ»¡è¶³æ—¶ï¼Œçº¿ç¨‹æŠŠè‡ªå·±åŠ å…¥é˜Ÿåˆ—ï¼Œwaitingè¯¥æ¡ä»¶ã€‚ å½“å¦å¤–æŸä¸ªçº¿ç¨‹æ”¹å˜è¯¥conditionæ—¶ï¼Œå°±å¯ä»¥å”¤é†’signalä¸€ä¸ªæˆ–è€…å¤šä¸ªï¼ˆå‡å”¤é†’ï¼‰ç­‰å¾…çº¿ç¨‹ï¼Œè®©å®ƒä»¬ç»§ç»­æ‰§è¡Œ\nwait( mutex ): è¯¥å‡½æ•°å‡å®šåœ¨wait()æ—¶ï¼Œ mutexæ˜¯ä¸Šé”çŠ¶æ€ã€‚ wait()çš„èŒè´£æ˜¯é‡Šæ”¾é”ï¼Œ å¹¶è®©è°ƒç”¨è¿›ç¨‹ä¼‘çœ ï¼ˆåŸå­åœ°ï¼‰ã€‚ å½“çº¿ç¨‹è¢«å”¤é†’æ—¶ï¼ˆåœ¨å¦å¤–æŸä¸ªçº¿ç¨‹signalå®ƒä¹‹åï¼‰å®ƒé‡æ–°è·å–é”ï¼Œå†è¿”å›è°ƒç”¨è€…\nè¿™æ ·ä½¿å¾—wait()å†™èµ·æ¥å¾ˆæ–¹ä¾¿ï¼š\nPthread_mutex_lock(\u0026amp;m); while(done==0) Pthread_cond_wait(\u0026amp;c,\u0026amp;m);//waité‡Šæ”¾é”ï¼Œçº¿ç¨‹è¿›å…¥ä¼‘çœ ã€‚ å½“è¢«signalæ—¶ï¼Œwaitè·å–é”ï¼Œå†è¿”å›è°ƒç”¨è€…ã€‚ ä¸ç”¨æ‰‹å†™unlock\\lockäº† Pthread_mutex_unlock(\u0026amp;m); æ€»ç»“ï¼šsignalå’Œwaitæ—¶æ€»æ˜¯æŒæœ‰é” + éœ€è¦çŠ¶æ€å˜é‡\nwait()çš„è¯­ä¹‰å¼ºåˆ¶è¦æ±‚è°ƒç”¨æ—¶å·²ç»æŒæœ‰é”ï¼Œå› æ­¤ä¸éœ€è¦æ“å¿ƒ #include\u0026lt;stdio.h\u0026gt; #include\u0026lt;pthread.h\u0026gt; #include\u0026#34;mythreads.h\u0026#34; #include\u0026lt;stdlib.h\u0026gt; int done = 0; pthread_mutex_t m = PTHREAD_MUTEX_INITIALIZER; pthread_cond_t c = PTHREAD_COND_INITIALIZER; void thr_exit() { Pthread_mutex_lock(\u0026amp;m); done = 1; Pthread_cond_signal(\u0026amp;c); Pthread_mutex_unlock(\u0026amp;m); } void thr_join() { Pthread_mutex_lock(\u0026amp;m); while(done==0)// æ¨èä½¿ç”¨whileå¾ªç¯è€Œä¸æ˜¯if,åŸå› ä¹‹åè§£é‡Š Pthread_cond_wait(\u0026amp;c,\u0026amp;m); Pthread_mutex_unlock(\u0026amp;m); } void * child( void*arg ) { printf( \u0026#34;child\\n\u0026#34; ); thr_exit(); return NULL; } int main( int argc, char* argv[]) { pthread_t p; printf(\u0026#34;parent: begin\\n\u0026#34;); Pthread_create(\u0026amp;p, NULL,child, NULL); thr_join(); printf(\u0026#34;parent: end\\n\u0026#34;); return 0; } æƒ…å†µä¸€ï¼š parentåˆ›å»ºå‡ºå­è¿›ç¨‹åï¼Œè‡ªå·±ç»§ç»­è¿è¡Œï¼ˆå‡è®¾å•æ ¸ï¼‰ï¼Œç„¶åé©¬ä¸Šè°ƒç”¨thr_join() ç­‰å¾…å­è¿›ç¨‹ï¼Œæ­¤æ—¶å®ƒä¼šå…ˆè·å–é”ï¼Œæ£€æŸ¥å­è¿›ç¨‹æ˜¯å¦å®Œæˆï¼ˆè¿˜æ²¡æœ‰ï¼‰ï¼Œç„¶åè°ƒç”¨wait()ï¼Œè®©è‡ªå·±ä¼‘çœ ã€‚ å­çº¿ç¨‹æœ€ç»ˆå¾—ä»¥è¿è¡Œï¼Œæ‰“å°å‡ºâ€œchildâ€ï¼Œ å¹¶è°ƒç”¨thr_exit()å”¤é†’çˆ¶è¿›ç¨‹ï¼Œ è€Œexit()åŸå­åœ°è®¾ç½®doneï¼Œå‘çˆ¶è¿›ç¨‹signalï¼Œ æœ€åçˆ¶è¿›ç¨‹ä¼šè¿è¡Œï¼Œä»wait()è¿”å›å¹¶æŒæœ‰é”ï¼Œ é‡Šæ”¾é”ï¼Œ æ‰“å°å‡ºâ€œparent: endâ€ æƒ…å†µäºŒï¼šå­è¿›ç¨‹åˆ›å»ºåç«‹åˆ»è¿è¡Œï¼Œ è®¾ç½®done = 1ï¼Œ è°ƒç”¨signal()å”¤é†’å…¶ä»–çº¿ç¨‹ï¼ˆè¿™é‡Œæ²¡æœ‰å…¶ä»–çº¿ç¨‹ï¼‰ï¼Œç„¶åç»“æŸã€‚ å‰¯è¿›ç¨‹è¿è¡Œåï¼Œè°ƒç”¨thr_join()æ—¶ï¼Œå‘ç°doneå·²ç»ä¸º1äº†ï¼Œå°±ç›´æ¥è¿”å› parent: begin child parent: end çŠ¶æ€å˜é‡doneæ˜¯å¿…è¦çš„\nå‡å¦‚æ²¡æœ‰ï¼š\nvoid thr_exit() { Pthread_mutex_lock(\u0026amp;m); Pthread_cond_signal(\u0026amp;c); Pthread_mutex_unlock(\u0026amp;m); } void thr_join() { Pthread_mutex_lock(\u0026amp;m); Pthread_cond_wait(\u0026amp;c,\u0026amp;m); Pthread_mutex_unlock(\u0026amp;m); } å‡å¦‚å­çº¿ç¨‹ç«‹åˆ»è¿è¡Œï¼Œä¸”è°ƒç”¨thr_exitï¼Œæ­¤æ—¶å­è¿›ç¨‹signal()ï¼Œæ¡ä»¶å˜é‡ä¸Šæ²¡æœ‰ç¡çœ çš„çº¿ç¨‹ã€‚ çˆ¶çº¿ç¨‹è¿è¡Œæ—¶ï¼Œå°±ä¼šè°ƒç”¨waitï¼ˆï¼‰å¹¶å¡åœ¨è¿™é‡Œï¼Œæ²¡æœ‰çº¿ç¨‹ä¼šsignalï¼ˆï¼‰å®ƒ å‘ä¿¡å·å’Œç­‰å¾…æ—¶åŠ é”ä¹Ÿæ˜¯å¿…è¦çš„\nå‡å¦‚æ²¡æœ‰ï¼š\nvoid thr_exit() { done = 1; Pthread_cond_signal(\u0026amp;c); } void thr_join() { while(done==0)// æ¨èä½¿ç”¨whileå¾ªç¯è€Œä¸æ˜¯if,åŸå› ä¹‹åè§£é‡Š Pthread_cond_wait(\u0026amp;c,\u0026amp;m); } å¦‚æœçˆ¶è¿›ç¨‹è°ƒç”¨thr_join(),æ£€æŸ¥done = 0ï¼Œè¯•å›¾ç¡çœ ï¼Œç„¶è€Œåœ¨è°ƒç”¨waitï¼ˆï¼‰å‰è¢«ä¸­æ–­ï¼ˆå› ä¸ºæ²¡æœ‰é”ï¼Œæ­¤æ—¶å…¶å®ƒè¿›ç¨‹å°±å¯ä»¥æ“çºµä¸´ç•ŒåŒºï¼‰ï¼Œ å­è¿›ç¨‹ä¿®æ”¹å˜é‡ä¸º1,å‘å‡ºsignalï¼ˆï¼‰ï¼Œæ­¤æ—¶æ²¡æœ‰ç¡çœ è¿›ç¨‹ã€‚ çˆ¶è¿›ç¨‹å†æ¬¡è¿è¡Œæ—¶ï¼Œå°±ä¼šå¡åœ¨wait()ï¼Œæ²¡æœ‰çº¿ç¨‹å¯ä»¥å”¤é†’å®ƒ ç”Ÿäº§è€…/æ¶ˆè´¹è€…ï¼ˆæœ‰ç•Œç¼“å†²åŒºï¼‰é—®é¢˜ //30_7.c cond_t cond; mutex_t mutex; int count = 0; void *producer(void *arg) { int i; int loops = (int) arg; for( i=0; i \u0026lt; loops; i++ ) { Pthread_mutex_lock(\u0026amp;mutex); if(count == 1) Pthread_cond_wait(\u0026amp;cond,\u0026amp;mutex); put(i); Pthread_cond_signal(\u0026amp;cond); Pthread_mutex_unlock(\u0026amp;mutex); } } void *consumer( void *arg ) { int i = 0; int loops = (int) arg; for(int i = 0 ; i \u0026lt; loops; i++ ) { pthread_mutex_unlock(\u0026amp;mutex); while( count == 0 )//å¿…é¡»ç”¨while,ä¸èƒ½ç”¨if pthread_cond_wait(\u0026amp;cond,\u0026amp;mutex); int tmp = get(); Pthread_cond_signal(\u0026amp;cond); Pthread_mutex_unlock(\u0026amp;mutex); ptrintf(\u0026#34;%d\\n\u0026#34;,tmp); } } å‡è®¾ä½¿ç”¨if: å‡è®¾æœ‰ä¸¤ä¸ªæ¶ˆè´¹è€…$T_{c1}$å’Œï¼Œ$T_{c2}$ ç”Ÿäº§è€…$T_{p}$, è‹¥$T_{c1}$å…ˆè¿è¡Œï¼Œå¡åœ¨waitï¼Œ æ¥ç€$T_p$è¿è¡Œï¼Œåœ¨ç¼“å†²åŒºæ”¾ä¸€ä¸ªæ•°å­—ï¼Œç„¶åsignalå”¤é†’$T_{c1}$ï¼Œ ç”Ÿäº§è€…ç»§ç»­å¾ªç¯ï¼Œç›´åˆ°å‘ç°ç¼“å†²åŒºæ»¡åç¡çœ  æ­¤æ—¶å¦‚æœ$T_{c2}$æŠ¢å…ˆæ‰§è¡Œï¼Œæ¶ˆè´¹äº†ç¼“å†²åŒºé‡Œçš„å€¼ï¼Œç„¶å$T_{c1}$ä»waitå¤„æ¢å¤è¿è¡Œï¼Œè°ƒç”¨getï¼Œæ­¤æ—¶å‘ç”Ÿerrorï¼ åŸå› åœ¨äºï¼Œç”Ÿäº§è€…signalå”¤é†’äº†$T_{c1}$ï¼Œ ä½†æ˜¯æ²¡æœ‰ä¿è¯$T_{c1}$ç«‹å³æ‰§è¡Œ ï¼ˆæˆ–è€…è¯´ï¼Œæ²¡æœ‰ä¿è¯$T_{c1}$æ‰§è¡Œä¹‹å‰ï¼Œç¼“å†²åŒºæ²¡æœ‰å†å‘ç”Ÿå˜åŒ–ï¼‰ signalçš„è¿™ç§è¯­ä¹‰ç§°ä¸ºMesaè¯­ä¹‰ è§£å†³æ–¹æ¡ˆæ˜¯ï¼š å§‹ç»ˆä½¿ç”¨whileï¼Œè¿™æ ·å½“$T_{c1}$é†’æ¥æ—¶ï¼Œä¼šå†æ¬¡æ£€æŸ¥count==0ï¼Œå‘ç°ä¸ºç¼“å†²åŒº0åˆ™ç»§ç»­waitã€‚è¿™æ ·å°±é¿å…äº†error ä½¿ç”¨ä¸¤ä¸ªæ¡ä»¶å˜é‡ ä¸Šè¿°ä»£ç ä¾ç„¶æœ‰é—®é¢˜ï¼š å‡è®¾$T_{c1}$å’Œ$T_{c2}$å…ˆè¿è¡Œï¼Œéƒ½å¡åœ¨waitï¼Œ $T_{p}$å¼€å§‹è¿è¡Œï¼Œå¾€ç¼“å†²åŒºæ”¾å…¥ä¸€ä¸ªå€¼ï¼Œå‘å‡ºsignalï¼Œ ç»§ç»­å¾ªç¯ï¼Œç›´åˆ°å‘ç°ç¼“å†²åŒºæ»¡åç¡çœ  $T_{c1}$é†’æ¥ï¼Œæ¶ˆè´¹äº†è¿™ä¸ªå€¼ï¼Œç„¶ååœ¨è¯¥æ¡ä»¶ä¸Šsignalï¼Œæ³¨æ„ï¼Œæ­¤æ—¶ç†åº”å”¤é†’$T_{p}$ï¼Œ ä½†äº‹å®ä¸Šæœ‰å¯èƒ½å”¤é†’$T_{c2}$ å‡å¦‚å”¤é†’$T_{c2}$ï¼Œå› ä¸ºç¼“å†²åŒºä¸ºç©ºï¼Œ å®ƒä¼šå¡åœ¨waitï¼Œæ­¤æ—¶ä¸‰ä¸ªçº¿ç¨‹éƒ½å¤„äºç¡çœ  åŸå› åœ¨äºï¼Œ signalæ²¡æœ‰æŒ‡å‘æ€§ï¼Œ æ¶ˆè´¹è€…ä¸åº”å”¤é†’æ¶ˆè´¹è€…ï¼Œåªåº”è¯¥å”¤é†’ç”Ÿäº§è€… è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨ä¸¤ä¸ªæ¡ä»¶å˜é‡ï¼Œ ç”Ÿäº§è€…ç¡åœ¨emptyï¼Œ æ¶ˆè´¹è€…ç¡åœ¨fill ç”±æ­¤ä¹Ÿçœ‹å‡ºï¼Œçº¿ç¨‹å”¤é†’éœ€è¦æ»¡è¶³ä»€ä¹ˆæ¡ä»¶ï¼Œå®ƒå°±åº”è¯¥ç¡åœ¨å“ªä¸ªæ¡ä»¶å˜é‡ä¸Šï¼Œè¿™æ˜¯æ¡ä»¶å˜é‡çš„å‘½åæ–¹å¼ æ¯”å¦‚æ¶ˆè´¹è€…éœ€è¦ç¼“å†²åŒºfillæ‰èƒ½é†’æ¥ï¼Œå› æ­¤è¯¥æ¡ä»¶å˜é‡å°±å‘½åä¸ºfill //30_8.c cond_t empty,fill; mutex_t mutex; int count = 0; void *producer(void *arg) { int i; int loops = (int) arg; for( i=0; i \u0026lt; loops; i++ ) { Pthread_mutex_lock(\u0026amp;mutex); if(count == 1) Pthread_cond_wait(\u0026amp;empty,\u0026amp;mutex); put(i); Pthread_cond_signal(\u0026amp;fill); Pthread_mutex_unlock(\u0026amp;mutex); } } void *consumer( void *arg ) { int i = 0; int loops = (int) arg; for(int i = 0 ; i \u0026lt; loops; i++ ) { pthread_mutex_unlock(\u0026amp;mutex); while( count == 0 ) pthread_cond_wait(\u0026amp;fill,\u0026amp;mutex); int tmp = get(); Pthread_cond_signal(\u0026amp;empty); Pthread_mutex_unlock(\u0026amp;mutex); ptrintf(\u0026#34;%d\\n\u0026#34;,tmp); } } æœ€ç»ˆç‰ˆæœ¬ è¿™æ˜¯æœ€ç»ˆç‰ˆæœ¬ï¼Œç”Ÿäº§è€…åªæœ‰ç¼“å†²åŒºæ»¡äº†çš„æ—¶å€™æ‰ä¼šç¡çœ  å› æ­¤ä¿¡å·é‡å‘½åä¸ºemptyæœ‰ç‚¹åä¸ç¬¦å®ï¼ˆ fillä¹Ÿæ˜¯å¦‚æ­¤ï¼Œäº‹å®ä¸Šç¼“å†²åŒºæœ‰ä¸€ä¸ªå€¼å°±å¯ä»¥å”¤é†’æ¶ˆè´¹è€…äº† ï¼‰ å¯¹get()å’Œput()çš„è°ƒç”¨ä¿è¯ä¸Šäº†é” //30_9.c ç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜æœ€ç»ˆç‰ˆ int buffer[MAX]; int fill_ptr = 0; int use_ptr = 0; int count = 0; void put(int value) { buffer[fill_ptr] = value; fill_ptr = (fill_ptr+1)%MAX; count++; } int get()//æ‹¿å–use_ptræŒ‡å‘çš„å€¼ï¼Œuse_ptr++ { int tmp = buffer[use_ptr]; use_ptr = (use_ptr+1)%MAX; count--; return tmp; } cond_t empty,fill; mutex_t mutex; int count = 0; void *producer(void *arg) { int i; int loops = (int) arg; for( i=0; i \u0026lt; loops; i++ ) { Pthread_mutex_lock(\u0026amp;mutex); if(count == MAX) Pthread_cond_wait(\u0026amp;empty,\u0026amp;mutex); put(i); Pthread_cond_signal(\u0026amp;fill); Pthread_mutex_unlock(\u0026amp;mutex); } } void *consumer( void *arg ) { int i = 0; int loops = (int) arg; for(int i = 0 ; i \u0026lt; loops; i++ ) { pthread_mutex_unlock(\u0026amp;mutex); while( count == 0 ) pthread_cond_wait(\u0026amp;fill,\u0026amp;mutex); int tmp = get(); Pthread_cond_signal(\u0026amp;empty); Pthread_mutex_unlock(\u0026amp;mutex); ptrintf(\u0026#34;%d\\n\u0026#34;,tmp); } } è¦†ç›–æ¡ä»¶ signalåªä¼šå”¤é†’ä¸€ä¸ªçº¿ç¨‹ è€ƒè™‘ä¸€ä¸ªå†…å­˜åˆ†é…ç¨‹åºã€‚ å½“æ²¡æœ‰ç©ºé—²å†…å­˜æ—¶ï¼Œ $T_{c1}$å’Œ$T_{c2}$å„è‡ªallocate1000å’Œ10å­—èŠ‚ã€‚ å®ƒä»¬éƒ½å› æ­¤å¡åœ¨wait æ­¤æ—¶$T_{p}$ freeäº†50å­—èŠ‚ï¼Œå®ƒå‘å‡ºsignalï¼Œæ­¤æ—¶æœ‰å¯èƒ½å”¤é†’çš„æ˜¯$T_{c1}$ï¼Œ åè€…å› ä¸ºå†…å­˜ä¸å¤Ÿï¼Œä¾ç„¶ç»§ç»­ç¡çœ  ä¸Šè¿°ä»£ç å› æ­¤æ— æ³•æ­£å¸¸å·¥ä½œ è§£å†³æ–¹æ¡ˆæ˜¯é‡‡ç”¨å¹¿æ’­çš„signal, å³pthread_cond_broadcast() ä»£æ›¿pthread_cond_signal,å”¤é†’æ‰€æœ‰ç­‰å¾…çº¿ç¨‹ï¼Œè¿™ä¸ªæ¡ä»¶å˜é‡ç§°ä¸ºå¹¿æ’­æ¡ä»¶covering condition ä¼šå½±å“æ€§èƒ½ è¯¥æ–¹æ¡ˆè™½ç„¶å¾ˆç¬¨ï¼Œä½†æœ‰æ—¶å¾ˆæœ‰ç”¨ å½“ç„¶ï¼Œ30_8.cçš„ä»£ç ä¹Ÿå¯ä»¥é‡‡ç”¨æ­¤è§£å†³æ–¹æ¡ˆã€‚ ä½†æˆ‘å½“æ—¶æœ‰æ›´å¥½çš„åŠæ³•ï¼ˆç”¨ä¸¤ä¸ªæ¡ä»¶å˜é‡ï¼‰ ä¿¡å·é‡ defï¼š æœ‰ä¸€ä¸ªæ•´æ•°å€¼çš„å¯¹è±¡ï¼Œå¯ä»¥ç”¨sem_wait()å’Œsem_post()æ“ä½œï¼ˆ in Posix ï¼‰\nå› æ­¤è¦åˆå§‹åŒ– #include\u0026lt;semaphore.h\u0026gt; sem_t s; sem_init(\u0026amp;s, 0 , 0); ç¬¬äºŒä¸ªå‚æ•°ä¸€èˆ¬è®¾ä¸º0,è¡¨ç¤ºè¯¥ä¿¡å·é‡åœ¨åŒä¸€ä¸ªè¿›ç¨‹çš„å¤šä¸ªçº¿ç¨‹å†…è´¡çŒ® int sem_wait(sem_t *s) { //decrement the value of semaphore s by one //wait if value of semaphore s is a negative } int sem_post(sem_t *s) { //increment the value of semaphore s by one //if there are one or more threads waiting, wake one } åœ¨è¿™ä¸ªå®ç°ä¸­ï¼Œ ä¿¡å·é‡çš„å€¼ä¸ºè´Ÿæ•°æ—¶ï¼Œè¯¥å€¼å°±æ˜¯ç­‰å¾…çº¿ç¨‹çš„ä¸ªæ•°\nä¿¡å·é‡æœ‰æ—¶å¾ˆéš¾è®¾è®¡ï¼Œæ­¤æ—¶è¿˜æ˜¯ä½¿ç”¨æ¡ä»¶å˜é‡æ›´é è°±\näºŒå€¼ä¿¡å·é‡ï¼ˆé”ï¼‰ å¯ä»¥æŠŠä¿¡å·é‡ä½œä¸ºé”(å…¶å€¼è®¾ä¸º1) sem_t m; sem_init(\u0026amp;m, 0, 1); //ä¸‹æ–‡è§£é‡Šä¸ºä½•æ˜¯1 sem_wait(\u0026amp;m); //critical section sem_post(\u0026amp;m); å‡è®¾æœ‰ä¸¤ä¸ªçº¿ç¨‹ï¼Œ$T_{1}$è°ƒç”¨sem_wait()ï¼Œå°†ä¿¡å·é‡å€¼å‡ä¸º0, å› ä¸º0ä¸æ˜¯è´Ÿæ•°ï¼Œå› æ­¤$T_{c1}$ä»waitè¿”å›å¹¶ç»§ç»­ï¼Œå®ƒå¯ä»¥è‡ªç”±è¿›å…¥ä¸´ç•ŒåŒºï¼Œ è‹¥æ²¡æœ‰å…¶ä»–çº¿ç¨‹å°è¯•è·å–é”ï¼Œå½“$T_{1}$è°ƒç”¨sem_post()æ—¶ï¼Œä¼šå°†ä¿¡å·é‡ç½®ä¸º1 å¦‚æœ$T_{1}$æŒæœ‰é”æ—¶ï¼Œ$T_{2}$å°è¯•è·å–é”ï¼ˆå³è°ƒç”¨sem_wait()ï¼‰ï¼Œæ­¤æ—¶å®ƒä¼šå°†ä¿¡å·é‡å‡ä¸º-1ã€‚ç„¶åå¡åœ¨è¿™é‡Œã€‚ $T_{1}$å†æ¬¡è¿è¡Œï¼Œæ‰§è¡Œsem_post()ï¼Œ å°†ä¿¡å·é‡å€¼å¢åŠ åˆ°0,å”¤é†’ç­‰å¾…çš„çº¿ç¨‹ï¼ˆ$T_{2}$ï¼‰ï¼Œç„¶å$T_{2}$å°±èƒ½è·å–é” å½“$T_{2}$æ‰§è¡Œç»“æŸæ—¶ï¼Œæ‰§è¡Œsem_post()ï¼Œ å°†ä¿¡å·é‡å€¼å¢åŠ åˆ°1 ä¿¡å·é‡ç”¨ä½œæ¡ä»¶å˜é‡ sem_t s; int count = 0; void *child(void *arg) { printf(\u0026#34;child\\n\u0026#34;); sem_post(\u0026amp;s); return NULL; } int main(int argc, char *argv[]) { sem_init( \u0026amp;s, 0, 0 );//ä¿¡å·é‡è®¾ä¸º0 printf(\u0026#34;parent: begin\\n\u0026#34;); pthread_t c; Pthread_create(c, NULL, child, NULL); sem_wait(\u0026amp;s); // wait here for child printf(\u0026#34;parent: end\\n\u0026#34;); return 0; } è¾“å‡ºä¸ºï¼š\nparent: begin child parent: end è€ƒè™‘ä¸¤ç§æƒ…å†µï¼š å­è¿›ç¨‹æ²¡æœ‰å…ˆè¿è¡Œï¼Œçˆ¶è¿›ç¨‹å…ˆè°ƒç”¨sem_wait(),å°†ä¿¡å·é‡å‡ä¸º-1,çˆ¶è¿›ç¨‹å¡åœ¨waitï¼Œ ç„¶åå­è¿›ç¨‹è¿è¡Œï¼Œè°ƒç”¨sem_post()ï¼Œä¿¡å·é‡å¢åŠ ä¸º0,å”¤é†’çˆ¶çº¿ç¨‹ å­çº¿ç¨‹åœ¨çˆ¶çº¿ç¨‹è°ƒç”¨sem_post()ä¹‹å‰å°±è¿è¡Œç»“æŸï¼Œç»“æœæ­£å¸¸ ç”Ÿäº§è€…/æ¶ˆè´¹è€…ï¼ˆæœ‰ç•Œç¼“å†²åŒºï¼‰é—®é¢˜ è€ƒè™‘ç”¨ä¿¡å·é‡å®ç°ç”Ÿäº§è€…/æ¶ˆè´¹è€…é—®é¢˜ï¼š\nint buffer[MAX]; int fill_ptr = 0; int use_ptr = 0; int count = 0; void put(int value) { buffer[fill_ptr] = value; fill_ptr = (fill_ptr+1)%MAX; count++; } int get()//æ‹¿å–use_ptræŒ‡å‘çš„å€¼ï¼Œuse_ptr++ { int tmp = buffer[use_ptr]; use_ptr = (use_ptr+1)%MAX; count--; return tmp; } sem_t empty,fill; // mutex_t mutex; int count = 0; void *producer(void *arg) { int i; int loops = (int) arg; for( i=0; i \u0026lt; loops; i++ ) { sem_wait(\u0026amp;empty); put(i); sem_post(\u0026amp;fill); } } void *consumer( void *arg ) { int i = 0; int loops = (int) arg; for(int i = 0 ; i \u0026lt; loops; i++ ) { sem_wait(\u0026amp;fill); int tmp = get(); sem_post(\u0026amp;empty); ptrintf(\u0026#34;%d\\n\u0026#34;,tmp); } } è¿™æ®µä»£ç çš„é—®é¢˜åœ¨äºï¼š å¯¹å‡è®¾MAXå¤§äº1,æ­¤æ—¶å¯ä»¥æœ‰ä¸¤ä¸ªç”Ÿäº§è€…ï¼ˆ$T_1$, $T_2$ï¼‰åŒæ—¶è°ƒç”¨put()ï¼Œå¦‚æœ$T_1$å…ˆæ”¾å…¥æ•°æ®ï¼Œç„¶ååœ¨æ›´æ–°è®¡æ—¶å™¨æ—¶ä¸­æ–­ï¼Œ$T_2$è¿è¡Œï¼Œå®ƒä¼šåœ¨è¯¥ä½ç½®å†æ”¾å…¥ä¸€ä¸ªå€¼ï¼Œå‘ç”Ÿerror è¿™æ˜¯å› ä¸ºåœ¨MAX\u0026gt;1æ—¶ï¼Œä¿¡å·é‡çš„ä½¿ç”¨ä¸èƒ½ä¿è¯putï¼ˆï¼‰çš„åŸå­æ€§ è§£å†³æ–¹æ¡ˆï¼šä¸Šé” int buffer[MAX]; int fill_ptr = 0; int use_ptr = 0; int count = 0; void put(int value) { buffer[fill_ptr] = value; fill_ptr = (fill_ptr+1)%MAX; count++; } int get()//æ‹¿å–use_ptræŒ‡å‘çš„å€¼ï¼Œuse_ptr++ { int tmp = buffer[use_ptr]; use_ptr = (use_ptr+1)%MAX; count--; return tmp; } sem_t empty,fill,mutex; int count = 0; void *producer(void *arg) { int i; int loops = (int) arg; for( i=0; i \u0026lt; loops; i++ ) { sem_wait(\u0026amp;mutex); sem_wait(\u0026amp;empty); put(i); sem_post(\u0026amp;mutex); sem_post(\u0026amp;fill); } } void *consumer( void *arg ) { int i = 0; int loops = (int) arg; for(int i = 0 ; i \u0026lt; loops; i++ ) { sem_wait(\u0026amp;mutex); sem_wait(\u0026amp;fill); int tmp = get(); sem_post(\u0026amp;empty); sem_post(\u0026amp;mutex); ptrintf(\u0026#34;%d\\n\u0026#34;,tmp); } } int main() { // ... sem_init(\u0026amp;empty, 0, MAX); sem_init(\u0026amp;fill, 0, 0); sem_init(\u0026amp;mutex, 0, 1);// mutex = 1 because it is a lock //... } è¿™æ®µä»£ç ä¾ç„¶æœ‰é—®é¢˜ï¼š å› ä¸ºåœ¨fillå’Œemptyä¸Šç¡ç€æ—¶æ²¡æœ‰é‡Šæ”¾é”ï¼ˆä¼ ç»Ÿçš„pthread_waitæ˜¯ä¼šé‡Šæ”¾é”çš„ï¼Œä½†æ˜¯è¿™é‡Œæ˜¯ç”¨ä¿¡å·é‡å®ç°çš„é”ï¼‰ã€‚ å› æ­¤æ¶ˆè´¹è€…åœ¨fillä¸Šç¡ç€æ—¶ï¼ŒäºŒå€¼ä¿¡å·é‡é”mutexæ²¡æœ‰é‡Šæ”¾ï¼Œç”Ÿäº§è€…è¯•å›¾å¯¹mutexè°ƒç”¨sem_waitä¹Ÿè¢«å¡ä½ã€‚\næ¶ˆè´¹è€…ç­‰å¾…åœ¨fullï¼ŒæŒæœ‰mutexï¼Œ ç”Ÿäº§è€…å¯ä»¥signal fillï¼Œå´åœ¨ç­‰å¾…mutexï¼Œå‘ç”Ÿäº†æ­»é” è§£å†³æ–¹æ¡ˆï¼š æŠŠå¯¹mutexçš„è·å–å’Œé‡Šæ”¾è°ƒæ•´ä¸ºç´§æŒ¨ç€ä¸´ç•ŒåŒº\nint buffer[MAX]; int fill_ptr = 0; int use_ptr = 0; int count = 0; void put(int value) { buffer[fill_ptr] = value; fill_ptr = (fill_ptr+1)%MAX; count++; } int get()//æ‹¿å–use_ptræŒ‡å‘çš„å€¼ï¼Œuse_ptr++ { int tmp = buffer[use_ptr]; use_ptr = (use_ptr+1)%MAX; count--; return tmp; } sem_t empty,fill,mutex; int count = 0; void *producer(void *arg) { int i; int loops = (int) arg; for( i=0; i \u0026lt; loops; i++ ) { sem_wait(\u0026amp;empty); sem_wait(\u0026amp;mutex); put(i); sem_post(\u0026amp;mutex); sem_post(\u0026amp;fill) } } void *consumer( void *arg ) { int i = 0; int loops = (int) arg; for(int i = 0 ; i \u0026lt; loops; i++ ) { sem_wait(\u0026amp;fill); sem_wait(\u0026amp;mutex); int tmp = get(); sem_post(\u0026amp;mutex); sem_post(\u0026amp;empty); ptrintf(\u0026#34;%d\\n\u0026#34;,tmp); } } int main() { // ... sem_init(\u0026amp;empty, 0, MAX); sem_init(\u0026amp;fill, 0, 0); sem_init(\u0026amp;mutex, 0, 1);// mutex = 1 because it is a lock //... } è¯»è€… \u0026mdash; å†™è€…é” è¯»å†™é”æ›´åŠ çµæ´»ï¼Œå› ä¸ºæŸ¥æ‰¾æ“ä½œä¸ä¼šæ›´æ”¹ä¸´ç•ŒåŒº typedef struct _rwlock_t { sem_t lock; // binary sephamore, basic lock sem_t writelock;//used to allow ONE writer or MANY readers int readers;// count of readers reading in critical section }rwlock_t; void rwlock_init( rwlock_t *rw ) { rw -\u0026gt; readers = 0; sem_init( \u0026amp;rw -\u0026gt; lock, 0, 1 ); sem_init( \u0026amp;rw -\u0026gt; writelock, 0, 1 ); } void rwlock_acquire_readlock(rwlock_t *rw) { sem_wait(\u0026amp;rw-\u0026gt;lock); rw -\u0026gt; readers++; if(rw-\u0026gt;readers == 1) sem_post( \u0026amp;rw -\u0026gt;writelock ); // last reader releases writelock sem_post(\u0026amp;rw -\u0026gt; lock); } void rwlock_release_readlock(rwlock_t *rw) { sem_wait(\u0026amp;rw-\u0026gt;lock); rw -\u0026gt; readers--; if( rw -\u0026gt; readers == 0 ) sem_post( rw -\u0026gt; writelock );// last reader releases writelock sem_post(\u0026amp;rw-\u0026gt;lock); } void rwlock_acquire_writelock(rwlock_t *rw) { sem_wait(\u0026amp;rw-\u0026gt; writelock); } void rwlock_release_writelock(rwlock_t *rw ) { sem_post(\u0026amp;rw -\u0026gt; writelock); } æƒ³è¦è·å–å†™é”çš„è¿›ç¨‹ï¼Œéœ€è¦ç­‰å¾…æ‰€æœ‰çš„è¯»è€…éƒ½ç»“æŸ ç¼ºç‚¹ï¼šè¯»è€…å¾ˆå®¹æ˜“é¥¿æ­»å†™è€… å“²å­¦å®¶å°±é¤é—®é¢˜ æœ€ç®€å•çš„è§£å†³æ–¹æ¡ˆï¼šç ´é™¤ä¾èµ–ï¼Œ å°±æ˜¯ä¿®æ”¹æŸä¸ªå“²å­¦å®¶çš„å–é¤å‰é¡ºåº\nå¦‚ä½•å®ç°ä¿¡å·é‡ ç”¨é”å’Œæ¡ä»¶å˜é‡å®ç°ä¿¡å·é‡ï¼š\n#include\u0026lt;stdio.h\u0026gt; #include\u0026lt;pthread.h\u0026gt; #include\u0026#34;mythreads.h\u0026#34; #include\u0026lt;stdlib.h\u0026gt; #include\u0026lt;semaphore.h\u0026gt; typedef struct _Zem_t{ int value; pthread_cond_t cond; pthread_mutex_t lock; }Zem_t; //only one thread can call this void Zem_init(Zem_t *s, int value) { s -\u0026gt; value = value; Pthread_cond_init(\u0026amp;s-\u0026gt;cond,NULL); Pthread_mutex_init(\u0026amp;s-\u0026gt;lock,NULL); } void Zem_wait(Zem_t *s) { Pthread_mutex_lock(\u0026amp;s-\u0026gt;lock); while( s-\u0026gt;value \u0026lt;=0) { Pthread_cond_wait( \u0026amp;s-\u0026gt;cond, \u0026amp;s-\u0026gt;lock ); } s -\u0026gt;value--;//æ³¨æ„åˆ°è¿™é‡Œæ˜¯å…ˆæ£€æŸ¥æ˜¯å¦ä¸ºéæ­£æ•°ï¼Œå†é€’å‡ Pthread_mutex_unlock(\u0026amp;s-\u0026gt;lock); } void Zem_post(Zem_t *s) { Pthread_mutex_lock(\u0026amp;s-\u0026gt;lock); s -\u0026gt; value++; Pthread_cond_signal( \u0026amp;s -\u0026gt; cond ); Pthread_mutex_unlock(\u0026amp;s-\u0026gt;lock); } æ³¨æ„åˆ°waitæ˜¯å…ˆæ£€æŸ¥æ˜¯å¦ä¸ºéæ­£æ•°ï¼Œå†é€’å‡ï¼Œè¿™ä½¿å¾—ä¿¡å·é‡å€¼æ°¸è¿œä¸ä¼šå°äº0 è¿™ä¹Ÿæ˜¯linuxçš„å®ç° ç”¨ä¿¡å·é‡æ¥å®ç°é”å’Œæ¡ä»¶å˜é‡ç›¸å½“å›°éš¾ å¸¸è§å¹¶å‘é—®é¢˜ éæ­»é”ç¼ºé™· è¿ååŸå­æ€§ç¼ºé™·ï¼šç»™å…±äº«å˜é‡çš„è®¿é—®åŠ é”\nè¿åé¡ºåºç¼ºé™·ï¼šä½¿ç”¨æ¡ä»¶å˜é‡ï¼Œå¼ºåˆ¶é¡ºåºï¼š\n//... Pthread_mutex_lock(\u0026amp;mutex); while( inited == = ) Pthread_Cond_wait( \u0026amp;cond, \u0026amp;mutex ); //operations to critical section Pthread_mutex_unlock(\u0026amp;mutex); æ­»é”ç¼ºé™· æ¨¡å—åŒ–å’Œé”ä¸æ˜¯å¾ˆå¥‘åˆ T1 T2 T3 T4 L1 Y Y N N L2 Y Y Y N ç³»ç»Ÿå½¢æˆæ­»é”çš„å››ä¸ªå¿…è¦æ¡ä»¶ äº’æ–¥æ¡ä»¶(mutual exclusion):ç³»ç»Ÿä¸­å­˜åœ¨ä¸´ç•Œèµ„æº,è¿›ç¨‹åº”äº’æ–¥åœ°ä½¿ç”¨è¿™äº›èµ„æº å æœ‰å’Œç­‰å¾…æ¡ä»¶(hold and wait):è¿›ç¨‹è¯·æ±‚èµ„æºå¾—ä¸åˆ°æ»¡è¶³è€Œç­‰å¾…æ—¶,ä¸é‡Šæ”¾å·²å æœ‰çš„èµ„æº ä¸å‰¥å¤ºæ¡ä»¶(no preemption):å·²è¢«å ç”¨çš„èµ„æºåªèƒ½ç”±å±ä¸»é‡Šæ”¾,ä¸å…è®¸è¢«å…¶å®ƒè¿›ç¨‹å‰¥å¤º å¾ªç¯ç­‰å¾…æ¡ä»¶(circular wait):å­˜åœ¨å¾ªç¯ç­‰å¾…é“¾,å…¶ä¸­,æ¯ä¸ªè¿›ç¨‹éƒ½åœ¨é“¾ä¸­ç­‰å¾…ä¸‹ä¸€ä¸ªè¿›ç¨‹æ‰€æŒæœ‰çš„èµ„æº,é€ æˆè¿™ç»„è¿›ç¨‹æ°¸è¿œç­‰å¾… å¾ªç¯ç­‰å¾… ç»†è‡´åœ°è®¾è®¡é”ç­–ç•¥ï¼Œæœ‰åºåŠ é” æŒæœ‰å¹¶ç­‰å¾… ä»»ä½•çº¿ç¨‹æŠ¢é”ä¹‹å‰è¦å…ˆæŠ¢ä¸€ä¸ªå…¨å±€é”ï¼Œè¿™æ ·ä¿è¯äº†æŠ¢é”çš„åŸå­æ€§(æŠ¢é”æ—¶ä¸ä¼šæœ‰å…¶ä»–è¿›ç¨‹åˆ‡å…¥) å¦‚ï¼šå‡å¦‚çº¿ç¨‹1éœ€è¦lock1å’Œlock2ï¼Œ è€Œçº¿ç¨‹äºŒéœ€è¦lock2å’Œlock1ã€‚çº¿ç¨‹1è·å¾—lock1åä¸ä¼šè¢«æ‰“æ–­ï¼Œèƒ½ç»§ç»­è·å¾— lock2ï¼Œæ‰§è¡Œå®Œæ¯•ï¼Œé‡Šæ”¾è¿™ä¸¤ä¸ªé”ï¼Œçº¿ç¨‹äºŒç»§ç»­æ‰§è¡Œã€‚ lock(prevection);//global lock lock(L1); lock(L2); ... unlock(prevention); éæŠ¢å  top: lock(L1); if(trylock(L2)==-1) { unlock(L1); goto(top); } åŒæ ·æ˜¯å®ç°äº†åŸå­åœ°æŠ¢å é” å¦‚æœL2æ²¡æŠ¢åˆ°ï¼Œé‚£ä¹ˆä¼šé‡Šæ”¾L1 ä¼šå¯¼è‡´æ´»é”ï¼ˆ livelockï¼‰ ä¸¤ä¸ªçº¿ç¨‹å¯èƒ½ä¸€ç›´é‡å¤è¿™ä¸€åºåˆ—ï¼ŒåˆåŒæ—¶éƒ½æŠ¢é”å¤±è´¥ å‡å¦‚çº¿ç¨‹1æŒæœ‰lock1ï¼Œç­‰å¾…lock2( å› æ­¤è¯¥çº¿ç¨‹ä¸€ç›´try - fail)ï¼Œ è€Œçº¿ç¨‹äºŒæŒæœ‰lock2ï¼Œç­‰å¾…lock1,çº¿ç¨‹1åœ¨è¯•å›¾è·å¾—lock2æ—¶è¢«ä¸­æ–­ï¼Œçº¿ç¨‹2è·å¾—lock2ï¼Œè¯•å›¾è·å¾—lock1ï¼Œæ­¤æ—¶å‘ç”Ÿæ´»é” äº’æ–¥ é€šè¿‡æ— ç­‰å¾…ï¼ˆwait-freeï¼‰æ•°æ®ç»“æ„é¿å…äº’æ–¥ é€šè¿‡è°ƒåº¦é¿å…æ­»é” çº¿ç¨‹å¯¹é”çš„éœ€æ±‚ï¼š\nT1 T2 T3 T4 L1 Y Y N N L2 Y Y Y N åªè¦T1å’ŒT2ä¸åŒæ—¶è¿è¡Œå°±ä¸ä¼šå‘ç”Ÿæ­»é” T3åªç”¨åˆ°ä¸€æŠŠé”ï¼Œå› æ­¤å¯ä»¥å’Œå…¶å®ƒçº¿ç¨‹å¹¶å‘æ‰§è¡Œï¼Œä¸ä¼šæ­»é” å¯ä»¥å¼ºåˆ¶T2åœ¨T1ä¹‹åè¿è¡Œ è¿™ç§ä¿å®ˆçš„æ–¹æ¡ˆå¾ˆæ˜æ˜¾ä¼šé™ä½æ€§èƒ½ æ£€æŸ¥å’Œæ¢å¤ å…è®¸æ­»é”å¶å°”å‘ç”Ÿï¼Œæ£€æŸ¥åˆ°æ­»é”æ—¶å†é‡‡å–è¡ŒåŠ¨ï¼ˆé‡å¯ç”µè„‘ï¼‰ å¤ªæ‘†çƒ‚äº†ã€‚ã€‚ã€‚ åŸºäºäº‹ä»¶çš„å¹¶å‘ï¼ˆAdvancedï¼‰ äº‹ä»¶å¾ªç¯ï¼š\nwhile(1) { events = getEvents(); for( e in events ) { processEvent(e); } } å› ä¸ºäº‹ä»¶æ˜¯åŸå­çš„ï¼Œä¸€æ¬¡åªå¤„ç†ä¸€ä¸ªäº‹ä»¶ä¸éœ€è¦è€ƒè™‘çº¿ç¨‹åˆ‡æ¢ã€‚ è€Œä¸”å¦‚ä¸Šæ‰€è§ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹äº‹ä»¶è°ƒåº¦è¿›è¡Œæ˜¾å¼æ§åˆ¶ è¿™æ„å‘³ç€äº‹ä»¶æ˜¯é˜»å¡çš„ï¼Œæœ‰å·¨å¤§çš„æ€§èƒ½å¼€é”€ï¼Œéœ€è¦å¼•å…¥å¼‚æ­¥çš„äº‹ä»¶å¤„ç†ï¼Œå†åŠ ä¸Šå¤šCPUæ—¶ï¼Œå¹¶è¡Œçš„äº‹ä»¶å¤„ç†å¤æ‚åº¦ç›¸å½“äºå¤šçº¿ç¨‹ã€‚ å› æ­¤ç»™äºˆäº‹ä»¶çš„å¹¶å‘å¹¶ä¸æ¯”åŸºäºçº¿ç¨‹çš„ç®€å•ã€‚ è¿™éƒ¨åˆ†å†…å®¹å¾ˆåºå¤§ï¼Œæˆ‘ä¸æƒ³åœ¨Cç¼–ç¨‹ä¸Šå€¾æ³¨å¤ªå¤šæ—¶é—´ï¼Œå› æ­¤æ”¾åœ¨JAVAç­‰è¯­è¨€çš„å¹¶å‘ä¸­è®²ã€‚ ","permalink":"https://lyk-love.cn/Hugo-Blog/posts/os-concurrency/","posts_num":12,"tags":["æœºå™¨","æ“ä½œç³»ç»Ÿ"],"title":"OS Concurrency"}]
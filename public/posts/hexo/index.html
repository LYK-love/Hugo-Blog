<!DOCTYPE html>
<html lang="en">
<head>
  
    <title>Hexo :: LYK-love</title>
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Outline
Hexo, Next, Markdown
里面有几乎全部的主题配置教程
" />
<meta name="keywords" content="" />

  <meta name="robots" content="noodp" />

<link rel="canonical" href="https://lyk-love.cn/Hugo-Blog/posts/hexo/" />






  
  
  
  
  
  <link rel="stylesheet" href="https://lyk-love.cn/Hugo-Blog/styles.css">







  <link rel="shortcut icon" href="https://lyk-love.cn/images/favicon.ico">



<meta name="twitter:card" content="summary" />



<meta property="og:locale" content="en" />
<meta property="og:type" content="article" />
<meta property="og:title" content="Hexo">
<meta property="og:description" content="Outline
Hexo, Next, Markdown
里面有几乎全部的主题配置教程
" />
<meta property="og:url" content="https://lyk-love.cn/Hugo-Blog/posts/hexo/" />
<meta property="og:site_name" content="LYK-love" />

  
    <meta property="og:image" content="https://lyk-love.cn/images/favicon.ico">
  

<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="627">


  <meta property="article:published_time" content="2022-03-27 02:28:03 &#43;0000 UTC" />









<style>
     
     
     
     
     
     
     
     
     
     
     



     
     
     
     
     
     

     
     
     
     
     

     
     
     
     
     
     
     
     

     
     
     
     
     
     

     
     
     
     
     

     
     
     
     
     

    #search-btn {
        position: absolute;
        top: 10px;
        right: 20px;
        font: font: inherit;
        font-size: 130%;
        background: inherit;
        border: inherit;
        color: inherit;
    }


</style>




<style>
    .back-to-top {
        box-sizing: border-box;
        border-radius: 8px;        
        position: fixed;
        right: 30px;
        z-index: 1050;
        padding: 0 6px;
        width: initial;
        background: #222;
        font-size: 12px;
        opacity: 0.6;
        color: #fff;
        cursor: pointer;
        text-align: center;
        transition-property: bottom;
        transition-duration: 0.2s;
        transition-timing-function: ease-in-out;
        transition-delay: 0s;
        bottom: -40px;
    }

    .back-top-active {
        bottom: 30px;
    }

    @media (max-width: 767px) {

        .back-to-top {
            right: 10px;
        }


        .back-top-active {
            bottom: 10px;
        }
    }
</style>


<script src="https://kit.fontawesome.com/36e579b0cd.js" crossorigin="anonymous"></script>

<style>
     
    .post-toc {
        position: absolute;
        width: 200px;
        margin-left: 780px;
        padding: 10px;
        word-wrap: break-word;
        box-sizing: border-box;
    .post-toc-title {
        margin: 0;
        font-weight: 400;
        text-transform: uppercase;
    }
    .post-toc-content {
    &.always-active ul {
         display: block;
     }
    >nav>ul {
        margin: 10px 0;
    }
    ul {
        padding-left: 0;
        list-style: none;
    ul {
        padding-left: 15px;
        display: none;
    }
    .has-active > ul {
        display: block;
    }
    }
    }
    a:hover {
        color: #c05b4d;
        -webkit-transform: scale(1.1);
        -ms-transform: scale(1.1);
        transform: scale(1.1);
    }
    a {
        display: block;
        line-height: 30px;
        overflow: hidden;
        white-space: nowrap;
        text-overflow: ellipsis;
        -webkit-transition-duration: .2s;
        transition-duration: .2s;
        -webkit-transition-property: -webkit-transform;
        transition-property: -webkit-transform;
        transition-property: transform;
        transition-property: transform,-webkit-transform;
        -webkit-transition-timing-function: ease-out;
        transition-timing-function: ease-out;
    }
    }
    @media only screen and (max-width: 1224px) {
        .post-toc {
            display: none;
        }
    }
</style>








































</head>
<body class="green">


<div class="container center headings--one-size">

  <header class="header">
  <div class="header__inner">
    <div class="header__logo">
      <a href="/">
  <div class="logo">
    LYK-love
  </div>
</a>

    </div>
    
      <ul class="menu menu--mobile">
  <li class="menu__trigger">Menu&nbsp;▾</li>
  <li>
    <ul class="menu__dropdown">
      
        
          <li><a href="/Hugo-Blog/about">About</a></li>
        
      
        
          <li><a href="/Hugo-Blog/archive">Archive</a></li>
        
      
        
          <li><a href="/Hugo-Blog/tags">Tags</a></li>
        
      
        
          <li><a href="/Hugo-Blog/categories">Categories</a></li>
        
      
        
          <li><a href="/Hugo-Blog/research">Research</a></li>
        
      
        
          <li><a href="/Hugo-Blog/code">Code</a></li>
        
      
      
    </ul>
  </li>
</ul>

    
    
  </div>
  
    <nav class="navigation-menu">
  <ul class="navigation-menu__inner menu--desktop">
    
      
        
          <li><a href="/Hugo-Blog/about" >About</a></li>
        
      
        
          <li><a href="/Hugo-Blog/archive" >Archive</a></li>
        
      
        
          <li><a href="/Hugo-Blog/tags" >Tags</a></li>
        
      
        
          <li><a href="/Hugo-Blog/categories" >Categories</a></li>
        
      
      
        <li>
          <ul class="menu">
            <li class="menu__trigger">Show more&nbsp;▾</li>
            <li>
              <ul class="menu__dropdown">
                
                  
                    <li><a href="/Hugo-Blog/research" >Research</a></li>
                  
                
                  
                    <li><a href="/Hugo-Blog/code" >Code</a></li>
                  
                
              </ul>
            </li>
          </ul>
        </li>
      
    
  </ul>
</nav>

  
</header>


  <div class="content">
    
<article class="post">
  <h1 class="post-title">
    <a href="https://lyk-love.cn/Hugo-Blog/posts/hexo/">Hexo</a>
  </h1>
  <div class="post-meta">
    
      <time class="post-date">
        2022-03-27 ::
        
      </time>
    
    
    
  </div>

  
  


  
    <div class="table-of-contents">
      <h2>
        Contents
      </h2>
      <nav id="TableOfContents">
  <ul>
    <li><a href="#部署到gitpage">部署到GitPage</a></li>
    <li><a href="#自定义域名">自定义域名</a></li>
    <li><a href="#写作">写作</a></li>
    <li><a href="#configuring-author">Configuring Author</a></li>
    <li><a href="#configuring-description">Configuring Description</a></li>
    <li><a href="#enabling-theme">Enabling Theme</a></li>
  </ul>

  <ul>
    <li><a href="#configuring-favicon">Configuring Favicon</a></li>
    <li><a href="#搜索服务">搜索服务</a></li>
    <li><a href="#百度统计">百度统计</a></li>
    <li><a href="#math">Math</a>
      <ul>
        <li><a href="#engines">Engines</a></li>
        <li><a href="#支持mathjax">支持MathJax</a></li>
        <li><a href="#configuring-hexo-renderer-markdown-it">Configuring <code>hexo-renderer-markdown-it</code></a></li>
        <li><a href="#公式自动编号和引用">公式自动编号和引用</a></li>
        <li><a href="#multi-line-equations">Multi-line Equations</a></li>
        <li><a href="#multiple-aligned-equations">Multiple Aligned Equations</a></li>
        <li><a href="#exclude-equations-from-numbering">Exclude Equations from Numbering</a></li>
        <li><a href="#use-tag-to-tag-equations">Use <code>\tag</code> to Tag Equations</a></li>
      </ul>
    </li>
    <li><a href="#字体">字体</a></li>
    <li><a href="#代码块">代码块</a></li>
    <li><a href="#图像缩放">图像缩放</a></li>
    <li><a href="#图像懒加载">图像懒加载</a></li>
    <li><a href="#访客人数文章阅读次数">访客人数&amp;&amp;文章阅读次数</a></li>
    <li><a href="#网页加载加速">网页加载加速</a></li>
    <li><a href="#back2top-button">back2top button</a></li>
    <li><a href="#版权">版权</a></li>
    <li><a href="#一些不想用的美化">一些不想用的美化</a></li>
  </ul>

  <ul>
    <li><a href="#多分支">多分支</a></li>
    <li><a href="#多主机同步的问题">多主机同步的问题</a></li>
    <li><a href="#new-同步步骤">@New 同步步骤</a></li>
    <li><a href="#deprecated-同步步骤">@Deprecated 同步步骤</a>
      <ul>
        <li><a href="#old-hosts">Old Hosts</a></li>
        <li><a href="#new-hosts">New Hosts</a></li>
      </ul>
    </li>
    <li><a href="#bugs">Bugs</a></li>
  </ul>

  <ul>
    <li><a href="#version">Version</a></li>
    <li><a href="#install">Install</a></li>
    <li><a href="#ungrade">Ungrade</a></li>
    <li><a href="#uninstall">Uninstall</a></li>
  </ul>

  <ul>
    <li><a href="#version-1">Version</a></li>
    <li><a href="#installation">Installation</a>
      <ul>
        <li><a href="#using-npm">Using npm</a></li>
        <li><a href="#using-git">Using git</a></li>
      </ul>
    </li>
    <li><a href="#after-installation">After Installation</a></li>
    <li><a href="#upgrade">Upgrade</a></li>
  </ul>

  <ul>
    <li><a href="#页面内跳转">页面内跳转</a></li>
    <li><a href="#anchor">Anchor</a>
      <ul>
        <li><a href="#auto">Auto</a></li>
        <li><a href="#manual">Manual</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
  

  <div class="post-content"><div>
        <p>Outline</p>
<p>Hexo, Next, Markdown</p>
<p>里面有几乎全部的主题配置教程</p>
<h1 id="intro">Intro<a href="#intro" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h1>
<p>Hexo版本: 6.2.0</p>
<p>Next版本: 8.12.3</p>
<ul>
<li><a href="https://hexo.io/zh-cn/">Hexo官网</a></li>
<li><a href="https://hexo-next.readthedocs.io/zh_CN/latest">NeXt Tutor</a>, 里面有几乎全部的主题配置教程</li>
<li><a href="https://github.com/next-theme/hexo-theme-next">最新版(v8)NeXt Github仓库</a></li>
<li><a href="https://theme-next.js.org/">Next Official Blog</a></li>
<li><a href="https://github.com/theme-next/awesome-next">Awesome NexT</a> : 有很多别人的Next博客, 非常值得借鉴</li>
</ul>
<p>本文档参考了:</p>
<ul>
<li>比较全的<a href="https://www.yuque.com/skyrin/coding/tm8yf5#xgq4yz">Hexo + Next搭建教程</a>, 其中有些内容有点老了</li>
</ul>
<p>Hexo是流行的静态博客框架, 同类的还有Hugo和Jekyl. Hexo的优点是, 它的Next主题比较好看. 本文介绍Hexo + Next的配置.</p>
<p>主题文件都存放在<code>&lt;hexo-dir&gt;/themes/</code>, 例如Next主题就位于<code>&lt;hexo-dir&gt;/themes/next/_config.yml</code>. <strong>但是</strong>, 由于下面讲的多主机同步的原因, 实际起作用的主题配置文件是<code>&lt;hexo&gt;/_cofig.next.yml</code></p>
<p>Hexo的配置文件位于Hexo目录的<code>_config.yml</code></p>
<p>Next的配置目录位于<code>&lt;hexo&gt;/_cofig.next.yml</code>.</p>
<p>在主题配置中, 除非特殊说明, 编辑都是主题配置文件. 同理, 对于Hexo的配置, 除非特殊说明, 编辑的都是Hexo配置文件</p>
<h1 id="hexo-commands">Hexo Commands<a href="#hexo-commands" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h1>
<table>
<thead>
<tr>
<th>命令</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>hexo init [folder]</code></td>
<td>初始化网站</td>
</tr>
<tr>
<td><code>hexo new [layout]</code></td>
<td>新建文章, 默认是“post”, 我通过<code>default_layout: draft</code>设置为新建到“draft”</td>
</tr>
<tr>
<td><code>hexo publish [layout]</code></td>
<td>发布草稿</td>
</tr>
<tr>
<td><code>hexo g[enerate]</code></td>
<td>生成静态文件.</td>
</tr>
<tr>
<td><code>hexo s[erver]</code></td>
<td>启动本地服务器. 服务器会监听文件变化并自动更新</td>
</tr>
<tr>
<td><code>hexo d[eploy]</code></td>
<td>在安装了deploy git 插件后, 可以生成本地文件并远程部署到GitPage. 再也不用<code>hexo d -g</code>了</td>
</tr>
<tr>
<td><code>hexo clean</code></td>
<td>清理数据库和静态文件</td>
</tr>
<tr>
<td><code>hexo list</code></td>
<td>列出站点信息</td>
</tr>
<tr>
<td><code>hexo version</code></td>
<td>版本信息</td>
</tr>
<tr>
<td><strong><code>hexo d -g</code></strong></td>
<td>生成并部署</td>
</tr>
</tbody>
</table>
<h1 id="hexo搭建">Hexo搭建<a href="#hexo搭建" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h1>
<ol>
<li>
<p>安装 Hexo:</p>
<pre tabindex="0"><code>npm install -g hexo-cli
</code></pre></li>
<li>
<p>在本地指定文件夹 <code>&lt;folder&gt;</code> 中建立项目:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>hexo init &lt;folder&gt;
</span></span><span style="display:flex;"><span>cd &lt;folder&gt;
</span></span><span style="display:flex;"><span>npm install
</span></span></code></pre></div></li>
<li>
<p>新建完成后，指定文件夹 <code>&lt;folder&gt;</code> 的目录如下：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plain" data-lang="plain"><span style="display:flex;"><span>.
</span></span><span style="display:flex;"><span>├── _config.yml
</span></span><span style="display:flex;"><span>├── package.json
</span></span><span style="display:flex;"><span>├── scaffolds
</span></span><span style="display:flex;"><span>├── source
</span></span><span style="display:flex;"><span>|   ├── _drafts
</span></span><span style="display:flex;"><span>|   └── _posts
</span></span><span style="display:flex;"><span>└── themes
</span></span></code></pre></div><table>
<thead>
<tr>
<th>文件/文件夹</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>_config.yml</td>
<td>网站的<a href="https://hexo.io/zh-cn/docs/configuration.html">配置</a>文件</td>
</tr>
<tr>
<td>package.json</td>
<td>应用程序的信息</td>
</tr>
<tr>
<td>scaffolds</td>
<td><a href="https://hexo.io/zh-cn/docs/templates.html">模版</a>文件夹。当您新建文章时，Hexo 会根据 scaffold 来建立文件</td>
</tr>
<tr>
<td>source</td>
<td><a href="https://hexo.io/zh-cn/docs/asset-folders.html">资源文件夹</a>是存放用户资源的地方。除 <em>posts 文件夹之外，开头命名为</em>  (下划线)的文件 / 文件夹和隐藏的文件将会被忽略。Markdown 和 HTML 文件会被解析并放到 public 文件夹，而其他文件会被拷贝过去</td>
</tr>
<tr>
<td>themes</td>
<td><a href="https://hexo.io/zh-cn/docs/themes.html">主题</a>文件夹。Hexo 会根据主题来生成静态页面</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>安装主题, 见下文</p>
</li>
</ol>
<h2 id="部署到gitpage">部署到GitPage<a href="#部署到gitpage" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<p>GitPage 允许你将你的博客创建为一个 GitHub Project，通过 <code>your-account.github.io</code> 这样的特殊项目名称与 GitPage 进行关联，然后，你只需要像平时一样 commit 你的博文到 GitHub 上就 OK 了，GitPage 会自动将你的更新部署出去.</p>
<blockquote>
<p>注意, 私有仓库的Gitpages也是可以公共访问的, 所以千万不要把含有敏感信息的私有仓库作为GitPages</p>
</blockquote>
<ol>
<li>
<p>安装 deploy git 插件实现一键自动部署:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plain" data-lang="plain"><span style="display:flex;"><span>npm install hexo-deployer-git --save
</span></span></code></pre></div></li>
<li>
<p>在 GitHub 创建一个名为<code>&lt;username&gt;.github.io.git</code>的仓库。</p>
</li>
<li>
<p>在主题配置文件<code>_config.yml</code>中修改仓库地址, 注意, 为了后文说的多主机同步. 我的仓库有两个分支. <code>master</code>用于存放生成的网页文件, <code>hexo</code>存放源文件. 部署当然是push网页文件, 也就是<code>master</code>分支:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">deploy</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">type</span>: <span style="color:#ae81ff">git</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">repo</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">github</span>: <span style="color:#ae81ff">git@github.com:LYK-love/LYK-love.github.io.git</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">branch</span>: <span style="color:#ae81ff">master</span>
</span></span></code></pre></div></li>
<li>
<p>GitPage可以关联到项目的任意分支, 我们要到仓库的Settings -&gt; Code and automation -&gt; Pages里, 把Pages关联到master分支. 这样我们部署到master的网页文件就可以同步到Pages上.</p>
</li>
<li>
<p>执行<code>hexo d</code>即可部署到 GitHub 仓库。</p>
</li>
<li>
<p>新增或修改主题配置后部署时请执行 <code>hexo clean &amp;&amp; hexo d</code></p>
</li>
</ol>
<p>注：这里使用 ssh 协议而非 http，所以请先确保您已经在 GitHub 添加了公钥.</p>
<h2 id="自定义域名">自定义域名<a href="#自定义域名" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<ol>
<li>首先你需要去域名注册商（阿里云腾讯云等）买一个域名</li>
<li>在根站点下<code>source</code>目录中添加<code>CNAME</code>文件，文件内容为您购买的域名<code>xxx.com</code>，不要添加<code>www</code>、<code>mail</code>等子域例如<code>www.xxx.com</code>或<code>mail.xxx.com</code></li>
<li>前往域名控制台解析此域名到<code>github.io</code>，根据 gitpage 的自定义域名要求，他们建议解析到<code>github.io</code>的数字 ip 地址，即<code>151.101.129.147</code></li>
<li>在控制台设置域名解析，添加 A 记录指向 <code>151.101.129.147</code> 即可</li>
<li>命令行执行<code>hexo d</code>发布站点到 GitHub 库，这时在 Git 库应该就能看到 CNAME 文件，至此自定义域名设置完毕，现在使用<code>xxx.com</code>即可访问站点</li>
</ol>
<h2 id="写作">写作<a href="#写作" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<ul>
<li>
<p>默认新建文章都是posts, 改成新建为drafts:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">default_layout</span>: <span style="color:#ae81ff">draft</span>
</span></span></code></pre></div><p>这样<code>hexo new</code>新建的就都是草稿了</p>
</li>
<li>
<p>文章能会有多个类别, 分类具有顺序性和层次性, 有<code>3</code>种不同的编写方式</p>
<pre tabindex="0"><code># 第一种
categories:
  - Java
  - Servlet
# 第二种
categories: [Java, Servlet]
# 第三种
categories:
  -[Java]
  -[Servlet]
</code></pre><p>前一、二种书写方式的作用一致，表示该文章分类于<code>Java/Servlet</code>下，起到了子分类的作用</p>
<p>第三种书写方式起到了多分类的作用，表示该文章分类于<code>Java</code>和<code>Servlet</code>下</p>
</li>
<li>
<p>标签没有层次性:</p>
<pre tabindex="0"><code>categories:
- Diary
tags:
- PS3
- Games
</code></pre></li>
</ul>
<h2 id="configuring-author">Configuring Author<a href="#configuring-author" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<p>Edit Hexo config file and set the value of <code>author</code> to your nickname.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#ae81ff">Hexo config file</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Site</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">author</span>:
</span></span></code></pre></div><h2 id="configuring-description">Configuring Description<a href="#configuring-description" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<p>Edit Hexo config file and set the value of <code>description</code> to your description, which can be a sentence you like.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#ae81ff">Hexo config file</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Site</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">description</span>:
</span></span></code></pre></div><h2 id="enabling-theme">Enabling Theme<a href="#enabling-theme" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<p>Like all Hexo themes, after you download it, open Hexo config file, find <code>theme</code> option, and change its value to <code>next</code> (or another theme directory name).</p>
<p>Edit Hexo config file:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">theme</span>: <span style="color:#ae81ff">next</span>
</span></span></code></pre></div><p>Now you have installed NexT theme and enabled it. The following steps will help you verify whether NexT is enabled correctly.</p>
<h1 id="next配置">NeXt配置<a href="#next配置" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h1>
<p><a href="https://convivae.top/posts/hexo-bo-ke-cai-keng/">进阶配置</a></p>
<ul>
<li>
<p>Schemes: 目前觉得Mist比较好看</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#75715e"># Schemes</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># scheme: Muse</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">scheme</span>: <span style="color:#ae81ff">Mist</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># scheme: Pisces</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># scheme: Gemini</span>
</span></span></code></pre></div></li>
<li>
<p>设置语言: 我使用默认的英语. 如果要使用汉语, 可以编辑主题配置文件:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">language</span>: <span style="color:#ae81ff">zh-CN</span>
</span></span></code></pre></div></li>
<li>
<p>首页文章显示摘要: 在文章中适当位置插入 <code>&lt;!--more--&gt;</code>，该位置之前的部分即为摘要，会显示在首页中.</p>
</li>
<li>
<p>sidebar社交链接: 邮箱前要加<code>mailto:</code>, 这还是我用开发者工具查别人的网站发现的..( 其实mailto是html中发送email的代码 )</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">social</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">GitHub</span>: <span style="color:#ae81ff">https://github.com/LYK-love || fab fa-github</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">E-Mail</span>: <span style="color:#ae81ff">mailto:191820133@smail.nju.edu.cn || fa fa-envelope</span>
</span></span></code></pre></div></li>
<li>
<p>sidebar社交链接的图案:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">social_icons</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">enable</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">icons_only</span>: <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">transition</span>: <span style="color:#66d9ef">false</span>
</span></span></code></pre></div></li>
<li>
<p>添加建站时间, 不加的话就会显示当前年份:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">footer</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># Specify the date when the site was setup. If not defined, current year will be used.</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">since</span>: <span style="color:#ae81ff">2021</span>
</span></span></code></pre></div></li>
<li>
<p>关掉闪烁:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">quicklink</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">enable</span>: <span style="color:#66d9ef">false</span>
</span></span></code></pre></div></li>
<li>
<p>Toc: Table of Contents in the Sidebar. 主要是sidebar里面的标题要不要自动进行数字编号. 默认为true. 我不喜欢编号：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">toc</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">enable</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># Automatically add list number to toc.</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">number</span>: <span style="color:#66d9ef">false</span>
</span></span></code></pre></div></li>
</ul>
<h2 id="configuring-favicon">Configuring Favicon<a href="#configuring-favicon" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<p>By default the Hexo site use NexT favicons in <code>[hexo-site]/themes/next/source/images/</code> directory with different size for different device. You can replace them with your own favicons.</p>
<p>但是, 如果使用npm安装Next, 则主题文件夹是<code>[hexo-site]/node_modules/hexo-theme-next</code>, 无法进行版本管理.</p>
<p>因此, Hexo也支持将图片放在<code>[hexo-site]/source/images/</code>. 我也<strong>强烈推荐</strong>这么做, 这样就可以进行版本管理了:</p>
<ol>
<li>
<p>先手动创建文件夹:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>cd <span style="color:#f92672">[</span>hexo-site<span style="color:#f92672">]</span>/source
</span></span><span style="display:flex;"><span>mkdir images
</span></span></code></pre></div></li>
<li>
<p>后续在Next配置文件中使用<code>images</code>路径来找到图片:</p>
<ul>
<li>由于<code>themes/next/source/images/</code>和<code>source/images/</code>都可以放图片, 该操作实际上会扫描这两个文件夹</li>
</ul>
</li>
</ol>
<pre tabindex="0"><code>mkdir images
</code></pre><ul>
<li>
<p>设置站点图标:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">favicon</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># small: /images/favicon-16x16-next.png</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">small</span>: <span style="color:#ae81ff">/images/white_flower1.jpg</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># medium: /images/favicon-32x32-next.png</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">medium</span>: <span style="color:#ae81ff">/images/white_flower1.jpg</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># apple_touch_icon: /images/apple-touch-icon-next.png</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">apple_touch_icon</span>: <span style="color:#ae81ff">/images/white_flower1.jpg</span>
</span></span></code></pre></div></li>
<li>
<p>设置菜单: 真不知道about页面有啥用</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">menu</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">home</span>: <span style="color:#ae81ff">/ || home</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># about: /about/ || user</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">tags</span>: <span style="color:#ae81ff">/tags/ || tags</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">categories</span>: <span style="color:#ae81ff">/categories.md/ || th</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">archives</span>: <span style="color:#ae81ff">/archives/ || archive</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">#schedule: /schedule/ || calendar</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">#sitemap: /sitemap.xml || sitemap</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">#commonweal: /404/ || heartbeat</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Enable / Disable menu icons / item badges.</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">menu_settings</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">icons</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">badges</span>: <span style="color:#66d9ef">false</span>
</span></span></code></pre></div></li>
<li>
<p>设置sidebar avatar, 并且让图片圆形显示</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#75715e"># Sidebar Avatar</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">avatar</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># Replace the default image and set the url here.</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">url</span>: <span style="color:#ae81ff">/images/white_flower1.jpg</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># If true, the avatar will be displayed in circle.</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># 圆形显示</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">rounded</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># If true, the avatar will be rotated with the cursor.</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">rotated</span>: <span style="color:#66d9ef">false</span>
</span></span></code></pre></div><p>头像必须存放在<code>&lt;next&gt;/themes/source/images/</code></p>
</li>
</ul>
<h2 id="搜索服务">搜索服务<a href="#搜索服务" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<p>使用本地搜索，按以下步骤配置：</p>
<ol>
<li>
<p>安装 hexo-generator-searchdb 插件：加了这个之后,博客生成时间要慢好几秒, 不过也是值得的</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>npm install hexo-generator-searchdb --save
</span></span></code></pre></div></li>
<li>
<p>编辑Hexo配置文件 <code>_config.yml</code>：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">search</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">path</span>: <span style="color:#ae81ff">search.xml</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">field</span>: <span style="color:#ae81ff">post</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">format</span>: <span style="color:#ae81ff">html</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">limit</span>: <span style="color:#ae81ff">10000</span>
</span></span></code></pre></div></li>
<li>
<p>编辑Next配置文件：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#75715e"># Local search</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">local_search</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">enable</span>: <span style="color:#66d9ef">true</span>
</span></span></code></pre></div></li>
</ol>
<h2 id="百度统计">百度统计<a href="#百度统计" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<p>也可以添加Google统计, 都差不多</p>
<ol>
<li>
<p>开通百度统计帐号: 在 <a href="https://tongji.baidu.com/web/welcome/login"><strong>百度统计</strong></a> 注册帐号. 帐号注册成功后，在侧边栏<code>账户管理 -&gt; 网站列表</code>，点击右侧<code>新增网站</code>按钮</p>
</li>
<li>
<p>添加<code>网站域名/网站首页</code>信息后，点击<code>确定</code>按钮，百度统计会提供一段<code>JS</code>脚本用于嵌入</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#f92672">&lt;</span><span style="color:#a6e22e">script</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">_hmt</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">_hmt</span> <span style="color:#f92672">||</span> [];
</span></span><span style="display:flex;"><span>(<span style="color:#66d9ef">function</span>() {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">hm</span> <span style="color:#f92672">=</span> document.<span style="color:#a6e22e">createElement</span>(<span style="color:#e6db74">&#34;script&#34;</span>);
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">hm</span>.<span style="color:#a6e22e">src</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;https://hm.baidu.com/hm.js?&lt;app-id&gt;&#34;</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">s</span> <span style="color:#f92672">=</span> document.<span style="color:#a6e22e">getElementsByTagName</span>(<span style="color:#e6db74">&#34;script&#34;</span>)[<span style="color:#ae81ff">0</span>]; 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">parentNode</span>.<span style="color:#a6e22e">insertBefore</span>(<span style="color:#a6e22e">hm</span>, <span style="color:#a6e22e">s</span>);
</span></span><span style="display:flex;"><span>})();
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/script&gt;</span>
</span></span></code></pre></div></li>
<li>
<p>粘贴上面代码中的`<!-- raw HTML omitted -->, 复制到主题配置文件:</p>
<pre tabindex="0"><code>baidu_analytics: &lt;app-id&gt;
</code></pre><ul>
<li>Next主题已对百度统计进行配置优化，因此只需要编辑配置文件, 填写<code>app-id</code>. 对于更一般的情况, 需要把上面的JS代码添加到网站全部页面的 <code>&lt;/head&gt;</code> 标签前.</li>
</ul>
</li>
<li>
<p>如果代码安装正确，一般20分钟后，可以查看网站分析数据.</p>
</li>
</ol>
<h2 id="math">Math<a href="#math" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<p><a href="https://github.com/theme-next/hexo-theme-next/blob/master/docs/zh-CN/MATH.md">Next数学公式支持官方文档</a></p>
<p><a href="https://theme-next.js.org/docs/third-party-services/math-equations.html?highlight=mathjax#mjx-eqn%3Aeq2">Next Mathjax高级特性</a></p>
<p>目前的Latex渲染引擎有 <a href="https://www.mathjax.org/">MathJax</a> 和 <a href="https://khan.github.io/KaTeX/">Katex</a>, <code>MathJax</code>完美支持Latex, <code>Katex</code>速度更快, 但是有些语法不支持. 综合来看还是选择Mathjax.</p>
<p><code>NexT</code>默认使用的markdown渲染引擎是<a href="https://github.com/hexojs/hexo-renderer-marked">hexo-renderer-marked</a>, 它不支持Mathjax，不支持插件扩展，不支持emoji表情, 因此我们需要卸载它, 并替换为别的引擎.</p>
<p>注意, 不同的渲染引擎是不能共存的( <a href="https://github.com/next-theme/hexo-filter-mathjax">hexo-filter-mathjax</a>除外, 它是server端的渲染引擎 ), 因此在使用一个渲染引擎之前, 需要卸载掉其他全部的渲染引擎/</p>
<h3 id="engines">Engines<a href="#engines" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h3>
<p>Next支持的渲染引擎:</p>
<h4 id="mathjax">Mathjax<a href="#mathjax" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h4>
<p>If you use MathJax to render Math Equations, you can choose one of the Markdown renderers below:</p>
<ul>
<li><a href="https://github.com/wzpan/hexo-renderer-pandoc">hexo-renderer-pandoc</a>
<ul>
<li>支持Mathjax语法, 不仅可以渲染markdown, 还支持textile, reStructedText和许多其他格式, 仍然不支持emoji表情</li>
<li>内建的汇总文件<code>db.json</code>将来可能会非常大, 同步到 Github 可能会比较慢, 博客内建的搜索功能也可能会变得非常慢.
<ul>
<li>亲测, 博客生成和博客的搜索功能都慢得离谱, 而且它和Next的集成有问题, 无法正确把生成的HTML文件的标题加入Anchor.</li>
</ul>
</li>
</ul>
</li>
<li><a href="https://github.com/sun11/hexo-renderer-kramed">hexo-renderer-kramed</a>: 基于hexo-renderer-marked二次开发的渲染器，完善了对Mathjax的支持, 仍然不支持插件的扩展，不支持emoji表情.
<ul>
<li>亲测它比<code>hexo-renderer-pandoc</code><strong>快一点</strong>. 但是有bug, 需要自己配置. 由于它太老了,就不推荐了.</li>
</ul>
</li>
<li><a href="https://github.com/hexojs/hexo-renderer-markdown-it">hexo-renderer-markdown-it</a>：支持<code>MathJax</code>, 并可以通过插件支持<code>KeTex</code>.
<ul>
<li>支持Markdown以及CommonMark语法.</li>
<li>支持插件配置, 支持标题带安全的id信息</li>
<li>支持脚注（上标, 下标, 下划线）</li>
<li><strong>我最后选择<code>hexo-renderer-markdown-it</code></strong></li>
</ul>
</li>
<li><a href="https://github.com/CHENXCHEN/hexo-renderer-markdown-it-plus">hexo-renderer-markdown-it-plus</a>: 支持Katex插件并默认启用</li>
<li><a href="https://github.com/next-theme/hexo-filter-mathjax">hexo-filter-mathjax</a>: Server side <a href="http://www.mathjax.org/">MathJax</a> Renderer Plugin for <a href="http://hexo.io/">Hexo</a>. 要使用它,需要卸载掉除<code>hexo-renderer-marked</code> ( 用于渲染markdown )之外的LaTex引擎. 它的缺点是有些语法不支持, 而且无法渲染目录里的LaTex.</li>
</ul>
<h4 id="katex">KaTex<a href="#katex" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h4>
<p>If you use KaTeX to render Math Equations, you can choose one of the Markdown renderers below:</p>
<ul>
<li><a href="https://github.com/CHENXCHEN/hexo-renderer-markdown-it-plus">hexo-renderer-markdown-it-plus</a>: 没用过</li>
<li><a href="https://github.com/hexojs/hexo-renderer-markdown-it">hexo-renderer-markdown-it</a>: 亲测它也支持Mathjax, 并支持Hexo支持的Mathjax特性</li>
</ul>
<h3 id="支持mathjax">支持MathJax<a href="#支持mathjax" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h3>
<p>支持Latex步骤:</p>
<ol>
<li>
<p>卸载<code>hexo-renderer-marked</code>, 安装<code>hexo-renderer-pandoc</code> <code>hexo-renderer-markdown-it</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>npm un hexo-renderer-marked
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#75715e"># npm i hexo-renderer-pandoc --save 有问题, 废弃</span>
</span></span><span style="display:flex;"><span>npm i hexo-renderer-markdown-it --save
</span></span></code></pre></div></li>
<li>
<p>如果选择<code>hexo-renderer-pandoc</code> , 还需要额外安装<a href="https://github.com/jgm/pandoc/blob/master/INSTALL.md">pandoc</a></p>
<p>for Mac:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>brew install pandoc
</span></span></code></pre></div></li>
<li>
<p>开启mathjax:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">math</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># Default (false) will load mathjax / katex script on demand.</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># That is it only render those page which has `mathjax: true` in front-matter.</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># If you set it to true, it will load mathjax / katex script EVERY PAGE.</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">every_page</span>: <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">mathjax</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">enable</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Available values: none | ams | all</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">tags: ams # ams</span>: <span style="color:#ae81ff">开启公式自动编号</span>
</span></span></code></pre></div><ul>
<li><code>per_page</code>: 设置为false, 这样只会渲染添加了<code>mathjax: true</code>的文章
<ul>
<li>在低版本的NeXt,这句话上面的注释是反的, 即“false”只会渲染指定文章.</li>
</ul>
</li>
</ul>
</li>
<li>
<p>在需要渲染Latex的文章的Front-matter里打开mathjax开关，如下：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-markdown" data-lang="markdown"><span style="display:flex;"><span>---
</span></span><span style="display:flex;"><span>title: index.html
</span></span><span style="display:flex;"><span>date: 2016-12-28 21:01:30
</span></span><span style="display:flex;"><span>tags:
</span></span><span style="display:flex;"><span>mathjax: true
</span></span><span style="display:flex;"><span>--
</span></span></code></pre></div></li>
</ol>
<h3 id="configuring-hexo-renderer-markdown-it">Configuring <code>hexo-renderer-markdown-it</code><a href="#configuring-hexo-renderer-markdown-it" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h3>
<p><code>hexo-renderer-markdown-it</code>的<a href="https://github.com/hexojs/hexo-renderer-markdown-it">默认配置</a>是无法正确给标题添加anchor的, 需要做一些修改, 并将配置添加到Hexo中.</p>
<p>编辑Hexo配置文件 <code>_config.yml</code>,  插入以下内容:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#75715e"># Config of hexo-renderer-markdown-it</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">markdown</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">preset</span>: <span style="color:#e6db74">&#39;default&#39;</span> <span style="color:#75715e"># 渲染器默认预设 # &#34;commonmark&#34;: 使用严格 CommandMark 规定. # &#34;default&#34;: 默认配置, 类似于 GFM # &#34;zero&#34;: 禁用所有预设.</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">render</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">html</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">xhtmlOut</span>: <span style="color:#66d9ef">false</span> <span style="color:#75715e"># 将 HTML 内容渲染为 XHTML 的形式 (XHTML 语法非常严格, 比如原 HTML 中的 &lt;br&gt; 标签必须要使用 &lt;br/&gt; 这样的形式进行 &#34;自闭和&#34;) 可能会出现兼容性问题.</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">langPrefix</span>: <span style="color:#e6db74">&#39;language-&#39;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">breaks</span>: <span style="color:#66d9ef">true</span> <span style="color:#75715e"># true 则将所有换行渲染为 &lt;br&gt; 标签 # 这种行为不属于 CommandMark 和 GFM.</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">linkify</span>: <span style="color:#66d9ef">true</span> <span style="color:#75715e"># true 则自动解析链接并添加为 &lt;a&gt; 标签, false 则将链接渲染为文本.</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">typographer</span>: <span style="color:#66d9ef">false</span> <span style="color:#75715e"># 默认 true # 自动转义各种排版用字符, 如 ©. 这甚至会转义掉LaTex中的字符, 所以不能开启</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">quotes: &#39;“”‘’&#39; # 当 typographer 定义为 true 时的自动转换引号的行为, quotes</span>: <span style="color:#e6db74">&#39;“”‘’&#39;</span> <span style="color:#ae81ff">则表示将 &#34;123&#34; &#39;123&#39;转换为 “123” ‘123’</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">enable_rules</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">disable_rules</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">plugins</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">anchors</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">level</span>: <span style="color:#ae81ff">1</span> <span style="color:#75715e"># 开始创建锚点的等级, 默认为2,表示从 H2 开始创建一直到 H6(最后).</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">collisionSuffix</span>: <span style="color:#e6db74">&#39;&#39;</span> <span style="color:#75715e"># 如果遇到重复的锚点 ID 为其添加数字编号时在这个数字后添加的后缀.</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">permalink</span>: <span style="color:#66d9ef">true</span> <span style="color:#75715e">#  默认为false, 需要更改为true, 来创建一个除标题外带有固定地址的的锚点标签.</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">permalinkClass</span>: <span style="color:#e6db74">&#39;header-anchor&#39;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">permalinkSide</span>: <span style="color:#e6db74">&#39;left&#39;</span> <span style="color:#75715e"># 设定为 right 则会在标题后添加固定链接.</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">permalinkSymbol</span>: <span style="color:#e6db74">&#39;&#39;</span> <span style="color:#75715e"># 更改为空字符串</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">case</span>: <span style="color:#ae81ff">0</span> <span style="color:#75715e"># 转换锚点 ID 中的字母为大写或小写 # &#34;0&#34; 不转换, &#34;1&#34; 为小写, &#34;2&#34; 为大写. “不转换”是为了方便手写Anchor</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">separator</span>: <span style="color:#e6db74">&#39;-&#39;</span> <span style="color:#75715e"># 用于替换空格的符号. # 默认为 &#34;-&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># images:</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">#   lazyload: false</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">#   prepend_root: false</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">#   post_asset: false</span>
</span></span></code></pre></div><p>当然你也可以直接更改依赖的代码, 但是这样做无法进行版本管理, 所以<strong>不推荐</strong>:</p>
<ol>
<li>
<p>进入包目录:</p>
<pre tabindex="0"><code>cd [hexo-site]/node_modules/hexo-renderer-markdown-it
</code></pre></li>
<li>
<p>编辑<code>index.js</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>hexo<span style="color:#f92672">.</span><span style="color:#a6e22e">config</span><span style="color:#f92672">.</span><span style="color:#a6e22e">markdown</span><span style="color:#f92672">.</span><span style="color:#a6e22e">anchors</span> <span style="color:#f92672">=</span> Object<span style="color:#f92672">.</span><span style="color:#a6e22e">assign</span><span style="color:#f92672">({</span>
</span></span><span style="display:flex;"><span>  level<span style="color:#f92672">:</span> <span style="color:#ae81ff">2</span><span style="color:#f92672">,</span>
</span></span><span style="display:flex;"><span>  collisionSuffix<span style="color:#f92672">:</span> <span style="color:#960050;background-color:#1e0010">&#39;&#39;</span><span style="color:#f92672">,</span>
</span></span><span style="display:flex;"><span>  permalink<span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">,</span> <span style="color:#75715e">//更改为true
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  permalinkClass<span style="color:#f92672">:</span> <span style="color:#960050;background-color:#1e0010">&#39;</span>header<span style="color:#f92672">-</span>anchor<span style="color:#960050;background-color:#1e0010">&#39;</span><span style="color:#f92672">,</span>
</span></span><span style="display:flex;"><span>  permalinkSide<span style="color:#f92672">:</span> <span style="color:#960050;background-color:#1e0010">&#39;</span>left<span style="color:#960050;background-color:#1e0010">&#39;</span><span style="color:#f92672">,</span>
</span></span><span style="display:flex;"><span>  permalinkSymbol<span style="color:#f92672">:</span> <span style="color:#960050;background-color:#1e0010">&#39;&#39;</span><span style="color:#f92672">,</span> <span style="color:#75715e">//更改为空字符串
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#66d9ef">case</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span><span style="color:#f92672">,</span>
</span></span><span style="display:flex;"><span>  separator<span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;-&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">},</span> hexo<span style="color:#f92672">.</span><span style="color:#a6e22e">config</span><span style="color:#f92672">.</span><span style="color:#a6e22e">markdown</span><span style="color:#f92672">.</span><span style="color:#a6e22e">anchors</span><span style="color:#f92672">);</span>
</span></span></code></pre></div></li>
</ol>
<h3 id="公式自动编号和引用">公式自动编号和引用<a href="#公式自动编号和引用" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h3>
<p>To enable this feature, you need to set <code>mathjax.tags</code> to <code>ams</code> in NexT config file.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">math</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">mathjax</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">enable</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Available values: none | ams | all</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">tags</span>: <span style="color:#ae81ff">ams</span>
</span></span></code></pre></div><p>为了使用这项功能，一般来说，你必须把所使用的 LaTeX 公式放在 <code>equation</code> 环境里面，采用旧的方法（也就是说，仅仅把公式的每一边用两个 <code>$</code> 符号包含起来）是无效的。如何引用公式？你只需要在书写公式的时候给公式一个 <code>\label{}</code> 标记（tag），然后在正文中，可以使用 <code>\ref{}</code> 或者 <code>\eqref{}</code> 命令来引用对应的公式。使用 <code>\eqref{}</code> 是推荐的方式，因为如果你使用 <code>\ref{}</code>，公式在文中的引用编号将没有圆括号包围。下面介绍几种常见的公式编号例子.</p>
<p>对于简单的公式，使用下面的方式给公式一个标记，</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-latex" data-lang="latex"><span style="display:flex;"><span><span style="color:#e6db74">$$</span>\begin{equation}\label{eq<span style="color:#ae81ff">1</span>}
</span></span><span style="display:flex;"><span>e<span style="color:#f92672">=</span>mc^<span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>\end{equation}<span style="color:#e6db74">$$</span>
</span></span></code></pre></div><p>然后，在正文中，你可以轻松引用上述公式，一个简单的例子如下：</p>
<pre tabindex="0"><code>著名的质能方程 $\eqref{eq1}$ 由爱因斯坦提出 ...
</code></pre><h3 id="multi-line-equations">Multi-line Equations<a href="#multi-line-equations" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h3>
<p>对于多行公式，在 <code>equation</code> 环境中，你可以使用 <code>aligned</code> 环境把公式分成多行，</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-latex" data-lang="latex"><span style="display:flex;"><span><span style="color:#e6db74">$$</span>\begin{equation}\label{eq<span style="color:#ae81ff">2</span>}
</span></span><span style="display:flex;"><span>\begin{aligned}
</span></span><span style="display:flex;"><span>a &amp;<span style="color:#f92672">=</span> b <span style="color:#f92672">+</span> c \\
</span></span><span style="display:flex;"><span>  &amp;<span style="color:#f92672">=</span> d <span style="color:#f92672">+</span> e <span style="color:#f92672">+</span> f <span style="color:#f92672">+</span> g \\
</span></span><span style="display:flex;"><span>  &amp;<span style="color:#f92672">=</span> h <span style="color:#f92672">+</span> i
</span></span><span style="display:flex;"><span>\end{aligned}
</span></span><span style="display:flex;"><span>\end{equation}<span style="color:#e6db74">$$</span>
</span></span></code></pre></div><h3 id="multiple-aligned-equations">Multiple Aligned Equations<a href="#multiple-aligned-equations" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h3>
<p>要对齐多个公式，我们需要使用 <code>align</code> 环境。align 环境中的每个公式都有自己的编号：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-latex" data-lang="latex"><span style="display:flex;"><span><span style="color:#e6db74">$$</span>\begin{align}
</span></span><span style="display:flex;"><span>a &amp;<span style="color:#f92672">=</span> b <span style="color:#f92672">+</span> c \label{eq<span style="color:#ae81ff">3</span>} \\
</span></span><span style="display:flex;"><span>x &amp;<span style="color:#f92672">=</span> yz \label{eq<span style="color:#ae81ff">4</span>}\\
</span></span><span style="display:flex;"><span>l &amp;<span style="color:#f92672">=</span> m <span style="color:#f92672">-</span> n \label{eq<span style="color:#ae81ff">5</span>}
</span></span><span style="display:flex;"><span>\end{align}<span style="color:#e6db74">$$</span>
</span></span></code></pre></div><h3 id="exclude-equations-from-numbering">Exclude Equations from Numbering<a href="#exclude-equations-from-numbering" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h3>
<p>在 <code>align</code> 环境中，如果你不想给某个或某几个公式编号，那么在这些公式后面使用 <a href="https://tex.stackexchange.com/questions/17528/show-equation-number-only-once-in-align-environment"><code>\nonumber</code></a> 命令即可。例如：</p>
<pre tabindex="0"><code>$$\begin{align}
-4 + 5x &amp;= 2+y \nonumber  \\
 w+2 &amp;= -1+w \\
 ab &amp;= cb
\end{align}$$
</code></pre><h3 id="use-tag-to-tag-equations">Use <code>\tag</code> to Tag Equations<a href="#use-tag-to-tag-equations" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h3>
<p>有时，你可能会希望采用更加奇特的方式来标记和引用你的公式，你可以通过使用 <code>\tag{}</code> 命令来实现，例如：</p>
<pre tabindex="0"><code>$$x+1\over\sqrt{1-x^2} \tag{i}\label{eq_tag}$$
</code></pre><p>如果你想要了解更多信息，请访问 <a href="https://docs.mathjax.org/en/latest/input/tex/eqnumbers.html">MathJax 关于公式编号的官方文档</a>。同时，你也可以阅读 <a href="https://theme-next.org/docs/third-party-services/math-equations">这篇文档</a> 来获取更多细节信息。</p>
<h2 id="字体">字体<a href="#字体" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<p>默认字体(<code>font: false</code>)是Microsoft YaHei, 还挺好看的. 当然也可以自己<a href="https://hexo-next.readthedocs.io/zh_CN/latest/next/advanced/%E5%AD%97%E4%BD%93%E8%AE%BE%E7%BD%AE/">改字体</a>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">font</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">enable</span>: <span style="color:#66d9ef">false</span>
</span></span></code></pre></div><p>低版本的Next的<code>font: false</code>的中文巨丑, 将<code>font</code>设为true,之后比原来好看了..</p>
<p>但我也不知道新字体是啥</p>
<h2 id="代码块">代码块<a href="#代码块" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<ul>
<li>
<p>代码高亮(Code Highlight theme): 这个网站可以预览所有高亮效果：<a href="https://theme-next.js.org/highlight/">传送门</a></p>
<p>我使用highlight作为高亮引擎, theme使用<code>a11y-light</code></p>
</li>
<li>
<p>我没有设置代码块行号</p>
</li>
</ul>
<p>Next Config:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">codeblock</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># Code Highlight theme</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># All available themes: https://theme-next.js.org/highlight/</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">theme</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># light: default</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># dark: stackoverflow-dark</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">light</span>: <span style="color:#ae81ff">a11y-light</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">dark</span>: <span style="color:#ae81ff">a11y-dark</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">prism</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">light</span>: <span style="color:#ae81ff">prism</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">dark</span>: <span style="color:#ae81ff">prism-dark</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># Add copy button on codeblock</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">copy_button</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">enable</span>: <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Available values: default | flat | mac</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">style</span>: <span style="color:#ae81ff">flat</span>
</span></span></code></pre></div><p>Hexo Config:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">highlight</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">enable</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">line_number</span>: <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">auto_detect</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">tab_replace</span>: <span style="color:#e6db74">&#39;&#39;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">wrap</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">hljs</span>: <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">prismjs</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">enable</span>: <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">preprocess</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">line_number</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">tab_replace</span>: <span style="color:#e6db74">&#39;&#39;</span>
</span></span></code></pre></div><h2 id="图像缩放">图像缩放<a href="#图像缩放" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<p><code>NexT</code>集成了多种图像显示工具, 包括<code>FancyBox</code>和<code>MediumZoom</code>, 主要功能是图像缩放.</p>
<p>开启<code>MediumZoom</code>:</p>
<pre tabindex="0"><code># A JavaScript library for zooming images like Medium.
# Warning: Do not enable both `fancybox` and `mediumzoom`.
# For more information: https://medium-zoom.francoischalifour.com
mediumzoom: true
</code></pre><h2 id="图像懒加载">图像懒加载<a href="#图像懒加载" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<pre tabindex="0"><code>npm install hexo-lazyload --save
</code></pre><pre tabindex="0"><code>lazyload: true
</code></pre><h2 id="访客人数文章阅读次数">访客人数&amp;&amp;文章阅读次数<a href="#访客人数文章阅读次数" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<p><code>NexT</code>主题已集成了不蒜子的访客人数和文章阅读统计功能:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#75715e"># Show Views / Visitors of the website / page with busuanzi.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Get more information on http://ibruce.info/2015/04/04/busuanzi</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">busuanzi_count</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">enable</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">total_visitors</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">total_visitors_icon</span>: <span style="color:#ae81ff">user fa fa-user</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">total_views</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">total_views_icon</span>: <span style="color:#ae81ff">eye fa fa-eye</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">post_views</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">post_views_icon</span>: <span style="color:#ae81ff">eye fa fa-eye</span>
</span></span></code></pre></div><ul>
<li>在首页显示文章的阅读次数</li>
<li>点击全文阅读显示阅读次数</li>
<li>在底部可以看见访客人数和文章阅读次数</li>
</ul>
<h2 id="网页加载加速">网页加载加速<a href="#网页加载加速" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<p>使用<a href="https://github.com/theme-next/hexo-filter-optimize">hexo-filter-optimize</a>来提升网页加载速度:</p>
<ol>
<li>
<p>下载插件:</p>
<pre tabindex="0"><code>npm install hexo-filter-optimize
</code></pre></li>
<li>
<p>编辑配置文件:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">filter_optimize</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">enable</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># remove the surrounding comments in each of the bundled files</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">remove_comments</span>: <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">css</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># minify all css files</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">minify</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># bundle loaded css files into one</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">bundle</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># use a script block to load css elements dynamically</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">delivery</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># make specific css content inline into the html page</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">#   - only support the full path</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">#   - default is [&#39;css/main.css&#39;]</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">inlines</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">excludes</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">js</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># minify all js files</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">minify</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># bundle loaded js files into one</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">bundle</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">excludes</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># set the priority of this plugin,</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># lower means it will be executed first, default of Hexo is 10</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">priority</span>: <span style="color:#ae81ff">12</span>
</span></span></code></pre></div></li>
</ol>
<h2 id="back2top-button">back2top button<a href="#back2top-button" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<p>back2top button非常好看, 默认是添加的:</p>
<pre tabindex="0"><code>back2top:
  enable: true
  # Back to top in sidebar. button默认出现在左下角, 如果这里为true,就会出现在sidebar里面(头像, 目录下面),很难察觉
  # 所以我设为false
  sidebar: false
  # Scroll percent label in b2t button.
  # 让to-top的小箭头随时显示数值, 我觉得这样破坏阅读体验, 所以为false
  scrollpercent: false
</code></pre><p>这里有个<a href="https://github.com/jiangtj-lab/hexo-cake-moon-menu">插件</a>, 不过已经不需要了. 自带的就很好看.</p>
<h2 id="版权">版权<a href="#版权" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<p>选择<code>sidebar</code>, 会在sidebar出现一个小徽章, 不怎么碍眼. 如果选择<code>post</code>, 版权信息会出现在文章底部, 很难看.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#75715e"># Creative Commons 4.0 International License.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># See: https://creativecommons.org/about/cclicenses/</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">creative_commons</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># Available values: by | by-nc | by-nc-nd | by-nc-sa | by-nd | by-sa | cc-zero</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">license</span>: <span style="color:#ae81ff">by-nc-sa</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># Available values: big | small</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">size</span>: <span style="color:#ae81ff">small</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">sidebar</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">post</span>: <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># You can set a language value if you prefer a translated version of CC license, e.g. deed.zh</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># CC licenses are available in 39 languages, you can find the specific and correct abbreviation you need on https://creativecommons.org</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">language</span>:
</span></span></code></pre></div><h2 id="一些不想用的美化">一些不想用的美化<a href="#一些不想用的美化" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<p>以下美化我都不想用, 只是给出添加方式.</p>
<ul>
<li>
<p>添加版权信息: 版权信息很丑, 所以我没加</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">creative_commons</span>:
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">license</span>: <span style="color:#ae81ff">by-nc-sa</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">sidebar</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">post</span>: <span style="color:#66d9ef">true</span>
</span></span></code></pre></div></li>
<li>
<p>添加评论系统. 我不想加</p>
</li>
<li>
<p>夜间模式: 这是永久的, 不能手动切换, 所以我也不想加.</p>
<pre tabindex="0"><code>darkmode: true
</code></pre></li>
<li>
<p>Reading progress bar: 五颜六色的,影响观看:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">reading_progress</span>: <span style="color:#ae81ff">Reading progress bar</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">enable</span>: <span style="color:#66d9ef">false</span>
</span></span></code></pre></div></li>
</ul>
<h1 id="多主机同步">多主机同步<a href="#多主机同步" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h1>
<p>多主机同步主要的坑在于主题的管理</p>
<h2 id="多分支">多分支<a href="#多分支" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<p>在安装插件后,<code>hexo d</code>会生成网页文件, 并将其部署到GitHub和GitPage. 但是不会把源文件也push到github. 我们需要:</p>
<ol>
<li>
<p>在Github建两个分支,分别管理生成的网页文件和源文件:</p>
<ul>
<li>master: 用于存放<code>hexo d </code>部署的网页文件</li>
<li>hexo: 用于项目源文件, 包括文档源文件</li>
</ul>
</li>
<li>
<p>在Github仓库<code>-&gt;Settings-&gt;Branches-&gt;Default branch</code>中将默认分支设为<code>Hexo</code>. 这样每次手动push源文件,都到hexo分支.</p>
<p>当然也可以每次都手动指定,这样很蠢:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>git push origin hexo
</span></span></code></pre></div></li>
<li>
<p>而我们的<code>hexo d</code>会把生成的网页文件同步到master分支. 这是之前配置<code>hexo d</code>插件时设置的:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">deploy</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">type</span>: <span style="color:#ae81ff">git</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">repo</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">github</span>: <span style="color:#ae81ff">git@github.com:LYK-love/LYK-love.github.io.git</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">branch</span>: <span style="color:#ae81ff">master</span>
</span></span></code></pre></div></li>
</ol>
<h2 id="多主机同步的问题">多主机同步的问题<a href="#多主机同步的问题" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<p>我们看到, Hexo添加主题的一般流程是 <code>clone</code> 主题到对应的 <code>themes</code>目录中，然后编辑Hexo的配置文件. 但是, 主题是一个独立的github仓库, 有自己的 <code>.git</code> 文件夹, 也就是说<strong>本地的主题项目是嵌套在Hexo项目内的字仓库</strong>.</p>
<p><strong>当push本地仓库时, 是不会push子仓库的</strong>, 证据就是, 在github上查看网站项目仓库, 点进<code>&lt;repository&gt;/themes/</code>, 会发现<code>next</code>文件夹有个很奇怪的名字: <code>[next @ XXXXX</code>, 点击它, 会跳转到该主题文件夹对应的github项目. 这说明<strong>本地的主题文件夹是一个子项目, 从来没有随着父项目一起被push到github上</strong>.</p>
<p>因此, 当有新主机<strong>clone</strong>你的hexo仓库时( 比如它要参与多主机同步 ), 它clone下的主题文件夹是空的.</p>
<p>比如, 我用next主题, 当我买了台新电脑, 想要在它上面同步我开发的hexo. clone下我的网站, 发现项目内<code>themes/next</code>为空. 这样就无法正确生成网站页面了.</p>
<blockquote>
<p>该Bug的表面结果是: hexo生成的<code>index.html</code>也为空( 0kb )</p>
</blockquote>
<p>主题文件夹不会被push, 且每次主题更新时,都会被overwritten, 所以不要更改主题文件夹到任何内容.</p>
<p>对于<strong>主题配置文件</strong>. Next官方提供<a href="https://theme-next.js.org/docs/getting-started/configuration">Alternate Theme Config机制</a>来让用户自定义主题配置:</p>
<ol>
<li>
<p>把主题配置文件复制到Hexo项目目录下, 取名为 <code>_config.[name].yml</code>. Replace <code>[name]</code> with the value of <code>theme</code> option in Hexo config file. For NexT theme, the file name is <code>_config.next.yml</code> by default</p>
</li>
<li>
<p>现在主题的配置文件就会读取Hexo项目目录的<code>_config.[name].yml</code>, 而不是主题目录的<code>_config.yml</code>. 由于位于Hexo项目目录下, <code>_config.[name].yml</code>会随着每次的push被push到Hexo项目的仓库. 不用担心<strong>子项目问题</strong></p>
</li>
<li>
<p>多主机同步时, 新主机只需clone整个项目:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git clone https://github.com/LYK-love/LYK-love.github.io
</span></span></code></pre></div></li>
</ol>
<p>对于CSS之类的文件, 反我是不会改的, 所以无所谓同步. 对于图片, <a href="#Configuring-Favicon">之前</a>讲了,可以放在项目的<code>/source/images/</code>进行同步( 而不是主题的<code>themes/next/images</code>).</p>
<p>当然为了保险, 我也另外在项目文件夹内备份了图片文件.</p>
<p>下文的**@Deprecated 同步步骤**是被废弃的方案, 它使用git modules, 这种方案新建了主题仓库, 然后用git module同步整个主题文件夹, 问题在于这样做就没法进行主题的更新了, 因此废弃</p>
<h2 id="new-同步步骤">@New 同步步骤<a href="#new-同步步骤" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<p>老主机只需<code>git pull</code>就行了.</p>
<p>对于本地还没有hexo项目的新主机, 需要:</p>
<ol>
<li>
<p>clone自己的Hexo项目并初始化:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>git clone https://github.com/LYK-love/LYK-love.github.io
</span></span><span style="display:flex;"><span>cd LYK-love.github.io
</span></span><span style="display:flex;"><span>npm install
</span></span></code></pre></div><p>可能会遇到报错:</p>
<pre tabindex="0"><code>ERROR Cannot find module &#39;hexo&#39; from &#39;/Users/lyk/Documents/LYK-love.github.io&#39;
&lt;Snip&gt;
ERROR Try running: &#39;rm -rf node_modules &amp;&amp; npm install --force&#39;
</code></pre><p>只需按照提示操作即可:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>rm -rf node_modules <span style="color:#f92672">&amp;&amp;</span> npm install --force
</span></span></code></pre></div></li>
<li>
<p>安装主题</p>
</li>
<li>
<p>由于下文介绍的Next主题的Alternate Theme Config机制, 主题配置文件已经在Hexo项目文件夹中被我们clone下来了, 也就是说已经同步了, 万事大吉.</p>
<ul>
<li>由前文知, hexo-renderer-markdown-it的配置也放在主题配置文件中进行同步了.</li>
</ul>
</li>
<li>
<p>但是, images等文件没有同步, 我把images放在Hexo项目文件夹下, 需要手动把它copy到主机文件夹的<code>source/images</code>中</p>
</li>
</ol>
<h2 id="deprecated-同步步骤">@Deprecated 同步步骤<a href="#deprecated-同步步骤" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<p><strong>注: 该方案已经被废弃</strong></p>
<p>Ref:</p>
<ul>
<li><a href="https://juejin.cn/post/6844903751908605965"> 在 hexo 中使用 git submodules 管理主题 </a></li>
</ul>
<p>在Hexo多主机同步时, 我们当然希望自己的主题配置文件也同步.</p>
<hr>
<p><strong>Bad Practice</strong>: 由于本地的主题项目没办法push, 新主机就只能每次只clone 自己Hexo项目, 然后重新clone官方的主题. 这样做是愚蠢的. 多台机子上开发, 每台的本地都是不同的主题项目, 每次生成网页文件,样式都不一样.</p>
<hr>
<p>因此, 我们需要<strong>有一个自己的主题项目, 来对主题也进行版本管理</strong>. 可以fork官方主题项目, 但我为了方便, 直接创建了<a href="https://github.com/LYK-love/Next">自己的主题项目</a>.</p>
<h3 id="old-hosts">Old Hosts<a href="#old-hosts" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h3>
<p>对于已经加入多主机同步的主机来说, 如果本地更改了主题. 那么每次除了push Hexo项目文件, 还得把再把主题项目文件也push. 否则主题配置的更改是没法同步到Github的.</p>
<hr>
<p>push子项目:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>cd ./themes/next
</span></span><span style="display:flex;"><span>git add . <span style="color:#f92672">&amp;&amp;</span> git commit -m<span style="color:#e6db74">&#34;XXX&#34;</span>
</span></span><span style="display:flex;"><span>git push
</span></span></code></pre></div><hr>
<p>要在pull Hexo项目时顺便拉取子项目( 主题项目 ), 这称为update submodule:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e"># 把项目的子项目也pull下来</span>
</span></span><span style="display:flex;"><span>git submodule update --init
</span></span></code></pre></div><p>当然也可以pull Hexo后手动再pull子项目,这样很蠢:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>cd ./themes/next
</span></span><span style="display:flex;"><span>git pull
</span></span></code></pre></div><h3 id="new-hosts">New Hosts<a href="#new-hosts" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h3>
<p>对于要加入多主机同步的新主机来说, 要把主题文件当作git submodule, 在初始化阶段, 先同步Hexo, 再同步主题.</p>
<ol>
<li>
<p>clone自己的Hexo项目并初始化:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>git clone https://github.com/LYK-love/LYK-love.github.io
</span></span><span style="display:flex;"><span>cd LYK-love.github.io
</span></span><span style="display:flex;"><span>npm install
</span></span></code></pre></div></li>
<li>
<p>将主题作为submodule添加进来:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>cd blog-hexo
</span></span><span style="display:flex;"><span>git submodule add https://github.com/LYK-love/next themes/next
</span></span></code></pre></div><ul>
<li>
<p><code>git submodule add &lt;sub-module-registry&gt;</code>:  git 会将主题项目( 也就是我的<code>next</code>项目 )作为一个submodule,  clone 到 <code>themes/hexo</code> 中.</p>
<ul>
<li>同时 hexo 项目中会生成一个 <code>.gitmodules</code> 文件, 这个配置文件中保存了项目 URL 与已经拉取的本地目录之间的映射.</li>
</ul>
</li>
<li>
<p><code>.gitmodules 文件内容</code>:</p>
<pre tabindex="0"><code>&gt; cat .gitmodules
[submodule &#34;themes/next&#34;]
	path = themes/next
	url = git@github.com:LYK-love/next.git
</code></pre></li>
</ul>
</li>
<li>
<p>update submudule, 第一次update时要加<code>--init</code>选项:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>git submodule update --init
</span></span></code></pre></div><ul>
<li>也可在 clone 父项目时直接使用 <code>git clone --recursive</code> , git 也会pull所有的子项目.</li>
</ul>
</li>
<li>
<p>现在新主机已经加入多主机同步, 变成Old Hosts了.</p>
</li>
</ol>
<h2 id="bugs">Bugs<a href="#bugs" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<ul>
<li>
<p><code>hexo g</code> 会生成静态文件, 但是，如果你的目录下有失效的软链接， 就不会生成文件。 因此请删除所有的失效软链接</p>
<ul>
<li>ref：<a href="https://chrisbergeron.com/2020/12/24/fixing-hexo-not-generating-files/#:~:text=If%20you%E2%80%99re%20having%20trouble%20with%20Hexo%20not%20generating,l%20-exec%20test%20%21%20-e%20%7B%7D%20%3B%20-print"> Fixing Hexo Not Generating Files </a></li>
</ul>
</li>
<li>
<p>hexo的markdown源代码避免出现<strong>跨级标题结构</strong>， 这里的<em>跨级</em>指的是不能从一个一级标题直接跟三级标题；二级标题后紧跟的子标题级别必须是三级标题</p>
</li>
<li>
<p>文章的Front-matter是YAML格式, 因此冒号后面必须有一个英文空格:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-markdown" data-lang="markdown"><span style="display:flex;"><span>title: XX
</span></span><span style="display:flex;"><span>categories: XX
</span></span><span style="display:flex;"><span>tags: XX
</span></span></code></pre></div><p>否则报错:</p>
<p>YAMLException: can not read a block mapping entry; a multiline key may not be an implicit key</p>
</li>
<li>
<p>如果表格多了行/列,在显示时会很丑</p>
</li>
<li>
<p>极其罕见的Bug, 花了我大半天: Hexo和Next分别更新, 结果Latex不能显示, hexo g巨慢, 页面闪烁, back2top小箭头图表消失等等等等&hellip; 最好他居然神奇地好了. 我猜是package.json冲突了. 不过具体原因我也不知道&hellip; .气死我了.</p>
</li>
</ul>
<h1 id="hexo-doc">Hexo Doc<a href="#hexo-doc" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h1>
<p>网上没有关于安装指定版本的Hexo的教程. 我的做法是抄一份指定版本的<code>package.json</code>然后<code>npm install</code></p>
<h2 id="version">Version<a href="#version" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<ol>
<li>
<p>查看本地Hexo版本:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>hexo version
</span></span></code></pre></div></li>
<li>
<p>查看有哪些落后的版本:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>npm outdated
</span></span></code></pre></div></li>
</ol>
<h2 id="install">Install<a href="#install" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<pre tabindex="0"><code>npm install -g hexo-cli
</code></pre><h2 id="ungrade">Ungrade<a href="#ungrade" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<ol>
<li>
<p>安装hexo时需要安装hexo-cli(它包含了hexo在内的一大堆依赖), 而升级hexo只需升级所有插件:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>npm install -g npm-upgrade
</span></span></code></pre></div><ul>
<li><code>npm-upgrade</code>: 升级作为<code>dependency</code>的hexo</li>
</ul>
</li>
<li>
<p>查看是否更新成功:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>hexo version
</span></span></code></pre></div></li>
</ol>
<h2 id="uninstall">Uninstall<a href="#uninstall" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<ul>
<li>
<p>Uninstall:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>npm uninstall hexo
</span></span></code></pre></div></li>
</ul>
<h1 id="next-doc">NeXt Doc<a href="#next-doc" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h1>
<p>NexT 每个月都会发布新版本</p>
<p><a href="">Next Official Doc</a></p>
<p><a href="https://github.com/next-theme/hexo-theme-next">Next Github Repo</a></p>
<p>尽量以官方文档为准, Github repo上只有很少的信息.</p>
<p>注意, Next存在多个Github repo, 请不要被混淆. 例如该repo:</p>
<ul>
<li><a href="https://github.com/theme-next/hexo-theme-next">https://github.com/theme-next/hexo-theme-next</a></li>
</ul>
<p>这是一个过时的repo, 其next版本只到7.8.0. 而直到本文写作时, next版本已经达到8.15.1了, 因此要注意区分.</p>
<h2 id="version-1">Version<a href="#version-1" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<p>NeXt &lt; 8的版本好像没办法查看</p>
<p>Next &gt;=8 之后, 每次<code>hexo s/d</code>时在命令行的输出里都有Next版本信息. 此外<code>hexo version</code>也会显示next版本.</p>
<h2 id="installation">Installation<a href="#installation" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<p><a href="https://theme-next.js.org/docs/getting-started/installation.html">Next Official Doc: Installation</a></p>
<p>由于我不对主题做版本管理, 也就不新开仓库了.</p>
<p>无论是下载还是更新Next, 都要先更新到最新的Hexo.</p>
<h3 id="using-npm">Using npm<a href="#using-npm" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h3>
<pre tabindex="0"><code>npm install hexo-theme-next@latest
</code></pre><ul>
<li>npm会把主题文件夹下载到<code>/node_modules/hexo-theme-next</code></li>
</ul>
<h3 id="using-git">Using git<a href="#using-git" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h3>
<p>In hexo directory:</p>
<pre tabindex="0"><code>git clone https://github.com/next-theme/hexo-theme-next themes/next
</code></pre><ul>
<li>注意, 如果在<code>themes/</code>下已经存在了主题文件夹, 则Hexo会忽略<code>node_modules/</code>中可能存在的/主题文件夹. 也就是说要么用git, 要么用npm, 两者不能共存</li>
</ul>
<h2 id="after-installation">After Installation<a href="#after-installation" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<p>安装成功后就可以使用了, 命令行输入如下:</p>
<pre tabindex="0"><code>❯ hexo s
INFO  Validating config
INFO  ==================================
  ███╗   ██╗███████╗██╗  ██╗████████╗
  ████╗  ██║██╔════╝╚██╗██╔╝╚══██╔══╝
  ██╔██╗ ██║█████╗   ╚███╔╝    ██║
  ██║╚██╗██║██╔══╝   ██╔██╗    ██║
  ██║ ╚████║███████╗██╔╝ ██╗   ██║
  ╚═╝  ╚═══╝╚══════╝╚═╝  ╚═╝   ╚═╝
========================================
NexT version 8.15.1
Documentation: https://theme-next.js.org
========================================
INFO  Start processing
INFO  Hexo is running at http://localhost:4000/ . Press Ctrl+C to stop.
</code></pre><h2 id="upgrade">Upgrade<a href="#upgrade" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<p>记得备份old主题文件夹的文件, 把旧主题文件夹rename为<code>next-old</code>. 当然, 由于该文件夹一般什么都不会改,所以不备份也没啥关系</p>
<p>已经采用了Alternate Theme Config, 因此可以平滑地升级:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git pull
</span></span></code></pre></div><h1 id="markdown">Markdown<a href="#markdown" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h1>
<h2 id="页面内跳转">页面内跳转<a href="#页面内跳转" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<h2 id="anchor">Anchor<a href="#anchor" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<h3 id="auto">Auto<a href="#auto" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h3>
<p>只需要使用<code>hexo-renderer-markdown-it</code>, 并修改其配置文件, 就可以使文章Header自带Anchor</p>
<h3 id="manual">Manual<a href="#manual" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h3>
<p>例子:</p>
<p>Markdown的一个标题:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-markdown" data-lang="markdown"><span style="display:flex;"><span>// in markdown:
</span></span><span style="display:flex;"><span># Ha ha
</span></span><span style="display:flex;"><span>dadads
</span></span></code></pre></div><p>会被Hexo渲染成:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>//in html
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">id</span> <span style="color:#960050;background-color:#1e0010">=</span> <span style="color:#960050;background-color:#1e0010">&#34;</span><span style="color:#a6e22e">ha-ha</span><span style="color:#960050;background-color:#1e0010">&#34;</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">h1</span>&gt;dadads&lt;/<span style="color:#f92672">h1</span>&gt;
</span></span></code></pre></div><ul>
<li>空格会被转换为连字符, 大写会被转换为小写.
<ul>
<li>由于我在<code>hexo-renderer-markdown-it</code>中的配置, 空格会被转换为<code>-</code>, 而大小写是<strong>不转换</strong>的</li>
</ul>
</li>
</ul>
<hr>
<p>如果有重名的标题(即使处于不同的标题层次), 就会在html的标签的id属性中予以区分:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-markdown" data-lang="markdown"><span style="display:flex;"><span>// in markdown:
</span></span><span style="display:flex;"><span># haha
</span></span><span style="display:flex;"><span>dadads
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span># Heihei
</span></span><span style="display:flex;"><span><span style="color:#75715e">## Haha //重名了
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>asa
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>//in html
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">id</span> <span style="color:#960050;background-color:#1e0010">=</span> <span style="color:#960050;background-color:#1e0010">&#34;</span><span style="color:#a6e22e">haha-1</span><span style="color:#960050;background-color:#1e0010">&#34;</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">h1</span>&gt;dadads&lt;/<span style="color:#f92672">h1</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">id</span> <span style="color:#960050;background-color:#1e0010">=</span> <span style="color:#960050;background-color:#1e0010">&#34;</span><span style="color:#a6e22e">haha-2</span><span style="color:#960050;background-color:#1e0010">&#34;</span>&gt; //用数字后缀区分了
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">h1</span>&gt;asa&lt;/<span style="color:#f92672">h1</span>&gt;
</span></span></code></pre></div><p>因此, 只需要在markdown中写:</p>
<pre tabindex="0"><code>[显示的内容](#标题)
</code></pre><p>生成的Html是:</p>
<pre tabindex="0"><code>&lt;a href=&#34;标题&#34;&gt;显示的内容&lt;/a&gt;
</code></pre><p>这就引用了对应的标题:</p>
<pre tabindex="0"><code># 标题
</code></pre><p>可以看到, 这是基于Html的标签id匹配的, 而Markdown标题生成的Html标签的id和标题级别没有关系, 只和标题名字有关系. 所以</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-markdown" data-lang="markdown"><span style="display:flex;"><span>[<span style="color:#f92672">显示的内容</span>](<span style="color:#a6e22e">#KKK</span>)
</span></span></code></pre></div><p>可以引用到:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-markdown" data-lang="markdown"><span style="display:flex;"><span># Haha
</span></span><span style="display:flex;"><span><span style="color:#75715e">## KKK
</span></span></span></code></pre></div><p>中的二级标题<code>KKK</code></p>
<p>由于空格会被转换为<code>-</code>, 因此如果标题为:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-markdown" data-lang="markdown"><span style="display:flex;"><span># Traditional Dead Lift
</span></span></code></pre></div><p>则应该这样引用:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-markdown" data-lang="markdown"><span style="display:flex;"><span>[<span style="color:#f92672">显示的内容</span>](<span style="color:#a6e22e">#Traditional-Dead-Lift</span>)
</span></span></code></pre></div>
      </div></div>

  
    
<div class="pagination">
    <div class="pagination__title">
        <span class="pagination__title-h">Read other posts</span>
        <hr />
    </div>
    <div class="pagination__buttons">
        
        <span class="button previous">
            <a href="https://lyk-love.cn/Hugo-Blog/posts/%E7%81%AB%E9%B8%9F/">
                <span class="button__icon">←</span>
                <span class="button__text">火鸟</span>
            </a>
        </span>
        
        
        <span class="button next">
            <a href="https://lyk-love.cn/Hugo-Blog/posts/l2-asymptotics/">
                <span class="button__text">L2 Asymptotics3000</span>
                <span class="button__icon">→</span>
            </a>
        </span>
        
    </div>
</div>

  

  
    

  
</article>

  </div>

  
    <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright">
        <span>© 2023 Powered by <a href="http://gohugo.io">Hugo</a></span>
    
      <span>:: <a href="https://github.com/panr/hugo-theme-terminal" target="_blank">Theme</a> made by <a href="https://github.com/panr" target="_blank">panr</a></span>
      </div>
  </div>
</footer>






<script type="text/javascript" src="/Hugo-Blog/bundle.min.js"></script>



<a id="search-btn" style="display: inline-block;" href="javascript:void(0);">
  <span class="icon-search">Search</span>
</a>











<script>
  
  
  
  
  var search_page_relative_url = "/search"
  
  
  
  document.addEventListener('keydown', function(event) {

    
    if (event.altKey && event.which === 191) {
      
      
      navToSearchPage(event)
    }

    
    if (event.keyCode == 27) {
      navToHomePage()
    }
  });


  document.querySelector("#search-btn").onclick = function(e) {
    e.stopPropagation();
    navToSearchPage()
  }


  function navToHomePage() {
    window.location.href = "/"
  }

  function navToSearchPage() {
    window.location.href = search_page_relative_url
    
    
    
  }
</script>



<div class="footer-box">
  
  <div class="back-to-top" id="back_to_top">
    
    
    
    <span><i class="fas fa-arrow-up"></i></span> 
    
    <span class="scrollpercent">
            <span id="back_to_top_text">0</span>%
         </span>
  </div>
</div>
<script>
  let sideBarOpen = 'sidebar-open';
  let body = document.body;
  let back2Top = document.querySelector('#back_to_top'),
          back2TopText = document.querySelector('#back_to_top_text'),
          drawerBox = document.querySelector('#drawer_box'),
          rightSideBar = document.querySelector('.sidebar'),
          viewport = document.querySelector('body');

  function scrollAnimation(currentY, targetY) {

    let needScrollTop = targetY - currentY
    let _currentY = currentY
    setTimeout(() => {
      const dist = Math.ceil(needScrollTop / 10)
      _currentY += dist
      window.scrollTo(_currentY, currentY)
      if (needScrollTop > 10 || needScrollTop < -10) {
        scrollAnimation(_currentY, targetY)
      } else {
        window.scrollTo(_currentY, targetY)
      }
    }, 1)
  }

  back2Top.addEventListener("click", function (e) {
    scrollAnimation(document.scrollingElement.scrollTop, 0);
    e.stopPropagation();
    return false;
  });

  window.addEventListener('scroll', function (e) {
    let percent = document.scrollingElement.scrollTop / (document.scrollingElement.scrollHeight - document.scrollingElement.clientHeight) * 100;
    if (percent > 1 && !back2Top.classList.contains('back-top-active')) {
      back2Top.classList.add('back-top-active');
    }
    if (percent == 0) {
      back2Top.classList.remove('back-top-active');
    }
    if (back2TopText) {
      back2TopText.textContent = Math.floor(percent);
    }
  });
  let hasCacu = false;
  window.onresize = function () {
    calcuHeight();
  }
</script>


  
</div>


</body>
</html>
